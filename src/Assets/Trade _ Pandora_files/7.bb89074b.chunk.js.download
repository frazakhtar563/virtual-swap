(this["webpackJsonppandora-frontend"]=this["webpackJsonppandora-frontend"]||[]).push([[7],{1273:function(t,e,i){"use strict";i.d(e,"a",(function(){return ra}));var a=i(130),n=i(19),r=i(21),s=i(27),o=i(28),h=i(38),l=function(){function t(){Object(n.a)(this,t),this.entries={},this.size=0}return Object(r.a)(t,[{key:"add",value:function(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}},{key:"addAll",value:function(t){for(var e=this.size,i=0,a=t.length;i<a;i++)this.add(t[i]);return e!=this.size}},{key:"contains",value:function(t){return this.entries[t]}},{key:"clear",value:function(){this.entries={},this.size=0}}]),t}(),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(n.a)(this,t),this.r=e,this.g=i,this.b=a,this.a=r}return Object(r.a)(t,[{key:"set",value:function(t,e,i,a){return this.r=t,this.g=e,this.b=i,this.a=a,this.clamp()}},{key:"setFromColor",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"setFromString",value:function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}},{key:"add",value:function(t,e,i,a){return this.r+=t,this.g+=e,this.b+=i,this.a+=a,this.clamp()}},{key:"clamp",value:function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}}],[{key:"rgba8888ToColor",value:function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}},{key:"rgb888ToColor",value:function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}},{key:"fromString",value:function(e){return(new t).setFromString(e)}}]),t}();c.WHITE=new c(1,1,1,1),c.RED=new c(1,0,0,1),c.GREEN=new c(0,1,0,1),c.BLUE=new c(0,0,1,1),c.MAGENTA=new c(1,0,1,1);var u=function(){function t(){Object(n.a)(this,t)}return Object(r.a)(t,null,[{key:"clamp",value:function(t,e,i){return t<e?e:t>i?i:t}},{key:"cosDeg",value:function(e){return Math.cos(e*t.degRad)}},{key:"sinDeg",value:function(e){return Math.sin(e*t.degRad)}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}},{key:"toInt",value:function(t){return t>0?Math.floor(t):Math.ceil(t)}},{key:"cbrt",value:function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}},{key:"randomTriangular",value:function(e,i){return t.randomTriangularWith(e,i,.5*(e+i))}},{key:"randomTriangularWith",value:function(t,e,i){var a=Math.random(),n=e-t;return a<=(i-t)/n?t+Math.sqrt(a*n*(i-t)):e-Math.sqrt((1-a)*n*(e-i))}},{key:"isPowerOfTwo",value:function(t){return t&&0===(t&t-1)}}]),t}();u.PI=3.1415927,u.PI2=2*u.PI,u.radiansToDegrees=180/u.PI,u.radDeg=u.radiansToDegrees,u.degreesToRadians=u.PI/180,u.degRad=u.degreesToRadians;var d=function(){function t(){Object(n.a)(this,t)}return Object(r.a)(t,null,[{key:"arrayCopy",value:function(t,e,i,a,n){for(var r=e,s=a;r<e+n;r++,s++)i[s]=t[r]}},{key:"arrayFill",value:function(t,e,i,a){for(var n=e;n<i;n++)t[n]=a}},{key:"setArraySize",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t.length;if(a==e)return t;if(t.length=e,a<e)for(var n=a;n<e;n++)t[n]=i;return t}},{key:"ensureArrayCapacity",value:function(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.length>=i?e:t.setArraySize(e,i,a)}},{key:"newArray",value:function(t,e){for(var i=new Array(t),a=0;a<t;a++)i[a]=e;return i}},{key:"newFloatArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var i=new Array(e),a=0;a<i.length;a++)i[a]=0;return i}},{key:"newShortArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var i=new Array(e),a=0;a<i.length;a++)i[a]=0;return i}},{key:"toFloatArray",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}},{key:"toSinglePrecision",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}},{key:"webkit602BugfixHelper",value:function(t,e){}},{key:"contains",value:function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1}},{key:"enumValue",value:function(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}]),t}();d.SUPPORTS_TYPED_ARRAYS="undefined"!==typeof Float32Array;var f=function(){function t(e){Object(n.a)(this,t),this.items=new Array,this.instantiator=e}return Object(r.a)(t,[{key:"obtain",value:function(){return this.items.length>0?this.items.pop():this.instantiator()}},{key:"free",value:function(t){t.reset&&t.reset(),this.items.push(t)}},{key:"freeAll",value:function(t){for(var e=0;e<t.length;e++)this.free(t[e])}},{key:"clear",value:function(){this.items.length=0}}]),t}(),v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(n.a)(this,t),this.x=e,this.y=i}return Object(r.a)(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"length",value:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}},{key:"normalize",value:function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}}]),t}(),m=function(){function t(){Object(n.a)(this,t),this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return Object(r.a)(t,[{key:"update",value:function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}]),t}(),g=function t(e){if(Object(n.a)(this,t),!e)throw new Error("name cannot be null.");this.name=e},p=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a;return Object(n.a)(this,i),(a=e.call(this,t)).id=i.nextID++,a.bones=null,a.vertices=[],a.worldVerticesLength=0,a.timelineAttachment=Object(h.a)(a),a}return Object(r.a)(i,[{key:"computeWorldVertices",value:function(t,e,i,a,n,r){i=n+(i>>1)*r;var s=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(l){for(var c=0,u=0,d=0;d<e;d+=2){var f=l[c];c+=f+1,u+=f}var v=s.bones;if(0==o.length)for(var m=n,g=3*u;m<i;m+=r){var p=0,b=0,y=l[c++];for(y+=c;c<y;c++,g+=3){var w=v[l[c]],x=h[g],k=h[g+1],A=h[g+2];p+=(x*w.a+k*w.b+w.worldX)*A,b+=(x*w.c+k*w.d+w.worldY)*A}a[m]=p,a[m+1]=b}else for(var S=o,C=n,E=3*u,I=u<<1;C<i;C+=r){var O=0,M=0,T=l[c++];for(T+=c;c<T;c++,E+=3,I+=2){var F=v[l[c]],R=h[E]+S[I],Y=h[E+1]+S[I+1],L=h[E+2];O+=(R*F.a+Y*F.b+F.worldX)*L,M+=(R*F.c+Y*F.d+F.worldY)*L}a[C]=O,a[C+1]=M}}else{o.length>0&&(h=o);for(var j=t.bone,X=j.worldX,B=j.worldY,P=j.a,V=j.b,D=j.c,N=j.d,U=e,z=n;z<i;U+=2,z+=r){var W=h[U],q=h[U+1];a[z]=W*P+q*V+X,a[z+1]=W*D+q*N+B}}}},{key:"copyTo",value:function(t){this.bones?(t.bones=new Array(this.bones.length),d.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=d.newFloatArray(this.vertices.length),d.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}}]),i}(g);p.nextID=0;var b,y=function(){function t(e){Object(n.a)(this,t),this.id=t.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(e)}return Object(r.a)(t,[{key:"copy",value:function(){var e=new t(this.regions.length);return d.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}},{key:"apply",value:function(t,e){var i=t.sequenceIndex;-1==i&&(i=this.setupIndex),i>=this.regions.length&&(i=this.regions.length-1);var a=this.regions[i];e.region!=a&&(e.region=a,e.updateRegion())}},{key:"getPath",value:function(t,e){for(var i=t,a=(this.start+e).toString(),n=this.digits-a.length;n>0;n--)i+="0";return i+=a}}],[{key:"nextID",value:function(){return t._nextID++}}]),t}();y._nextID=0,function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"}(b||(b={}));var w,x,k=[b.hold,b.once,b.loop,b.pingpong,b.onceReverse,b.loopReverse,b.pingpongReverse],A=function(){function t(e,i,a){if(Object(n.a)(this,t),this.timelines=[],this.timelineIds=new l,!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(i),this.duration=a}return Object(r.a)(t,[{key:"setTimelines",value:function(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}},{key:"hasTimeline",value:function(t){for(var e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}},{key:"apply",value:function(t,e,i,a,n,r,s,o){if(!t)throw new Error("skeleton cannot be null.");a&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,c=h.length;l<c;l++)h[l].apply(t,e,i,n,r,s,o)}}]),t}();!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(w||(w={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(x||(x={}));var S=0,C=1,E=2,I=3,O=4,M=5,T=6,F=7,R=8,Y=9,L=10,j=11,X=12,B=13,P=14,V=15,D=16,N=17,U=18,z=19,W=function(){function t(e,i){Object(n.a)(this,t),this.propertyIds=i,this.frames=d.newFloatArray(e*this.getFrameEntries())}return Object(r.a)(t,[{key:"getPropertyIds",value:function(){return this.propertyIds}},{key:"getFrameEntries",value:function(){return 1}},{key:"getFrameCount",value:function(){return this.frames.length/this.getFrameEntries()}},{key:"getDuration",value:function(){return this.frames[this.frames.length-this.getFrameEntries()]}}],[{key:"search1",value:function(t,e){for(var i=t.length,a=1;a<i;a++)if(t[a]>e)return a-1;return i-1}},{key:"search",value:function(t,e,i){for(var a=t.length,n=i;n<a;n+=i)if(t[n]>e)return n-i;return a-i}}]),t}(),q=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,r)).curves=d.newFloatArray(t+18*a),s.curves[t-1]=1,s}return Object(r.a)(i,[{key:"setLinear",value:function(t){this.curves[t]=0}},{key:"setStepped",value:function(t){this.curves[t]=1}},{key:"shrink",value:function(t){var e=this.getFrameCount()+18*t;if(this.curves.length>e){var i=d.newFloatArray(e);d.arrayCopy(this.curves,0,i,0,e),this.curves=i}}},{key:"setBezier",value:function(t,e,i,a,n,r,s,o,h,l,c){var u=this.curves,d=this.getFrameCount()+18*t;0==i&&(u[e]=2+d);for(var f=.03*(a-2*r+o),v=.03*(n-2*s+h),m=.006*(3*(r-o)-a+l),g=.006*(3*(s-h)-n+c),p=2*f+m,b=2*v+g,y=.3*(r-a)+f+.16666667*m,w=.3*(s-n)+v+.16666667*g,x=a+y,k=n+w,A=d+18;d<A;d+=2)u[d]=x,u[d+1]=k,y+=p,w+=b,p+=m,b+=g,x+=y,k+=w}},{key:"getBezierValue",value:function(t,e,i,a){var n=this.curves;if(n[a]>t){var r=this.frames[e],s=this.frames[e+i];return s+(t-r)/(n[a]-r)*(n[a+1]-s)}var o=a+18;for(a+=2;a<o;a+=2)if(n[a]>=t){var h=n[a-2],l=n[a-1];return l+(t-h)/(n[a]-h)*(n[a+1]-l)}e+=this.getFrameEntries();var c=n[o-2],u=n[o-1];return u+(t-c)/(this.frames[e]-c)*(this.frames[e+i]-u)}}]),i}(W),G=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){return Object(n.a)(this,i),e.call(this,t,a,[r])}return Object(r.a)(i,[{key:"getFrameEntries",value:function(){return 2}},{key:"setFrame",value:function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+1]=i}},{key:"getCurveValue",value:function(t){for(var e=this.frames,i=e.length-2,a=2;a<=i;a+=2)if(e[a]>t){i=a-2;break}var n=this.curves[i>>1];switch(n){case 0:var r=e[i],s=e[i+1];return s+(t-r)/(e[i+2]-r)*(e[i+2+1]-s);case 1:return e[i+1]}return this.getBezierValue(t,i,1,n-2)}}]),i}(q),_=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r,s){return Object(n.a)(this,i),e.call(this,t,a,[r,s])}return Object(r.a)(i,[{key:"getFrameEntries",value:function(){return 3}},{key:"setFrame",value:function(t,e,i,a){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=a}}]),i}(q),H=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,S+"|"+r)).boneIndex=0,s.boneIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.bones[this.boneIndex];if(o.active)if(i<this.frames[0])switch(r){case w.setup:return void(o.rotation=o.data.rotation);case w.first:o.rotation+=(o.data.rotation-o.rotation)*n}else{var h=this.getCurveValue(i);switch(r){case w.setup:o.rotation=o.data.rotation+h*n;break;case w.first:case w.replace:h+=o.data.rotation-o.rotation;case w.add:o.rotation+=h*n}}}}]),i}(G),Z=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,C+"|"+r,E+"|"+r)).boneIndex=0,s.boneIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(i<h[0])switch(r){case w.setup:return o.x=o.data.x,void(o.y=o.data.y);case w.first:o.x+=(o.data.x-o.x)*n,o.y+=(o.data.y-o.y)*n}else{var l=0,c=0,u=W.search(h,i,3),d=this.curves[u/3];switch(d){case 0:var f=h[u];l=h[u+1],c=h[u+2];var v=(i-f)/(h[u+3]-f);l+=(h[u+3+1]-l)*v,c+=(h[u+3+2]-c)*v;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}switch(r){case w.setup:o.x=o.data.x+l*n,o.y=o.data.y+c*n;break;case w.first:case w.replace:o.x+=(o.data.x+l-o.x)*n,o.y+=(o.data.y+c-o.y)*n;break;case w.add:o.x+=l*n,o.y+=c*n}}}}}]),i}(_),J=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,C+"|"+r)).boneIndex=0,s.boneIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.bones[this.boneIndex];if(o.active)if(i<this.frames[0])switch(r){case w.setup:return void(o.x=o.data.x);case w.first:o.x+=(o.data.x-o.x)*n}else{var h=this.getCurveValue(i);switch(r){case w.setup:o.x=o.data.x+h*n;break;case w.first:case w.replace:o.x+=(o.data.x+h-o.x)*n;break;case w.add:o.x+=h*n}}}}]),i}(G),K=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,E+"|"+r)).boneIndex=0,s.boneIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.bones[this.boneIndex];if(o.active)if(i<this.frames[0])switch(r){case w.setup:return void(o.y=o.data.y);case w.first:o.y+=(o.data.y-o.y)*n}else{var h=this.getCurveValue(i);switch(r){case w.setup:o.y=o.data.y+h*n;break;case w.first:case w.replace:o.y+=(o.data.y+h-o.y)*n;break;case w.add:o.y+=h*n}}}}]),i}(G),Q=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,I+"|"+r,O+"|"+r)).boneIndex=0,s.boneIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(i<h[0])switch(r){case w.setup:return o.scaleX=o.data.scaleX,void(o.scaleY=o.data.scaleY);case w.first:o.scaleX+=(o.data.scaleX-o.scaleX)*n,o.scaleY+=(o.data.scaleY-o.scaleY)*n}else{var l,c,d=W.search(h,i,3),f=this.curves[d/3];switch(f){case 0:var v=h[d];l=h[d+1],c=h[d+2];var m=(i-v)/(h[d+3]-v);l+=(h[d+3+1]-l)*m,c+=(h[d+3+2]-c)*m;break;case 1:l=h[d+1],c=h[d+2];break;default:l=this.getBezierValue(i,d,1,f-2),c=this.getBezierValue(i,d,2,f+18-2)}if(l*=o.data.scaleX,c*=o.data.scaleY,1==n)r==w.add?(o.scaleX+=l-o.data.scaleX,o.scaleY+=c-o.data.scaleY):(o.scaleX=l,o.scaleY=c);else{var g=0,p=0;if(s==x.mixOut)switch(r){case w.setup:g=o.data.scaleX,p=o.data.scaleY,o.scaleX=g+(Math.abs(l)*u.signum(g)-g)*n,o.scaleY=p+(Math.abs(c)*u.signum(p)-p)*n;break;case w.first:case w.replace:g=o.scaleX,p=o.scaleY,o.scaleX=g+(Math.abs(l)*u.signum(g)-g)*n,o.scaleY=p+(Math.abs(c)*u.signum(p)-p)*n;break;case w.add:o.scaleX+=(l-o.data.scaleX)*n,o.scaleY+=(c-o.data.scaleY)*n}else switch(r){case w.setup:g=Math.abs(o.data.scaleX)*u.signum(l),p=Math.abs(o.data.scaleY)*u.signum(c),o.scaleX=g+(l-g)*n,o.scaleY=p+(c-p)*n;break;case w.first:case w.replace:g=Math.abs(o.scaleX)*u.signum(l),p=Math.abs(o.scaleY)*u.signum(c),o.scaleX=g+(l-g)*n,o.scaleY=p+(c-p)*n;break;case w.add:o.scaleX+=(l-o.data.scaleX)*n,o.scaleY+=(c-o.data.scaleY)*n}}}}}}]),i}(_),$=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,I+"|"+r)).boneIndex=0,s.boneIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.bones[this.boneIndex];if(o.active)if(i<this.frames[0])switch(r){case w.setup:return void(o.scaleX=o.data.scaleX);case w.first:o.scaleX+=(o.data.scaleX-o.scaleX)*n}else{var h=this.getCurveValue(i)*o.data.scaleX;if(1==n)r==w.add?o.scaleX+=h-o.data.scaleX:o.scaleX=h;else{var l=0;if(s==x.mixOut)switch(r){case w.setup:l=o.data.scaleX,o.scaleX=l+(Math.abs(h)*u.signum(l)-l)*n;break;case w.first:case w.replace:l=o.scaleX,o.scaleX=l+(Math.abs(h)*u.signum(l)-l)*n;break;case w.add:o.scaleX+=(h-o.data.scaleX)*n}else switch(r){case w.setup:l=Math.abs(o.data.scaleX)*u.signum(h),o.scaleX=l+(h-l)*n;break;case w.first:case w.replace:l=Math.abs(o.scaleX)*u.signum(h),o.scaleX=l+(h-l)*n;break;case w.add:o.scaleX+=(h-o.data.scaleX)*n}}}}}]),i}(G),tt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,O+"|"+r)).boneIndex=0,s.boneIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.bones[this.boneIndex];if(o.active)if(i<this.frames[0])switch(r){case w.setup:return void(o.scaleY=o.data.scaleY);case w.first:o.scaleY+=(o.data.scaleY-o.scaleY)*n}else{var h=this.getCurveValue(i)*o.data.scaleY;if(1==n)r==w.add?o.scaleY+=h-o.data.scaleY:o.scaleY=h;else{var l=0;if(s==x.mixOut)switch(r){case w.setup:l=o.data.scaleY,o.scaleY=l+(Math.abs(h)*u.signum(l)-l)*n;break;case w.first:case w.replace:l=o.scaleY,o.scaleY=l+(Math.abs(h)*u.signum(l)-l)*n;break;case w.add:o.scaleY+=(h-o.data.scaleY)*n}else switch(r){case w.setup:l=Math.abs(o.data.scaleY)*u.signum(h),o.scaleY=l+(h-l)*n;break;case w.first:case w.replace:l=Math.abs(o.scaleY)*u.signum(h),o.scaleY=l+(h-l)*n;break;case w.add:o.scaleY+=(h-o.data.scaleY)*n}}}}}]),i}(G),et=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,M+"|"+r,T+"|"+r)).boneIndex=0,s.boneIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(i<h[0])switch(r){case w.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case w.first:o.shearX+=(o.data.shearX-o.shearX)*n,o.shearY+=(o.data.shearY-o.shearY)*n}else{var l=0,c=0,u=W.search(h,i,3),d=this.curves[u/3];switch(d){case 0:var f=h[u];l=h[u+1],c=h[u+2];var v=(i-f)/(h[u+3]-f);l+=(h[u+3+1]-l)*v,c+=(h[u+3+2]-c)*v;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}switch(r){case w.setup:o.shearX=o.data.shearX+l*n,o.shearY=o.data.shearY+c*n;break;case w.first:case w.replace:o.shearX+=(o.data.shearX+l-o.shearX)*n,o.shearY+=(o.data.shearY+c-o.shearY)*n;break;case w.add:o.shearX+=l*n,o.shearY+=c*n}}}}}]),i}(_),it=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,M+"|"+r)).boneIndex=0,s.boneIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.bones[this.boneIndex];if(o.active)if(i<this.frames[0])switch(r){case w.setup:return void(o.shearX=o.data.shearX);case w.first:o.shearX+=(o.data.shearX-o.shearX)*n}else{var h=this.getCurveValue(i);switch(r){case w.setup:o.shearX=o.data.shearX+h*n;break;case w.first:case w.replace:o.shearX+=(o.data.shearX+h-o.shearX)*n;break;case w.add:o.shearX+=h*n}}}}]),i}(G),at=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,T+"|"+r)).boneIndex=0,s.boneIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.bones[this.boneIndex];if(o.active)if(i<this.frames[0])switch(r){case w.setup:return void(o.shearY=o.data.shearY);case w.first:o.shearY+=(o.data.shearY-o.shearY)*n}else{var h=this.getCurveValue(i);switch(r){case w.setup:o.shearY=o.data.shearY+h*n;break;case w.first:case w.replace:o.shearY+=(o.data.shearY+h-o.shearY)*n;break;case w.add:o.shearY+=h*n}}}}]),i}(G),nt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,[F+"|"+r,R+"|"+r])).slotIndex=0,s.slotIndex=r,s}return Object(r.a)(i,[{key:"getFrameEntries",value:function(){return 5}},{key:"setFrame",value:function(t,e,i,a,n,r){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=a,this.frames[t+3]=n,this.frames[t+4]=r}},{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color;if(i<h[0]){var c=o.data.color;switch(r){case w.setup:return void l.setFromColor(c);case w.first:l.add((c.r-l.r)*n,(c.g-l.g)*n,(c.b-l.b)*n,(c.a-l.a)*n)}}else{var u=0,d=0,f=0,v=0,m=W.search(h,i,5),g=this.curves[m/5];switch(g){case 0:var p=h[m];u=h[m+1],d=h[m+2],f=h[m+3],v=h[m+4];var b=(i-p)/(h[m+5]-p);u+=(h[m+5+1]-u)*b,d+=(h[m+5+2]-d)*b,f+=(h[m+5+3]-f)*b,v+=(h[m+5+4]-v)*b;break;case 1:u=h[m+1],d=h[m+2],f=h[m+3],v=h[m+4];break;default:u=this.getBezierValue(i,m,1,g-2),d=this.getBezierValue(i,m,2,g+18-2),f=this.getBezierValue(i,m,3,g+36-2),v=this.getBezierValue(i,m,4,g+54-2)}1==n?l.set(u,d,f,v):(r==w.setup&&l.setFromColor(o.data.color),l.add((u-l.r)*n,(d-l.g)*n,(f-l.b)*n,(v-l.a)*n))}}}}]),i}(q),rt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,[F+"|"+r])).slotIndex=0,s.slotIndex=r,s}return Object(r.a)(i,[{key:"getFrameEntries",value:function(){return 4}},{key:"setFrame",value:function(t,e,i,a,n){t<<=2,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=a,this.frames[t+3]=n}},{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color;if(i<h[0]){var c=o.data.color;switch(r){case w.setup:return l.r=c.r,l.g=c.g,void(l.b=c.b);case w.first:l.r+=(c.r-l.r)*n,l.g+=(c.g-l.g)*n,l.b+=(c.b-l.b)*n}}else{var u=0,d=0,f=0,v=W.search(h,i,4),m=this.curves[v>>2];switch(m){case 0:var g=h[v];u=h[v+1],d=h[v+2],f=h[v+3];var p=(i-g)/(h[v+4]-g);u+=(h[v+4+1]-u)*p,d+=(h[v+4+2]-d)*p,f+=(h[v+4+3]-f)*p;break;case 1:u=h[v+1],d=h[v+2],f=h[v+3];break;default:u=this.getBezierValue(i,v,1,m-2),d=this.getBezierValue(i,v,2,m+18-2),f=this.getBezierValue(i,v,3,m+36-2)}if(1==n)l.r=u,l.g=d,l.b=f;else{if(r==w.setup){var b=o.data.color;l.r=b.r,l.g=b.g,l.b=b.b}l.r+=(u-l.r)*n,l.g+=(d-l.g)*n,l.b+=(f-l.b)*n}}}}}]),i}(q),st=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,R+"|"+r)).slotIndex=0,s.slotIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=o.color;if(i<this.frames[0]){var l=o.data.color;switch(r){case w.setup:return void(h.a=l.a);case w.first:h.a+=(l.a-h.a)*n}}else{var c=this.getCurveValue(i);1==n?h.a=c:(r==w.setup&&(h.a=o.data.color.a),h.a+=(c-h.a)*n)}}}}]),i}(G),ot=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,[F+"|"+r,R+"|"+r,Y+"|"+r])).slotIndex=0,s.slotIndex=r,s}return Object(r.a)(i,[{key:"getFrameEntries",value:function(){return 8}},{key:"setFrame",value:function(t,e,i,a,n,r,s,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=a,this.frames[t+3]=n,this.frames[t+4]=r,this.frames[t+5]=s,this.frames[t+6]=o,this.frames[t+7]=h}},{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color,c=o.darkColor;if(i<h[0]){var u=o.data.color,d=o.data.darkColor;switch(r){case w.setup:return l.setFromColor(u),c.r=d.r,c.g=d.g,void(c.b=d.b);case w.first:l.add((u.r-l.r)*n,(u.g-l.g)*n,(u.b-l.b)*n,(u.a-l.a)*n),c.r+=(d.r-c.r)*n,c.g+=(d.g-c.g)*n,c.b+=(d.b-c.b)*n}}else{var f=0,v=0,m=0,g=0,p=0,b=0,y=0,x=W.search(h,i,8),k=this.curves[x>>3];switch(k){case 0:var A=h[x];f=h[x+1],v=h[x+2],m=h[x+3],g=h[x+4],p=h[x+5],b=h[x+6],y=h[x+7];var S=(i-A)/(h[x+8]-A);f+=(h[x+8+1]-f)*S,v+=(h[x+8+2]-v)*S,m+=(h[x+8+3]-m)*S,g+=(h[x+8+4]-g)*S,p+=(h[x+8+5]-p)*S,b+=(h[x+8+6]-b)*S,y+=(h[x+8+7]-y)*S;break;case 1:f=h[x+1],v=h[x+2],m=h[x+3],g=h[x+4],p=h[x+5],b=h[x+6],y=h[x+7];break;default:f=this.getBezierValue(i,x,1,k-2),v=this.getBezierValue(i,x,2,k+18-2),m=this.getBezierValue(i,x,3,k+36-2),g=this.getBezierValue(i,x,4,k+54-2),p=this.getBezierValue(i,x,5,k+72-2),b=this.getBezierValue(i,x,6,k+90-2),y=this.getBezierValue(i,x,7,k+108-2)}if(1==n)l.set(f,v,m,g),c.r=p,c.g=b,c.b=y;else{if(r==w.setup){l.setFromColor(o.data.color);var C=o.data.darkColor;c.r=C.r,c.g=C.g,c.b=C.b}l.add((f-l.r)*n,(v-l.g)*n,(m-l.b)*n,(g-l.a)*n),c.r+=(p-c.r)*n,c.g+=(b-c.g)*n,c.b+=(y-c.b)*n}}}}}]),i}(q),ht=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,[F+"|"+r,Y+"|"+r])).slotIndex=0,s.slotIndex=r,s}return Object(r.a)(i,[{key:"getFrameEntries",value:function(){return 7}},{key:"setFrame",value:function(t,e,i,a,n,r,s,o){t*=7,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=a,this.frames[t+3]=n,this.frames[t+4]=r,this.frames[t+5]=s,this.frames[t+6]=o}},{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color,c=o.darkColor;if(i<h[0]){var u=o.data.color,d=o.data.darkColor;switch(r){case w.setup:return l.r=u.r,l.g=u.g,l.b=u.b,c.r=d.r,c.g=d.g,void(c.b=d.b);case w.first:l.r+=(u.r-l.r)*n,l.g+=(u.g-l.g)*n,l.b+=(u.b-l.b)*n,c.r+=(d.r-c.r)*n,c.g+=(d.g-c.g)*n,c.b+=(d.b-c.b)*n}}else{var f=0,v=0,m=0,g=0,p=0,b=0,y=W.search(h,i,7),x=this.curves[y/7];switch(x){case 0:var k=h[y];f=h[y+1],v=h[y+2],m=h[y+3],g=h[y+4],p=h[y+5],b=h[y+6];var A=(i-k)/(h[y+7]-k);f+=(h[y+7+1]-f)*A,v+=(h[y+7+2]-v)*A,m+=(h[y+7+3]-m)*A,g+=(h[y+7+4]-g)*A,p+=(h[y+7+5]-p)*A,b+=(h[y+7+6]-b)*A;break;case 1:f=h[y+1],v=h[y+2],m=h[y+3],g=h[y+4],p=h[y+5],b=h[y+6];break;default:f=this.getBezierValue(i,y,1,x-2),v=this.getBezierValue(i,y,2,x+18-2),m=this.getBezierValue(i,y,3,x+36-2),g=this.getBezierValue(i,y,4,x+54-2),p=this.getBezierValue(i,y,5,x+72-2),b=this.getBezierValue(i,y,6,x+90-2)}if(1==n)l.r=f,l.g=v,l.b=m,c.r=g,c.g=p,c.b=b;else{if(r==w.setup){var S=o.data.color,C=o.data.darkColor;l.r=S.r,l.g=S.g,l.b=S.b,c.r=C.r,c.g=C.g,c.b=C.b}l.r+=(f-l.r)*n,l.g+=(v-l.g)*n,l.b+=(m-l.b)*n,c.r+=(g-c.r)*n,c.g+=(p-c.g)*n,c.b+=(b-c.b)*n}}}}}]),i}(q),lt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a){var r;return Object(n.a)(this,i),(r=e.call(this,t,[L+"|"+a])).slotIndex=0,r.slotIndex=a,r.attachmentNames=new Array(t),r}return Object(r.a)(i,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i}},{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.slots[this.slotIndex];o.bone.active&&(s!=x.mixOut?i<this.frames[0]?r!=w.setup&&r!=w.first||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[W.search1(this.frames,i)]):r==w.setup&&this.setAttachment(t,o,o.data.attachmentName))}},{key:"setAttachment",value:function(t,e,i){e.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}}]),i}(W),ct=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r,s){var o;return Object(n.a)(this,i),(o=e.call(this,t,a,[j+"|"+r+"|"+s.id])).slotIndex=0,o.slotIndex=r,o.attachment=s,o.vertices=new Array(t),o}return Object(r.a)(i,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,i){this.frames[t]=e,this.vertices[t]=i}},{key:"setBezier",value:function(t,e,i,a,n,r,s,o,h,l,c){var u=this.curves,d=this.getFrameCount()+18*t;0==i&&(u[e]=2+d);for(var f=.03*(a-2*r+o),v=.03*h-.06*s,m=.006*(3*(r-o)-a+l),g=.018*(s-h+.33333333),p=2*f+m,b=2*v+g,y=.3*(r-a)+f+.16666667*m,w=.3*s+v+.16666667*g,x=a+y,k=w,A=d+18;d<A;d+=2)u[d]=x,u[d+1]=k,y+=p,w+=b,p+=m,b+=g,x+=y,k+=w}},{key:"getCurvePercent",value:function(t,e){var i=this.curves,a=i[e];switch(a){case 0:var n=this.frames[e];return(t-n)/(this.frames[e+this.getFrameEntries()]-n);case 1:return 0}if(i[a-=2]>t){var r=this.frames[e];return i[a+1]*(t-r)/(i[a]-r)}var s=a+18;for(a+=2;a<s;a+=2)if(i[a]>=t){var o=i[a-2],h=i[a-1];return h+(t-o)/(i[a]-o)*(i[a+1]-h)}var l=i[s-2],c=i[s-1];return c+(1-c)*(t-l)/(this.frames[e+this.getFrameEntries()]-l)}},{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=o.getAttachment();if(h&&h instanceof p&&h.timelineAttachment==this.attachment){var l=o.deform;0==l.length&&(r=w.setup);var c=this.vertices,u=c[0].length,f=this.frames;if(i<f[0])switch(r){case w.setup:return void(l.length=0);case w.first:if(1==n)return void(l.length=0);l.length=u;var v=h;if(v.bones){n=1-n;for(g=0;g<u;g++)l[g]*=n}else for(var m=v.vertices,g=0;g<u;g++)l[g]+=(m[g]-l[g])*n}else if(l.length=u,i>=f[f.length-1]){var b=c[f.length-1];if(1==n)if(r==w.add){var y=h;if(y.bones)for(var x=0;x<u;x++)l[x]+=b[x];else for(var k=y.vertices,A=0;A<u;A++)l[A]+=b[A]-k[A]}else d.arrayCopy(b,0,l,0,u);else switch(r){case w.setup:var S=h;if(S.bones)for(var C=0;C<u;C++)l[C]=b[C]*n;else for(var E=S.vertices,I=0;I<u;I++){var O=E[I];l[I]=O+(b[I]-O)*n}break;case w.first:case w.replace:for(var M=0;M<u;M++)l[M]+=(b[M]-l[M])*n;break;case w.add:var T=h;if(T.bones)for(var F=0;F<u;F++)l[F]+=b[F]*n;else for(var R=T.vertices,Y=0;Y<u;Y++)l[Y]+=(b[Y]-R[Y])*n}}else{var L=W.search1(f,i),j=this.getCurvePercent(i,L),X=c[L],B=c[L+1];if(1==n)if(r==w.add){var P=h;if(P.bones)for(var V=0;V<u;V++){var D=X[V];l[V]+=D+(B[V]-D)*j}else for(var N=P.vertices,U=0;U<u;U++){var z=X[U];l[U]+=z+(B[U]-z)*j-N[U]}}else for(var q=0;q<u;q++){var G=X[q];l[q]=G+(B[q]-G)*j}else switch(r){case w.setup:var _=h;if(_.bones)for(var H=0;H<u;H++){var Z=X[H];l[H]=(Z+(B[H]-Z)*j)*n}else for(var J=_.vertices,K=0;K<u;K++){var Q=X[K],$=J[K];l[K]=$+(Q+(B[K]-Q)*j-$)*n}break;case w.first:case w.replace:for(var tt=0;tt<u;tt++){var et=X[tt];l[tt]+=(et+(B[tt]-et)*j-l[tt])*n}break;case w.add:var it=h;if(it.bones)for(var at=0;at<u;at++){var nt=X[at];l[at]+=(nt+(B[at]-nt)*j)*n}else for(var rt=it.vertices,st=0;st<u;st++){var ot=X[st];l[st]+=(ot+(B[st]-ot)*j-rt[st])*n}}}}}}}]),i}(q),ut=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a;return Object(n.a)(this,i),(a=e.call(this,t,i.propertyIds)).events=new Array(t),a}return Object(r.a)(i,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e){this.frames[t]=e.time,this.events[t]=e}},{key:"apply",value:function(t,e,i,a,n,r,s){if(a){var o=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,a,n,r,s),e=-1;else if(e>=o[h-1])return;if(!(i<o[0])){var l=0;if(e<o[0])l=0;else for(var c=o[l=W.search1(o,e)+1];l>0&&o[l-1]==c;)l--;for(;l<h&&i>=o[l];l++)a.push(this.events[l])}}}}]),i}(W);ut.propertyIds=[""+X];var dt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a;return Object(n.a)(this,i),(a=e.call(this,t,i.propertyIds)).drawOrders=new Array(t),a}return Object(r.a)(i,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i}},{key:"apply",value:function(t,e,i,a,n,r,s){if(s!=x.mixOut)if(i<this.frames[0])r!=w.setup&&r!=w.first||d.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var o=W.search1(this.frames,i),h=this.drawOrders[o];if(h)for(var l=t.drawOrder,c=t.slots,u=0,f=h.length;u<f;u++)l[u]=c[h[u]];else d.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}else r==w.setup&&d.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}]),i}(W);dt.propertyIds=[""+B];var ft=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,[P+"|"+r])).ikConstraintIndex=0,s.ikConstraintIndex=r,s}return Object(r.a)(i,[{key:"getFrameEntries",value:function(){return 6}},{key:"setFrame",value:function(t,e,i,a,n,r,s){t*=6,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=a,this.frames[t+3]=n,this.frames[t+4]=r?1:0,this.frames[t+5]=s?1:0}},{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.ikConstraints[this.ikConstraintIndex];if(o.active){var h=this.frames;if(i<h[0])switch(r){case w.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case w.first:o.mix+=(o.data.mix-o.mix)*n,o.softness+=(o.data.softness-o.softness)*n,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}else{var l=0,c=0,u=W.search(h,i,6),d=this.curves[u/6];switch(d){case 0:var f=h[u];l=h[u+1],c=h[u+2];var v=(i-f)/(h[u+6]-f);l+=(h[u+6+1]-l)*v,c+=(h[u+6+2]-c)*v;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}r==w.setup?(o.mix=o.data.mix+(l-o.data.mix)*n,o.softness=o.data.softness+(c-o.data.softness)*n,s==x.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5])):(o.mix+=(l-o.mix)*n,o.softness+=(c-o.softness)*n,s==x.mixIn&&(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5]))}}}}]),i}(q),vt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,[V+"|"+r])).transformConstraintIndex=0,s.transformConstraintIndex=r,s}return Object(r.a)(i,[{key:"getFrameEntries",value:function(){return 7}},{key:"setFrame",value:function(t,e,i,a,n,r,s,o){var h=this.frames;h[t*=7]=e,h[t+1]=i,h[t+2]=a,h[t+3]=n,h[t+4]=r,h[t+5]=s,h[t+6]=o}},{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.transformConstraints[this.transformConstraintIndex];if(o.active){var h=this.frames;if(i<h[0]){var l=o.data;switch(r){case w.setup:return o.mixRotate=l.mixRotate,o.mixX=l.mixX,o.mixY=l.mixY,o.mixScaleX=l.mixScaleX,o.mixScaleY=l.mixScaleY,void(o.mixShearY=l.mixShearY);case w.first:o.mixRotate+=(l.mixRotate-o.mixRotate)*n,o.mixX+=(l.mixX-o.mixX)*n,o.mixY+=(l.mixY-o.mixY)*n,o.mixScaleX+=(l.mixScaleX-o.mixScaleX)*n,o.mixScaleY+=(l.mixScaleY-o.mixScaleY)*n,o.mixShearY+=(l.mixShearY-o.mixShearY)*n}}else{var c,u,d,f,v,m,g=W.search(h,i,7),p=this.curves[g/7];switch(p){case 0:var b=h[g];c=h[g+1],u=h[g+2],d=h[g+3],f=h[g+4],v=h[g+5],m=h[g+6];var y=(i-b)/(h[g+7]-b);c+=(h[g+7+1]-c)*y,u+=(h[g+7+2]-u)*y,d+=(h[g+7+3]-d)*y,f+=(h[g+7+4]-f)*y,v+=(h[g+7+5]-v)*y,m+=(h[g+7+6]-m)*y;break;case 1:c=h[g+1],u=h[g+2],d=h[g+3],f=h[g+4],v=h[g+5],m=h[g+6];break;default:c=this.getBezierValue(i,g,1,p-2),u=this.getBezierValue(i,g,2,p+18-2),d=this.getBezierValue(i,g,3,p+36-2),f=this.getBezierValue(i,g,4,p+54-2),v=this.getBezierValue(i,g,5,p+72-2),m=this.getBezierValue(i,g,6,p+90-2)}if(r==w.setup){var x=o.data;o.mixRotate=x.mixRotate+(c-x.mixRotate)*n,o.mixX=x.mixX+(u-x.mixX)*n,o.mixY=x.mixY+(d-x.mixY)*n,o.mixScaleX=x.mixScaleX+(f-x.mixScaleX)*n,o.mixScaleY=x.mixScaleY+(v-x.mixScaleY)*n,o.mixShearY=x.mixShearY+(m-x.mixShearY)*n}else o.mixRotate+=(c-o.mixRotate)*n,o.mixX+=(u-o.mixX)*n,o.mixY+=(d-o.mixY)*n,o.mixScaleX+=(f-o.mixScaleX)*n,o.mixScaleY+=(v-o.mixScaleY)*n,o.mixShearY+=(m-o.mixShearY)*n}}}}]),i}(q),mt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,D+"|"+r)).pathConstraintIndex=0,s.pathConstraintIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active)if(i<this.frames[0])switch(r){case w.setup:return void(o.position=o.data.position);case w.first:o.position+=(o.data.position-o.position)*n}else{var h=this.getCurveValue(i);r==w.setup?o.position=o.data.position+(h-o.data.position)*n:o.position+=(h-o.position)*n}}}]),i}(G),gt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,N+"|"+r)).pathConstraintIndex=0,s.pathConstraintIndex=r,s}return Object(r.a)(i,[{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active)if(i<this.frames[0])switch(r){case w.setup:return void(o.spacing=o.data.spacing);case w.first:o.spacing+=(o.data.spacing-o.spacing)*n}else{var h=this.getCurveValue(i);r==w.setup?o.spacing=o.data.spacing+(h-o.data.spacing)*n:o.spacing+=(h-o.spacing)*n}}}]),i}(G),pt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,a,[U+"|"+r])).pathConstraintIndex=0,s.pathConstraintIndex=r,s}return Object(r.a)(i,[{key:"getFrameEntries",value:function(){return 4}},{key:"setFrame",value:function(t,e,i,a,n){var r=this.frames;r[t<<=2]=e,r[t+1]=i,r[t+2]=a,r[t+3]=n}},{key:"apply",value:function(t,e,i,a,n,r,s){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active){var h=this.frames;if(i<h[0])switch(r){case w.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case w.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*n,o.mixX+=(o.data.mixX-o.mixX)*n,o.mixY+=(o.data.mixY-o.mixY)*n}else{var l,c,u,d=W.search(h,i,4),f=this.curves[d>>2];switch(f){case 0:var v=h[d];l=h[d+1],c=h[d+2],u=h[d+3];var m=(i-v)/(h[d+4]-v);l+=(h[d+4+1]-l)*m,c+=(h[d+4+2]-c)*m,u+=(h[d+4+3]-u)*m;break;case 1:l=h[d+1],c=h[d+2],u=h[d+3];break;default:l=this.getBezierValue(i,d,1,f-2),c=this.getBezierValue(i,d,2,f+18-2),u=this.getBezierValue(i,d,3,f+36-2)}if(r==w.setup){var g=o.data;o.mixRotate=g.mixRotate+(l-g.mixRotate)*n,o.mixX=g.mixX+(c-g.mixX)*n,o.mixY=g.mixY+(u-g.mixY)*n}else o.mixRotate+=(l-o.mixRotate)*n,o.mixX+=(c-o.mixX)*n,o.mixY+=(u-o.mixY)*n}}}}]),i}(q),bt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a,r){var s;return Object(n.a)(this,i),(s=e.call(this,t,[z+"|"+a+"|"+r.sequence.id])).slotIndex=a,s.attachment=r,s}return Object(r.a)(i,[{key:"getFrameEntries",value:function(){return i.ENTRIES}},{key:"getSlotIndex",value:function(){return this.slotIndex}},{key:"getAttachment",value:function(){return this.attachment}},{key:"setFrame",value:function(t,e,a,n,r){var s=this.frames;s[t*=i.ENTRIES]=e,s[t+i.MODE]=a|n<<4,s[t+i.DELAY]=r}},{key:"apply",value:function(t,e,a,n,r,s,o){var h=t.slots[this.slotIndex];if(h.bone.active){var l=h.attachment,c=this.attachment;if(l==c||l instanceof p&&l.timelineAttachment==c){var u=this.frames;if(a<u[0])s!=w.setup&&s!=w.first||(h.sequenceIndex=-1);else{var d=W.search(u,a,i.ENTRIES),f=u[d],v=u[d+i.MODE],m=u[d+i.DELAY];if(this.attachment.sequence){var g=v>>4,y=this.attachment.sequence.regions.length,x=k[15&v];if(x!=b.hold)switch(g+=(a-f)/m+1e-5|0,x){case b.once:g=Math.min(y-1,g);break;case b.loop:g%=y;break;case b.pingpong:var A=(y<<1)-2;(g=0==A?0:g%A)>=y&&(g=A-g);break;case b.onceReverse:g=Math.max(y-1-g,0);break;case b.loopReverse:g=y-1-g%y;break;case b.pingpongReverse:var S=(y<<1)-2;(g=0==S?0:(g+y-1)%S)>=y&&(g=S-g)}h.sequenceIndex=g}}}}}}]),i}(W);bt.ENTRIES=3,bt.MODE=1,bt.DELAY=2;var yt=function(){function t(e){Object(n.a)(this,t),this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new kt(this),this.propertyIDs=new l,this.animationsChanged=!1,this.trackEntryPool=new f((function(){return new xt})),this.data=e}return Object(r.a)(t,[{key:"update",value:function(t){t*=this.timeScale;for(var e=this.tracks,i=0,a=e.length;i<a;i++){var n=e[i];if(n){n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var r=t*n.timeScale;if(n.delay>0){if(n.delay-=r,n.delay>0)continue;r=-n.delay,n.delay=0}var s=n.next;if(s){var o=n.trackLast-s.delay;if(o>=0){for(s.delay=0,s.trackTime+=0==n.timeScale?0:(o/n.timeScale+t)*s.timeScale,n.trackTime+=r,this.setCurrent(i,s,!0);s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&!n.mixingFrom){e[i]=null,this.queue.end(n),this.clearNext(n);continue}if(n.mixingFrom&&this.updateMixingFrom(n,t)){var h=n.mixingFrom;for(n.mixingFrom=null,h&&(h.mixingTo=null);h;)this.queue.end(h),h=h.mixingFrom}n.trackTime+=r}}this.queue.drain()}},{key:"updateMixingFrom",value:function(t,e){var i=t.mixingFrom;if(!i)return!0;var a=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),a):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)}},{key:"apply",value:function(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,i=this.tracks,a=!1,n=0,r=i.length;n<r;n++){var s=i[n];if(s&&!(s.delay>0)){a=!0;var o=0==n?w.first:s.mixBlend,h=s.alpha;s.mixingFrom?h*=this.applyMixingFrom(s,t,o):s.trackTime>=s.trackEnd&&!s.next&&(h=0);var l=s.animationLast,c=s.getAnimationTime(),u=c,f=e;s.reverse&&(u=s.animation.duration-u,f=null);var v=s.animation.timelines,m=v.length;if(0==n&&1==h||o==w.add)for(var g=0;g<m;g++){d.webkit602BugfixHelper(h,o);var p=v[g];p instanceof lt?this.applyAttachmentTimeline(p,t,u,o,!0):p.apply(t,l,u,f,h,o,x.mixIn)}else{var b=s.timelineMode,y=s.shortestRotation,k=!y&&s.timelinesRotation.length!=m<<1;k&&(s.timelinesRotation.length=m<<1);for(var A=0;A<m;A++){var S=v[A],C=b[A]==Ct?o:w.setup;!y&&S instanceof H?this.applyRotateTimeline(S,t,u,h,C,s.timelinesRotation,A<<1,k):S instanceof lt?this.applyAttachmentTimeline(S,t,u,o,!0):(d.webkit602BugfixHelper(h,o),S.apply(t,l,u,f,h,C,x.mixIn))}}this.queueEvents(s,c),e.length=0,s.nextAnimationLast=c,s.nextTrackLast=s.trackTime}}for(var E=this.unkeyedState+Tt,I=t.slots,O=0,M=t.slots.length;O<M;O++){var T=I[O];if(T.attachmentState==E){var F=T.data.attachmentName;T.setAttachment(F?t.getAttachment(T.data.index,F):null)}}return this.unkeyedState+=2,this.queue.drain(),a}},{key:"applyMixingFrom",value:function(t,e,i){var a=t.mixingFrom;a.mixingFrom&&this.applyMixingFrom(a,e,i);var n=0;0==t.mixDuration?(n=1,i==w.first&&(i=w.setup)):((n=t.mixTime/t.mixDuration)>1&&(n=1),i!=w.first&&(i=a.mixBlend));var r=n<a.attachmentThreshold,s=n<a.drawOrderThreshold,o=a.animation.timelines,h=o.length,l=a.alpha*t.interruptAlpha,c=l*(1-n),u=a.animationLast,f=a.getAnimationTime(),v=f,m=null;if(a.reverse?v=a.animation.duration-v:n<a.eventThreshold&&(m=this.events),i==w.add)for(var g=0;g<h;g++)o[g].apply(e,u,v,m,c,i,x.mixOut);else{var p=a.timelineMode,b=a.timelineHoldMix,y=a.shortestRotation,k=!y&&a.timelinesRotation.length!=h<<1;k&&(a.timelinesRotation.length=h<<1),a.totalAlpha=0;for(var A=0;A<h;A++){var S=o[A],C=x.mixOut,E=void 0,I=0;switch(p[A]){case Ct:if(!s&&S instanceof dt)continue;E=i,I=c;break;case Et:E=w.setup,I=c;break;case It:E=i,I=l;break;case Ot:E=w.setup,I=l;break;default:E=w.setup;var O=b[A];I=l*Math.max(0,1-O.mixTime/O.mixDuration)}a.totalAlpha+=I,!y&&S instanceof H?this.applyRotateTimeline(S,e,v,I,E,a.timelinesRotation,A<<1,k):S instanceof lt?this.applyAttachmentTimeline(S,e,v,E,r):(d.webkit602BugfixHelper(I,i),s&&S instanceof dt&&E==w.setup&&(C=x.mixIn),S.apply(e,u,v,m,I,E,C))}}return t.mixDuration>0&&this.queueEvents(a,f),this.events.length=0,a.nextAnimationLast=f,a.nextTrackLast=a.trackTime,n}},{key:"applyAttachmentTimeline",value:function(t,e,i,a,n){var r=e.slots[t.slotIndex];r.bone.active&&(i<t.frames[0]?a!=w.setup&&a!=w.first||this.setAttachment(e,r,r.data.attachmentName,n):this.setAttachment(e,r,t.attachmentNames[W.search1(t.frames,i)],n),r.attachmentState<=this.unkeyedState&&(r.attachmentState=this.unkeyedState+Tt))}},{key:"setAttachment",value:function(t,e,i,a){e.setAttachment(i?t.getAttachment(e.data.index,i):null),a&&(e.attachmentState=this.unkeyedState+Ft)}},{key:"applyRotateTimeline",value:function(t,e,i,a,n,r,s,o){if(o&&(r[s]=0),1!=a){var h=e.bones[t.boneIndex];if(h.active){var l=0,c=0;if(i<t.frames[0])switch(n){case w.setup:h.rotation=h.data.rotation;default:return;case w.first:l=h.rotation,c=h.data.rotation}else l=n==w.setup?h.data.rotation:h.rotation,c=h.data.rotation+t.getCurveValue(i);var d=0,f=c-l;if(0==(f-=360*(16384-(16384.499999999996-f/360|0))))d=r[s];else{var v=0,m=0;o?(v=0,m=f):(v=r[s],m=r[s+1]);var g=f>0,p=v>=0;u.signum(m)!=u.signum(f)&&Math.abs(m)<=90&&(Math.abs(v)>180&&(v+=360*u.signum(v)),p=g),d=f+v-v%360,p!=g&&(d+=360*u.signum(v)),r[s]=d}r[s+1]=f,h.rotation=l+d*a}}else t.apply(e,0,i,null,1,n,x.mixIn)}},{key:"queueEvents",value:function(t,e){for(var i=t.animationStart,a=t.animationEnd,n=a-i,r=t.trackLast%n,s=this.events,o=0,h=s.length;o<h;o++){var l=s[o];if(l.time<r)break;l.time>a||this.queue.event(t,l)}for((t.loop?0==n||r>t.trackTime%n:e>=a&&t.animationLast<a)&&this.queue.complete(t);o<h;o++){var c=s[o];c.time<i||this.queue.event(t,c)}}},{key:"clearTracks",value:function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}},{key:"clearTrack",value:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e){this.queue.end(e),this.clearNext(e);for(var i=e;;){var a=i.mixingFrom;if(!a)break;this.queue.end(a),i.mixingFrom=null,i.mixingTo=null,i=a}this.tracks[e.trackIndex]=null,this.queue.drain()}}}},{key:"setCurrent",value:function(t,e,i){var a=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,a&&(i&&this.queue.interrupt(a),e.mixingFrom=a,a.mixingTo=e,e.mixTime=0,a.mixingFrom&&a.mixDuration>0&&(e.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(e)}},{key:"setAnimation",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.data.skeletonData.findAnimation(e);if(!a)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,a,i)}},{key:"setAnimationWith",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("animation cannot be null.");var a=!0,n=this.expandToIndex(t);n&&(-1==n.nextTrackLast?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.clearNext(n),n=n.mixingFrom,a=!1):this.clearNext(n));var r=this.trackEntry(t,e,i,n);return this.setCurrent(t,r,a),this.queue.drain(),r}},{key:"addAnimation",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=this.data.skeletonData.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,i,a)}},{key:"addAnimationWith",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e)throw new Error("animation cannot be null.");var n=this.expandToIndex(t);if(n)for(;n.next;)n=n.next;var r=this.trackEntry(t,e,i,n);return n?(n.next=r,r.previous=n,a<=0&&(a+=n.getTrackComplete()-r.mixDuration)):(this.setCurrent(t,r,!0),this.queue.drain()),r.delay=a,r}},{key:"setEmptyAnimation",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.setAnimationWith(e,t.emptyAnimation(),!1);return a.mixDuration=i,a.trackEnd=i,a}},{key:"addEmptyAnimation",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.addAnimationWith(e,t.emptyAnimation(),!1,a);return a<=0&&(n.delay+=n.mixDuration-i),n.mixDuration=i,n.trackEnd=i,n}},{key:"setEmptyAnimations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,a=this.tracks.length;i<a;i++){var n=this.tracks[i];n&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}},{key:"expandToIndex",value:function(t){return t<this.tracks.length?this.tracks[t]:(d.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}},{key:"trackEntry",value:function(t,e,i,a){var n=this.trackEntryPool.obtain();return n.reset(),n.trackIndex=t,n.animation=e,n.loop=i,n.holdPrevious=!1,n.reverse=!1,n.shortestRotation=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.mixTime=0,n.mixDuration=a?this.data.getMix(a.animation,e):0,n.interruptAlpha=1,n.totalAlpha=0,n.mixBlend=w.replace,n}},{key:"clearNext",value:function(t){for(var e=t.next;e;)this.queue.dispose(e),e=e.next;t.next=null}},{key:"_animationsChanged",value:function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=this.tracks,e=0,i=t.length;e<i;e++){var a=t[e];if(a){for(;a.mixingFrom;)a=a.mixingFrom;do{a.mixingTo&&a.mixBlend==w.add||this.computeHold(a),a=a.mixingTo}while(a)}}}},{key:"computeHold",value:function(t){var e=t.mixingTo,i=t.animation.timelines,a=t.animation.timelines.length,n=t.timelineMode;n.length=a;var r=t.timelineHoldMix;r.length=0;var s=this.propertyIDs;if(e&&e.holdPrevious)for(var o=0;o<a;o++)n[o]=s.addAll(i[o].getPropertyIds())?Ot:It;else t:for(var h=0;h<a;h++){var l=i[h],c=l.getPropertyIds();if(s.addAll(c))if(!e||l instanceof lt||l instanceof dt||l instanceof ut||!e.animation.hasTimeline(c))n[h]=Et;else{for(var u=e.mixingTo;u;u=u.mixingTo)if(!u.animation.hasTimeline(c)){if(t.mixDuration>0){n[h]=Mt,r[h]=u;continue t}break}n[h]=Ot}else n[h]=Ct}}},{key:"getCurrent",value:function(t){return t>=this.tracks.length?null:this.tracks[t]}},{key:"addListener",value:function(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}},{key:"removeListener",value:function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}},{key:"clearListeners",value:function(){this.listeners.length=0}},{key:"clearListenerNotifications",value:function(){this.queue.clear()}}],[{key:"emptyAnimation",value:function(){return t._emptyAnimation}}]),t}();yt._emptyAnimation=new A("<empty>",[],0);var wt,xt=function(){function t(){Object(n.a)(this,t),this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=w.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return Object(r.a)(t,[{key:"reset",value:function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}},{key:"getAnimationTime",value:function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}},{key:"setAnimationLast",value:function(t){this.animationLast=t,this.nextAnimationLast=t}},{key:"isComplete",value:function(){return this.trackTime>=this.animationEnd-this.animationStart}},{key:"resetRotationDirections",value:function(){this.timelinesRotation.length=0}},{key:"getTrackComplete",value:function(){var t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}}]),t}(),kt=function(){function t(e){Object(n.a)(this,t),this.objects=[],this.drainDisabled=!1,this.animState=e}return Object(r.a)(t,[{key:"start",value:function(t){this.objects.push(wt.start),this.objects.push(t),this.animState.animationsChanged=!0}},{key:"interrupt",value:function(t){this.objects.push(wt.interrupt),this.objects.push(t)}},{key:"end",value:function(t){this.objects.push(wt.end),this.objects.push(t),this.animState.animationsChanged=!0}},{key:"dispose",value:function(t){this.objects.push(wt.dispose),this.objects.push(t)}},{key:"complete",value:function(t){this.objects.push(wt.complete),this.objects.push(t)}},{key:"event",value:function(t,e){this.objects.push(wt.event),this.objects.push(t),this.objects.push(e)}},{key:"drain",value:function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,i=0;i<t.length;i+=2){var a=t[i],n=t[i+1];switch(a){case wt.start:n.listener&&n.listener.start&&n.listener.start(n);for(var r=0;r<e.length;r++){var s=e[r];s.start&&s.start(n)}break;case wt.interrupt:n.listener&&n.listener.interrupt&&n.listener.interrupt(n);for(var o=0;o<e.length;o++){var h=e[o];h.interrupt&&h.interrupt(n)}break;case wt.end:n.listener&&n.listener.end&&n.listener.end(n);for(var l=0;l<e.length;l++){var c=e[l];c.end&&c.end(n)}case wt.dispose:n.listener&&n.listener.dispose&&n.listener.dispose(n);for(var u=0;u<e.length;u++){var d=e[u];d.dispose&&d.dispose(n)}this.animState.trackEntryPool.free(n);break;case wt.complete:n.listener&&n.listener.complete&&n.listener.complete(n);for(var f=0;f<e.length;f++){var v=e[f];v.complete&&v.complete(n)}break;case wt.event:var m=t[2+i++];n.listener&&n.listener.event&&n.listener.event(n,m);for(var g=0;g<e.length;g++){var p=e[g];p.event&&p.event(n,m)}}}this.clear(),this.drainDisabled=!1}}},{key:"clear",value:function(){this.objects.length=0}}]),t}();!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(wt||(wt={}));var At,St,Ct=0,Et=1,It=2,Ot=3,Mt=4,Tt=1,Ft=2,Rt=function(){function t(e){if(Object(n.a)(this,t),this.animationToMixTime={},this.defaultMix=0,!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return Object(r.a)(t,[{key:"setMix",value:function(t,e,i){var a=this.skeletonData.findAnimation(t);if(!a)throw new Error("Animation not found: "+t);var n=this.skeletonData.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);this.setMixWith(a,n,i)}},{key:"setMixWith",value:function(t,e,i){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");var a=t.name+"."+e.name;this.animationToMixTime[a]=i}},{key:"getMix",value:function(t,e){var i=t.name+"."+e.name,a=this.animationToMixTime[i];return void 0===a?this.defaultMix:a}}]),t}(),Yt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a;return Object(n.a)(this,i),(a=e.call(this,t)).color=new c(1,1,1,1),a}return Object(r.a)(i,[{key:"copy",value:function(){var t=new i(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}]),i}(p),Lt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a;return Object(n.a)(this,i),(a=e.call(this,t)).endSlot=null,a.color=new c(.2275,.2275,.8078,1),a}return Object(r.a)(i,[{key:"copy",value:function(){var t=new i(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}]),i}(p),jt=i(75),Xt=i(66),Bt=function(){function t(e){Object(n.a)(this,t),this._image=e}return Object(r.a)(t,[{key:"getImage",value:function(){return this._image}}]),t}();!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(At||(At={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(St||(St={}));var Pt=function t(){Object(n.a)(this,t),this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0},Vt=function(){function t(e){Object(n.a)(this,t),this.pages=new Array,this.regions=new Array;for(var i=new Dt(e),a=new Array(4),r={size:function(t){t.width=parseInt(a[1]),t.height=parseInt(a[2])},format:function(){},filter:function(t){t.minFilter=d.enumValue(At,a[1]),t.magFilter=d.enumValue(At,a[2])},repeat:function(t){-1!=a[1].indexOf("x")&&(t.uWrap=St.Repeat),-1!=a[1].indexOf("y")&&(t.vWrap=St.Repeat)},pma:function(t){t.pma="true"==a[1]}},s={xy:function(t){t.x=parseInt(a[1]),t.y=parseInt(a[2])},size:function(t){t.width=parseInt(a[1]),t.height=parseInt(a[2])},bounds:function(t){t.x=parseInt(a[1]),t.y=parseInt(a[2]),t.width=parseInt(a[3]),t.height=parseInt(a[4])},offset:function(t){t.offsetX=parseInt(a[1]),t.offsetY=parseInt(a[2])},orig:function(t){t.originalWidth=parseInt(a[1]),t.originalHeight=parseInt(a[2])},offsets:function(t){t.offsetX=parseInt(a[1]),t.offsetY=parseInt(a[2]),t.originalWidth=parseInt(a[3]),t.originalHeight=parseInt(a[4])},rotate:function(t){var e=a[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:function(t){t.index=parseInt(a[1])}},o=i.readLine();o&&0==o.trim().length;)o=i.readLine();for(;o&&0!=o.trim().length&&0!=i.readEntry(a,o);)o=i.readLine();for(var h=null,l=null,c=null;null!==o;)if(0==o.trim().length)h=null,o=i.readLine();else if(h){for(var u=new Ut(h,o);;){var f=i.readEntry(a,o=i.readLine());if(0==f)break;var v=s[a[0]];if(v)v(u);else{l||(l=[]),c||(c=[]),l.push(a[0]);for(var m=[],g=0;g<f;g++)m.push(parseInt(a[g+1]));c.push(m)}}0==u.originalWidth&&0==u.originalHeight&&(u.originalWidth=u.width,u.originalHeight=u.height),l&&l.length>0&&c&&c.length>0&&(u.names=l,u.values=c,l=null,c=null),u.u=u.x/h.width,u.v=u.y/h.height,90==u.degrees?(u.u2=(u.x+u.height)/h.width,u.v2=(u.y+u.width)/h.height):(u.u2=(u.x+u.width)/h.width,u.v2=(u.y+u.height)/h.height),this.regions.push(u)}else{for(h=new Nt(o.trim());0!=i.readEntry(a,o=i.readLine());){var p=r[a[0]];p&&p(h)}this.pages.push(h)}}return Object(r.a)(t,[{key:"findRegion",value:function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}},{key:"setTextures",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(a.a)(this.pages);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.setTexture(t.get(i+r.name))}}catch(s){n.e(s)}finally{n.f()}}},{key:"dispose",value:function(){for(var t,e=0;e<this.pages.length;e++)null===(t=this.pages[e].texture)||void 0===t||t.dispose()}}]),t}(),Dt=function(){function t(e){Object(n.a)(this,t),this.index=0,this.lines=e.split(/\r\n|\r|\n/)}return Object(r.a)(t,[{key:"readLine",value:function(){return this.index>=this.lines.length?null:this.lines[this.index++]}},{key:"readEntry",value:function(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;var i=e.indexOf(":");if(-1==i)return 0;t[0]=e.substr(0,i).trim();for(var a=1,n=i+1;;a++){var r=e.indexOf(",",n);if(-1==r)return t[a]=e.substr(n).trim(),a;if(t[a]=e.substr(n,r-n).trim(),n=r+1,4==a)return 4}}}]),t}(),Nt=function(){function t(e){Object(n.a)(this,t),this.minFilter=At.Nearest,this.magFilter=At.Nearest,this.uWrap=St.ClampToEdge,this.vWrap=St.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.name=e}return Object(r.a)(t,[{key:"setTexture",value:function(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}}]),t}(),Ut=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a){var r;return Object(n.a)(this,i),(r=e.call(this)).x=0,r.y=0,r.offsetX=0,r.offsetY=0,r.originalWidth=0,r.originalHeight=0,r.index=0,r.degrees=0,r.names=null,r.values=null,r.page=t,r.name=a,r}return i}(Pt),zt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a){var r;return Object(n.a)(this,i),(r=e.call(this,t)).region=null,r.regionUVs=[],r.uvs=[],r.triangles=[],r.color=new c(1,1,1,1),r.width=0,r.height=0,r.hullLength=0,r.edges=[],r.parentMesh=null,r.sequence=null,r.tempColor=new c(0,0,0,0),r.path=a,r}return Object(r.a)(i,[{key:"updateRegion",value:function(){if(!this.region)throw new Error("Region not set.");var t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=d.newFloatArray(t.length));var e=this.uvs,i=this.uvs.length,a=this.region.u,n=this.region.v,r=0,s=0;if(this.region instanceof Ut){var o=this.region,h=o.page.texture.getImage(),l=h.width,c=h.height;switch(o.degrees){case 90:a-=(o.originalHeight-o.offsetY-o.height)/l,n-=(o.originalWidth-o.offsetX-o.width)/c,r=o.originalHeight/l,s=o.originalWidth/c;for(var u=0;u<i;u+=2)e[u]=a+t[u+1]*r,e[u+1]=n+(1-t[u])*s;return;case 180:a-=(o.originalWidth-o.offsetX-o.width)/l,n-=o.offsetY/c,r=o.originalWidth/l,s=o.originalHeight/c;for(var f=0;f<i;f+=2)e[f]=a+(1-t[f])*r,e[f+1]=n+(1-t[f+1])*s;return;case 270:a-=o.offsetY/l,n-=o.offsetX/c,r=o.originalHeight/l,s=o.originalWidth/c;for(var v=0;v<i;v+=2)e[v]=a+(1-t[v+1])*r,e[v+1]=n+t[v]*s;return}a-=o.offsetX/l,n-=(o.originalHeight-o.offsetY-o.height)/c,r=o.originalWidth/l,s=o.originalHeight/c}else this.region?(r=this.region.u2-a,s=this.region.v2-n):(a=n=0,r=s=1);for(var m=0;m<i;m+=2)e[m]=a+t[m]*r,e[m+1]=n+t[m+1]*s}},{key:"getParentMesh",value:function(){return this.parentMesh}},{key:"setParentMesh",value:function(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}},{key:"copy",value:function(){if(this.parentMesh)return this.newLinkedMesh();var t=new i(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),d.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),d.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),d.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),d.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}},{key:"computeWorldVertices",value:function(t,e,a,n,r,s){null!=this.sequence&&this.sequence.apply(t,this),Object(jt.a)(Object(Xt.a)(i.prototype),"computeWorldVertices",this).call(this,t,e,a,n,r,s)}},{key:"newLinkedMesh",value:function(){var t=new i(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}}]),i}(p),Wt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a;return Object(n.a)(this,i),(a=e.call(this,t)).lengths=[],a.closed=!1,a.constantSpeed=!1,a.color=new c(1,1,1,1),a}return Object(r.a)(i,[{key:"copy",value:function(){var t=new i(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),d.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}]),i}(p),qt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a;return Object(n.a)(this,i),(a=e.call(this,t)).x=0,a.y=0,a.rotation=0,a.color=new c(.38,.94,0,1),a}return Object(r.a)(i,[{key:"computeWorldPosition",value:function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}},{key:"computeWorldRotation",value:function(t){var e=u.cosDeg(this.rotation),i=u.sinDeg(this.rotation),a=e*t.a+i*t.b,n=e*t.c+i*t.d;return Math.atan2(n,a)*u.radDeg}},{key:"copy",value:function(){var t=new i(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}]),i}(p),Gt=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a){var r;return Object(n.a)(this,i),(r=e.call(this,t)).x=0,r.y=0,r.scaleX=1,r.scaleY=1,r.rotation=0,r.width=0,r.height=0,r.color=new c(1,1,1,1),r.rendererObject=null,r.region=null,r.sequence=null,r.offset=d.newFloatArray(8),r.uvs=d.newFloatArray(8),r.tempColor=new c(1,1,1,1),r.path=a,r}return Object(r.a)(i,[{key:"updateRegion",value:function(){if(!this.region)throw new Error("Region not set.");var t=this.region,e=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*e,n=-this.height/2*this.scaleY+this.region.offsetY*i,r=a+this.region.width*e,s=n+this.region.height*i,o=this.rotation*Math.PI/180,h=Math.cos(o),l=Math.sin(o),c=this.x,u=this.y,d=a*h+c,f=a*l,v=n*h+u,m=n*l,g=r*h+c,p=r*l,b=s*h+u,y=s*l,w=this.offset;w[0]=d-m,w[1]=v+f,w[2]=d-y,w[3]=b+f,w[4]=g-y,w[5]=b+p,w[6]=g-m,w[7]=v+p;var x=this.uvs;90==t.degrees?(x[2]=t.u,x[3]=t.v2,x[4]=t.u,x[5]=t.v,x[6]=t.u2,x[7]=t.v,x[0]=t.u2,x[1]=t.v2):(x[0]=t.u,x[1]=t.v2,x[2]=t.u,x[3]=t.v,x[4]=t.u2,x[5]=t.v,x[6]=t.u2,x[7]=t.v2)}},{key:"computeWorldVertices",value:function(t,e,i,a){null!=this.sequence&&this.sequence.apply(t,this);var n=t.bone,r=this.offset,s=n.worldX,o=n.worldY,h=n.a,l=n.b,c=n.c,u=n.d,d=0,f=0;d=r[0],f=r[1],e[i]=d*h+f*l+s,e[i+1]=d*c+f*u+o,i+=a,d=r[2],f=r[3],e[i]=d*h+f*l+s,e[i+1]=d*c+f*u+o,i+=a,d=r[4],f=r[5],e[i]=d*h+f*l+s,e[i+1]=d*c+f*u+o,i+=a,d=r[6],f=r[7],e[i]=d*h+f*l+s,e[i+1]=d*c+f*u+o}},{key:"copy",value:function(){var t=new i(this.name,this.path);return t.region=this.region,t.rendererObject=this.rendererObject,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,d.arrayCopy(this.uvs,0,t.uvs,0,8),d.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}}]),i}(g);Gt.X1=0,Gt.Y1=1,Gt.C1R=2,Gt.C1G=3,Gt.C1B=4,Gt.C1A=5,Gt.U1=6,Gt.V1=7,Gt.X2=8,Gt.Y2=9,Gt.C2R=10,Gt.C2G=11,Gt.C2B=12,Gt.C2A=13,Gt.U2=14,Gt.V2=15,Gt.X3=16,Gt.Y3=17,Gt.C3R=18,Gt.C3G=19,Gt.C3B=20,Gt.C3A=21,Gt.U3=22,Gt.V3=23,Gt.X4=24,Gt.Y4=25,Gt.C4R=26,Gt.C4G=27,Gt.C4B=28,Gt.C4A=29,Gt.U4=30,Gt.V4=31;var _t,Ht=function(){function t(e){Object(n.a)(this,t),this.atlas=e}return Object(r.a)(t,[{key:"loadSequence",value:function(t,e,i){for(var a=i.regions,n=0,r=a.length;n<r;n++){var s=i.getPath(e,n),o=this.atlas.findRegion(s);if(null==o)throw new Error("Region not found in atlas: "+s+" (sequence: "+t+")");a[n]=o,a[n].renderObject=a[n]}}},{key:"newRegionAttachment",value:function(t,e,i,a){var n=new Gt(e,i);if(null!=a)this.loadSequence(e,i,a);else{var r=this.atlas.findRegion(i);if(!r)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");r.renderObject=r,n.region=r}return n}},{key:"newMeshAttachment",value:function(t,e,i,a){var n=new zt(e,i);if(null!=a)this.loadSequence(e,i,a);else{var r=this.atlas.findRegion(i);if(!r)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");r.renderObject=r,n.region=r}return n}},{key:"newBoundingBoxAttachment",value:function(t,e){return new Yt(e)}},{key:"newPathAttachment",value:function(t,e){return new Wt(e)}},{key:"newPointAttachment",value:function(t,e){return new qt(e)}},{key:"newClippingAttachment",value:function(t,e){return new Lt(e)}}]),t}(),Zt=function t(e,i,a){if(Object(n.a)(this,t),this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=_t.Normal,this.skinRequired=!1,this.color=new c,e<0)throw new Error("index must be >= 0.");if(!i)throw new Error("name cannot be null.");this.index=e,this.name=i,this.parent=a};!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(_t||(_t={}));var Jt,Kt,Qt,$t=function(){function t(e,i,a){if(Object(n.a)(this,t),this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!e)throw new Error("data cannot be null.");if(!i)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=i,this.parent=a,this.setToSetupPose()}return Object(r.a)(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}},{key:"updateWorldTransform",value:function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}},{key:"updateWorldTransformWith",value:function(t,e,i,a,n,r,s){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=a,this.ascaleY=n,this.ashearX=r,this.ashearY=s;var o=this.parent;if(!o){var h=this.skeleton,l=i+90+s,c=h.scaleX,d=h.scaleY;return this.a=u.cosDeg(i+r)*a*c,this.b=u.cosDeg(l)*n*c,this.c=u.sinDeg(i+r)*a*d,this.d=u.sinDeg(l)*n*d,this.worldX=t*c+h.x,void(this.worldY=e*d+h.y)}var f=o.a,v=o.b,m=o.c,g=o.d;switch(this.worldX=f*t+v*e+o.worldX,this.worldY=m*t+g*e+o.worldY,this.data.transformMode){case _t.Normal:var p=i+90+s,b=u.cosDeg(i+r)*a,y=u.cosDeg(p)*n,w=u.sinDeg(i+r)*a,x=u.sinDeg(p)*n;return this.a=f*b+v*w,this.b=f*y+v*x,this.c=m*b+g*w,void(this.d=m*y+g*x);case _t.OnlyTranslation:var k=i+90+s;this.a=u.cosDeg(i+r)*a,this.b=u.cosDeg(k)*n,this.c=u.sinDeg(i+r)*a,this.d=u.sinDeg(k)*n;break;case _t.NoRotationOrReflection:var A=f*f+m*m,S=0;A>1e-4?(A=Math.abs(f*g-v*m)/A,f/=this.skeleton.scaleX,v=(m/=this.skeleton.scaleY)*A,g=f*A,S=Math.atan2(m,f)*u.radDeg):(f=0,m=0,S=90-Math.atan2(g,v)*u.radDeg);var C=i+r-S,E=i+s-S+90,I=u.cosDeg(C)*a,O=u.cosDeg(E)*n,M=u.sinDeg(C)*a,T=u.sinDeg(E)*n;this.a=f*I-v*M,this.b=f*O-v*T,this.c=m*I+g*M,this.d=m*O+g*T;break;case _t.NoScale:case _t.NoScaleOrReflection:var F=u.cosDeg(i),R=u.sinDeg(i),Y=(f*F+v*R)/this.skeleton.scaleX,L=(m*F+g*R)/this.skeleton.scaleY,j=Math.sqrt(Y*Y+L*L);j>1e-5&&(j=1/j),Y*=j,L*=j,j=Math.sqrt(Y*Y+L*L),this.data.transformMode==_t.NoScale&&f*g-v*m<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(j=-j);var X=Math.PI/2+Math.atan2(L,Y),B=Math.cos(X)*j,P=Math.sin(X)*j,V=u.cosDeg(r)*a,D=u.cosDeg(90+s)*n,N=u.sinDeg(r)*a,U=u.sinDeg(90+s)*n;this.a=Y*V+B*N,this.b=Y*D+B*U,this.c=L*V+P*N,this.d=L*D+P*U}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}},{key:"setToSetupPose",value:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}},{key:"getWorldRotationX",value:function(){return Math.atan2(this.c,this.a)*u.radDeg}},{key:"getWorldRotationY",value:function(){return Math.atan2(this.d,this.b)*u.radDeg}},{key:"getWorldScaleX",value:function(){return Math.sqrt(this.a*this.a+this.c*this.c)}},{key:"getWorldScaleY",value:function(){return Math.sqrt(this.b*this.b+this.d*this.d)}},{key:"updateAppliedTransform",value:function(){var t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*u.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*u.radDeg);var e=t.a,i=t.b,a=t.c,n=t.d,r=1/(e*n-i*a),s=this.worldX-t.worldX,o=this.worldY-t.worldY;this.ax=s*n*r-o*i*r,this.ay=o*e*r-s*a*r;var h=r*n,l=r*e,c=r*i,d=r*a,f=h*this.a-c*this.c,v=h*this.b-c*this.d,m=l*this.c-d*this.a,g=l*this.d-d*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+m*m),this.ascaleX>1e-4){var p=f*g-v*m;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(f*v+m*g,p)*u.radDeg,this.arotation=Math.atan2(m,f)*u.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(v*v+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,v)*u.radDeg}},{key:"worldToLocal",value:function(t){var e=1/(this.a*this.d-this.b*this.c),i=t.x-this.worldX,a=t.y-this.worldY;return t.x=i*this.d*e-a*this.b*e,t.y=a*this.a*e-i*this.c*e,t}},{key:"localToWorld",value:function(t){var e=t.x,i=t.y;return t.x=e*this.a+i*this.b+this.worldX,t.y=e*this.c+i*this.d+this.worldY,t}},{key:"worldToLocalRotation",value:function(t){var e=u.sinDeg(t),i=u.cosDeg(t);return Math.atan2(this.a*e-this.c*i,this.d*i-this.b*e)*u.radDeg+this.rotation-this.shearX}},{key:"localToWorldRotation",value:function(t){t-=this.rotation-this.shearX;var e=u.sinDeg(t),i=u.cosDeg(t);return Math.atan2(i*this.c+e*this.d,i*this.a+e*this.b)*u.radDeg}},{key:"rotateWorld",value:function(t){var e=this.a,i=this.b,a=this.c,n=this.d,r=u.cosDeg(t),s=u.sinDeg(t);this.a=r*e-s*a,this.b=r*i-s*n,this.c=s*e+r*a,this.d=s*i+r*n}}]),t}(),te=function t(e,i,a){Object(n.a)(this,t),this.name=e,this.order=i,this.skinRequired=a},ee=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ie;Object(n.a)(this,t),this.pathPrefix="",this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=e,this.pathPrefix=i,this.downloader=a}return Object(r.a)(t,[{key:"start",value:function(t){return this.toLoad++,this.pathPrefix+t}},{key:"success",value:function(t,e,i){this.toLoad--,this.loaded++,this.assets[e]=i,t&&t(e,i)}},{key:"error",value:function(t,e,i){this.toLoad--,this.loaded++,this.errors[e]=i,t&&t(e,i)}},{key:"loadAll",value:function(){var t=this;return new Promise((function(e,i){requestAnimationFrame((function a(){t.isLoadingComplete()?t.hasErrors()?i(t.errors):e(t):requestAnimationFrame(a)}))}))}},{key:"setRawDataURI",value:function(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}},{key:"loadBinary",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadBinary(t,(function(a){e.success(i,t,a)}),(function(i,n){e.error(a,t,"Couldn't load binary ".concat(t,": status ").concat(i,", ").concat(n))}))}},{key:"loadText",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadText(t,(function(a){e.success(i,t,a)}),(function(i,n){e.error(a,t,"Couldn't load text ".concat(t,": status ").concat(i,", ").concat(n))}))}},{key:"loadJson",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadJson(t,(function(a){e.success(i,t,a)}),(function(i,n){e.error(a,t,"Couldn't load JSON ".concat(t,": status ").concat(i,", ").concat(n))}))}},{key:"loadTexture",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t);var n=!("undefined"===typeof window||"undefined"===typeof navigator||!window.document),r=!n;if(r)fetch(t,{mode:"cors"}).then((function(i){return i.ok?i.blob():(e.error(a,t,"Couldn't load image: ".concat(t)),null)})).then((function(t){return t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null})).then((function(a){a&&e.success(i,t,e.textureLoader(a))}));else{var s=new Image;s.crossOrigin="anonymous",s.onload=function(){e.success(i,t,e.textureLoader(s))},s.onerror=function(){e.error(a,t,"Couldn't load image: ".concat(t))},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),s.src=t}}},{key:"loadTextureAtlas",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3?arguments[3]:void 0,s=t.lastIndexOf("/"),o=s>=0?t.substring(0,s+1):"";t=this.start(t),this.downloader.downloadText(t,(function(s){try{!function(){var h,l=new Vt(s),c=l.pages.length,u=!1,d=Object(a.a)(l.pages);try{var f=function(){var a=h.value;e.loadTexture(r?r[a.name]:o+a.name,(function(n,r){u||(a.setTexture(r),0==--c&&e.success(i,t,l))}),(function(i,a){u||e.error(n,t,"Couldn't load texture atlas ".concat(t," page image: ").concat(i)),u=!0}))};for(d.s();!(h=d.n()).done;)f()}catch(v){d.e(v)}finally{d.f()}}()}catch(h){e.error(n,t,"Couldn't parse texture atlas ".concat(t,": ").concat(h.message))}}),(function(i,a){e.error(n,t,"Couldn't load texture atlas ".concat(t,": status ").concat(i,", ").concat(a))}))}},{key:"get",value:function(t){return this.assets[this.pathPrefix+t]}},{key:"require",value:function(t){t=this.pathPrefix+t;var e=this.assets[t];if(e)return e;var i=this.errors[t];throw Error("Asset not found: "+t+(i?"\n"+i:""))}},{key:"remove",value:function(t){t=this.pathPrefix+t;var e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}},{key:"removeAll",value:function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}},{key:"isLoadingComplete",value:function(){return 0==this.toLoad}},{key:"getToLoad",value:function(){return this.toLoad}},{key:"getLoaded",value:function(){return this.loaded}},{key:"dispose",value:function(){this.removeAll()}},{key:"hasErrors",value:function(){return Object.keys(this.errors).length>0}},{key:"getErrors",value:function(){return this.errors}}]),t}(),ie=function(){function t(){Object(n.a)(this,t),this.callbacks={},this.rawDataUris={}}return Object(r.a)(t,[{key:"dataUriToString",value:function(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");return-1!=e?(e+="base64,".length,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}},{key:"base64ToUint8Array",value:function(t){for(var e=window.atob(t),i=e.length,a=new Uint8Array(i),n=0;n<i;n++)a[n]=e.charCodeAt(n);return a}},{key:"dataUriToUint8Array",value:function(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+="base64,".length,this.base64ToUint8Array(t.substr(e))}},{key:"downloadText",value:function(t,e,i){var a=this;if(!this.start(t,e,i))if(this.rawDataUris[t])try{var n=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(n))}catch(o){this.finish(t,400,JSON.stringify(o))}else{var r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.open("GET",t,!0);var s=function(){a.finish(t,r.status,r.responseText)};r.onload=s,r.onerror=s,r.send()}}},{key:"downloadJson",value:function(t,e,i){this.downloadText(t,(function(t){e(JSON.parse(t))}),i)}},{key:"downloadBinary",value:function(t,e,i){var a=this;if(!this.start(t,e,i))if(this.rawDataUris[t])try{var n=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(n))}catch(o){this.finish(t,400,JSON.stringify(o))}else{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer";var s=function(){a.finish(t,r.status,r.response)};r.onload=function(){200==r.status||0==r.status?a.finish(t,200,new Uint8Array(r.response)):s()},r.onerror=s,r.send()}}},{key:"start",value:function(t,e,i){var a=this.callbacks[t];try{if(a)return!0;this.callbacks[t]=a=[]}finally{a.push(e,i)}}},{key:"finish",value:function(t,e,i){var a=this.callbacks[t];delete this.callbacks[t];for(var n=200==e||0==e?[i]:[e,i],r=n.length-1,s=a.length;r<s;r+=2)a[r].apply(null,n)}}]),t}(),ae=function t(e,i){if(Object(n.a)(this,t),this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!i)throw new Error("data cannot be null.");this.time=e,this.data=i},ne=function t(e){Object(n.a)(this,t),this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=e},re=function(){function t(e,i){if(Object(n.a)(this,t),this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!e)throw new Error("data cannot be null.");if(!i)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var a=0;a<e.bones.length;a++){var r=i.findBone(e.bones[a].name);if(!r)throw new Error("Couldn't find bone ".concat(e.bones[a].name));this.bones.push(r)}var s=i.findBone(e.target.name);if(!s)throw new Error("Couldn't find bone ".concat(e.target.name));this.target=s}return Object(r.a)(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){if(0!=this.mix){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}}},{key:"apply1",value:function(t,e,i,a,n,r,s){var o=t.parent;if(!o)throw new Error("IK bone must have parent.");var h=o.a,l=o.b,c=o.c,d=o.d,f=-t.ashearX-t.arotation,v=0,m=0;switch(t.data.transformMode){case _t.OnlyTranslation:v=e-t.worldX,m=i-t.worldY;break;case _t.NoRotationOrReflection:var g=Math.abs(h*d-l*c)/(h*h+c*c),p=h/t.skeleton.scaleX,b=c/t.skeleton.scaleY;l=-b*g*t.skeleton.scaleX,d=p*g*t.skeleton.scaleY,f+=Math.atan2(b,p)*u.radDeg;default:var y=e-o.worldX,w=i-o.worldY,x=h*d-l*c;v=(y*d-w*l)/x-t.ax,m=(w*h-y*c)/x-t.ay}f+=Math.atan2(m,v)*u.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);var k=t.ascaleX,A=t.ascaleY;if(a||n){switch(t.data.transformMode){case _t.NoScale:case _t.NoScaleOrReflection:v=e-t.worldX,m=i-t.worldY}var S=t.data.length*k,C=Math.sqrt(v*v+m*m);if(a&&C<S||n&&C>S&&S>1e-4){var E=(C/S-1)*s+1;k*=E,r&&(A*=E)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*s,k,A,t.ashearX,t.ashearY)}},{key:"apply2",value:function(t,e,i,a,n,r,s,o,h){var l=t.ax,c=t.ay,d=t.ascaleX,f=t.ascaleY,v=d,m=f,g=e.ascaleX,p=0,b=0,y=0;d<0?(d=-d,p=180,y=-1):(p=0,y=1),f<0&&(f=-f,y=-y),g<0?(g=-g,b=180):b=0;var w=e.ax,x=0,k=0,A=0,S=t.a,C=t.b,E=t.c,I=t.d,O=Math.abs(d-f)<=1e-4;!O||r?(x=0,k=S*w+t.worldX,A=E*w+t.worldY):(k=S*w+C*(x=e.ay)+t.worldX,A=E*w+I*x+t.worldY);var M=t.parent;if(!M)throw new Error("IK parent must itself have a parent.");S=M.a,C=M.b,E=M.c;var T,F,R=1/(S*(I=M.d)-C*E),Y=k-M.worldX,L=A-M.worldY,j=(Y*I-L*C)*R-l,X=(L*S-Y*E)*R-c,B=Math.sqrt(j*j+X*X),P=e.data.length*g;if(B<1e-4)return this.apply1(t,i,a,!1,r,!1,h),void e.updateWorldTransformWith(w,x,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var V=((Y=i-M.worldX)*I-(L=a-M.worldY)*C)*R-l,D=(L*S-Y*E)*R-c,N=V*V+D*D;if(0!=o){o*=d*(g+1)*.5;var U=Math.sqrt(N),z=U-B-P*d+o;if(z>0){var W=Math.min(1,z/(2*o))-1;N=(V-=(W=(z-o*(1-W*W))/U)*V)*V+(D-=W*D)*D}}t:if(O){var q=(N-B*B-(P*=d)*P)/(2*B*P);q<-1?(q=-1,F=Math.PI*n):q>1?(q=1,F=0,r&&(v*=S=(Math.sqrt(N)/(B+P)-1)*h+1,s&&(m*=S))):F=Math.acos(q)*n,S=B+P*q,C=P*Math.sin(F),T=Math.atan2(D*S-V*C,V*S+D*C)}else{var G=(S=d*P)*S,_=(C=f*P)*C,H=Math.atan2(D,V),Z=-2*_*B,J=_-G;if((I=Z*Z-4*J*(E=_*B*B+G*N-G*_))>=0){var K=Math.sqrt(I);Z<0&&(K=-K);var Q=(K=.5*-(Z+K))/J,$=E/K,tt=Math.abs(Q)<Math.abs($)?Q:$;if(tt*tt<=N){L=Math.sqrt(N-tt*tt)*n,T=H-Math.atan2(L,tt),F=Math.atan2(L/f,(tt-B)/d);break t}}var et=u.PI,it=B-S,at=it*it,nt=0,rt=0,st=B+S,ot=st*st,ht=0;(E=-S*B/(G-_))>=-1&&E<=1&&(E=Math.acos(E),(I=(Y=S*Math.cos(E)+B)*Y+(L=C*Math.sin(E))*L)<at&&(et=E,at=I,it=Y,nt=L),I>ot&&(rt=E,ot=I,st=Y,ht=L)),N<=.5*(at+ot)?(T=H-Math.atan2(nt*n,it),F=et*n):(T=H-Math.atan2(ht*n,st),F=rt*n)}var lt=Math.atan2(x,w)*y,ct=t.arotation;(T=(T-lt)*u.radDeg+p-ct)>180?T-=360:T<-180&&(T+=360),t.updateWorldTransformWith(l,c,ct+T*h,v,m,0,0),ct=e.arotation,(F=((F+lt)*u.radDeg-e.ashearX)*y+b-ct)>180?F-=360:F<-180&&(F+=360),e.updateWorldTransformWith(w,x,ct+F*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}]),t}(),se=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a;return Object(n.a)(this,i),(a=e.call(this,t,0,!1)).bones=new Array,a._target=null,a.bendDirection=1,a.compress=!1,a.stretch=!1,a.uniform=!1,a.mix=1,a.softness=0,a}return Object(r.a)(i,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(t){this._target=t}}]),i}(te),oe=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a;return Object(n.a)(this,i),(a=e.call(this,t,0,!1)).bones=new Array,a._target=null,a.positionMode=Jt.Fixed,a.spacingMode=Kt.Fixed,a.rotateMode=Qt.Chain,a.offsetRotation=0,a.position=0,a.spacing=0,a.mixRotate=0,a.mixX=0,a.mixY=0,a}return Object(r.a)(i,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("SlotData not set.")},set:function(t){this._target=t}}]),i}(te);!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(Jt||(Jt={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(Kt||(Kt={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(Qt||(Qt={}));var he=function(){function t(e,i){if(Object(n.a)(this,t),this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!e)throw new Error("data cannot be null.");if(!i)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var a=0,r=e.bones.length;a<r;a++){var s=i.findBone(e.bones[a].name);if(!s)throw new Error("Couldn't find bone ".concat(e.bones[a].name,"."));this.bones.push(s)}var o=i.findSlot(e.target.name);if(!o)throw new Error("Couldn't find target bone ".concat(e.target.name));this.target=o,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}return Object(r.a)(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){var e=this.target.getAttachment();if(e instanceof Wt){var i=this.mixRotate,a=this.mixX,n=this.mixY;if(0!=i||0!=a||0!=n){var r=this.data,s=r.rotateMode==Qt.Tangent,o=r.rotateMode==Qt.ChainScale,h=this.bones,l=h.length,c=s?l:l+1,f=d.setArraySize(this.spaces,c),v=o?this.lengths=d.setArraySize(this.lengths,l):[],m=this.spacing;switch(r.spacingMode){case Kt.Percent:if(o)for(var g=0,p=c-1;g<p;g++){var b=h[g],y=b.data.length;if(y<t.epsilon)v[g]=0;else{var w=y*b.a,x=y*b.c;v[g]=Math.sqrt(w*w+x*x)}}d.arrayFill(f,1,c,m);break;case Kt.Proportional:for(var k=0,A=0,S=c-1;A<S;){var C=h[A],E=C.data.length;if(E<t.epsilon)o&&(v[A]=0),f[++A]=m;else{var I=E*C.a,O=E*C.c,M=Math.sqrt(I*I+O*O);o&&(v[A]=M),f[++A]=M,k+=M}}if(k>0){k=c/k*m;for(var T=1;T<c;T++)f[T]*=k}break;default:for(var F=r.spacingMode==Kt.Length,R=0,Y=c-1;R<Y;){var L=h[R],j=L.data.length;if(j<t.epsilon)o&&(v[R]=0),f[++R]=m;else{var X=j*L.a,B=j*L.c,P=Math.sqrt(X*X+B*B);o&&(v[R]=P),f[++R]=(F?j+m:m)*P/j}}}var V=this.computeWorldPositions(e,c,s),D=V[0],N=V[1],U=r.offsetRotation,z=!1;if(0==U)z=r.rotateMode==Qt.Chain;else{z=!1;var W=this.target.bone;U*=W.a*W.d-W.b*W.c>0?u.degRad:-u.degRad}for(var q=0,G=3;q<l;q++,G+=3){var _=h[q];_.worldX+=(D-_.worldX)*a,_.worldY+=(N-_.worldY)*n;var H=V[G],Z=V[G+1],J=H-D,K=Z-N;if(o){var Q=v[q];if(0!=Q){var $=(Math.sqrt(J*J+K*K)/Q-1)*i+1;_.a*=$,_.c*=$}}if(D=H,N=Z,i>0){var tt=_.a,et=_.b,it=_.c,at=_.d,nt=0,rt=0,st=0;if(nt=s?V[G-1]:0==f[q+1]?V[G+2]:Math.atan2(K,J),nt-=Math.atan2(it,tt),z){rt=Math.cos(nt),st=Math.sin(nt);var ot=_.data.length;D+=(ot*(rt*tt-st*it)-J)*i,N+=(ot*(st*tt+rt*it)-K)*i}else nt+=U;nt>u.PI?nt-=u.PI2:nt<-u.PI&&(nt+=u.PI2),nt*=i,rt=Math.cos(nt),st=Math.sin(nt),_.a=rt*tt-st*it,_.b=rt*et-st*at,_.c=st*tt+rt*it,_.d=st*et+rt*at}_.updateAppliedTransform()}}}}},{key:"computeWorldPositions",value:function(e,i,a){var n=this.target,r=this.position,s=this.spaces,o=d.setArraySize(this.positions,3*i+2),h=this.world,l=e.closed,c=e.worldVerticesLength,u=c/6,f=t.NONE;if(!e.constantSpeed){var v,m=e.lengths,g=m[u-=l?1:2];switch(this.data.positionMode==Jt.Percent&&(r*=g),this.data.spacingMode){case Kt.Percent:v=g;break;case Kt.Proportional:v=g/i;break;default:v=1}h=d.setArraySize(this.world,8);for(var p=0,b=0,y=0;p<i;p++,b+=3){var w=s[p]*v,x=r+=w;if(l)(x%=g)<0&&(x+=g),y=0;else{if(x<0){f!=t.BEFORE&&(f=t.BEFORE,e.computeWorldVertices(n,2,4,h,0,2)),this.addBeforePosition(x,h,0,o,b);continue}if(x>g){f!=t.AFTER&&(f=t.AFTER,e.computeWorldVertices(n,c-6,4,h,0,2)),this.addAfterPosition(x-g,h,0,o,b);continue}}for(;;y++){var k=m[y];if(!(x>k)){if(0==y)x/=k;else{var A=m[y-1];x=(x-A)/(k-A)}break}}y!=f&&(f=y,l&&y==u?(e.computeWorldVertices(n,c-4,4,h,0,2),e.computeWorldVertices(n,0,4,h,4,2)):e.computeWorldVertices(n,6*y+2,8,h,0,2)),this.addCurvePosition(x,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],o,b,a||p>0&&0==w)}return o}l?(c+=2,h=d.setArraySize(this.world,c),e.computeWorldVertices(n,2,c-4,h,0,2),e.computeWorldVertices(n,0,2,h,c-4,2),h[c-2]=h[0],h[c-1]=h[1]):(u--,c-=4,h=d.setArraySize(this.world,c),e.computeWorldVertices(n,2,c,h,0,2));for(var S,C=d.setArraySize(this.curves,u),E=0,I=h[0],O=h[1],M=0,T=0,F=0,R=0,Y=0,L=0,j=0,X=0,B=0,P=0,V=0,D=0,N=0,U=0,z=0,W=2;z<u;z++,W+=6)M=h[W],T=h[W+1],F=h[W+2],R=h[W+3],V=2*(j=.1875*(I-2*M+F))+(B=.09375*(3*(M-F)-I+(Y=h[W+4]))),D=2*(X=.1875*(O-2*T+R))+(P=.09375*(3*(T-R)-O+(L=h[W+5]))),N=.75*(M-I)+j+.16666667*B,U=.75*(T-O)+X+.16666667*P,E+=Math.sqrt(N*N+U*U),N+=V,U+=D,V+=B,D+=P,E+=Math.sqrt(N*N+U*U),N+=V,U+=D,E+=Math.sqrt(N*N+U*U),N+=V+B,U+=D+P,E+=Math.sqrt(N*N+U*U),C[z]=E,I=Y,O=L;switch(this.data.positionMode==Jt.Percent&&(r*=E),this.data.spacingMode){case Kt.Percent:S=E;break;case Kt.Proportional:S=E/i;break;default:S=1}for(var q=this.segments,G=0,_=0,H=0,Z=0,J=0;_<i;_++,H+=3){var K=s[_]*S,Q=r+=K;if(l)(Q%=E)<0&&(Q+=E),Z=0;else{if(Q<0){this.addBeforePosition(Q,h,0,o,H);continue}if(Q>E){this.addAfterPosition(Q-E,h,c-4,o,H);continue}}for(;;Z++){var $=C[Z];if(!(Q>$)){if(0==Z)Q/=$;else{var tt=C[Z-1];Q=(Q-tt)/($-tt)}break}}if(Z!=f){f=Z;var et=6*Z;for(I=h[et],O=h[et+1],M=h[et+2],T=h[et+3],F=h[et+4],R=h[et+5],V=2*(j=.03*(I-2*M+F))+(B=.006*(3*(M-F)-I+(Y=h[et+6]))),D=2*(X=.03*(O-2*T+R))+(P=.006*(3*(T-R)-O+(L=h[et+7]))),N=.3*(M-I)+j+.16666667*B,U=.3*(T-O)+X+.16666667*P,G=Math.sqrt(N*N+U*U),q[0]=G,et=1;et<8;et++)N+=V,U+=D,V+=B,D+=P,G+=Math.sqrt(N*N+U*U),q[et]=G;N+=V,U+=D,G+=Math.sqrt(N*N+U*U),q[8]=G,N+=V+B,U+=D+P,G+=Math.sqrt(N*N+U*U),q[9]=G,J=0}for(Q*=G;;J++){var it=q[J];if(!(Q>it)){if(0==J)Q/=it;else{var at=q[J-1];Q=J+(Q-at)/(it-at)}break}}this.addCurvePosition(.1*Q,I,O,M,T,F,R,Y,L,o,H,a||_>0&&0==K)}return o}},{key:"addBeforePosition",value:function(t,e,i,a,n){var r=e[i],s=e[i+1],o=e[i+2]-r,h=e[i+3]-s,l=Math.atan2(h,o);a[n]=r+t*Math.cos(l),a[n+1]=s+t*Math.sin(l),a[n+2]=l}},{key:"addAfterPosition",value:function(t,e,i,a,n){var r=e[i+2],s=e[i+3],o=r-e[i],h=s-e[i+1],l=Math.atan2(h,o);a[n]=r+t*Math.cos(l),a[n+1]=s+t*Math.sin(l),a[n+2]=l}},{key:"addCurvePosition",value:function(t,e,i,a,n,r,s,o,h,l,c,u){if(0==t||isNaN(t))return l[c]=e,l[c+1]=i,void(l[c+2]=Math.atan2(n-i,a-e));var d=t*t,f=d*t,v=1-t,m=v*v,g=m*v,p=v*t,b=3*p,y=v*b,w=b*t,x=e*g+a*y+r*w+o*f,k=i*g+n*y+s*w+h*f;l[c]=x,l[c+1]=k,u&&(l[c+2]=t<.001?Math.atan2(n-i,a-e):Math.atan2(k-(i*m+n*p*2+s*d),x-(e*m+a*p*2+r*d)))}}]),t}();he.NONE=-1,he.BEFORE=-2,he.AFTER=-3,he.epsilon=1e-5;var le,ce=function(){function t(e,i){if(Object(n.a)(this,t),this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!e)throw new Error("data cannot be null.");if(!i)throw new Error("bone cannot be null.");this.data=e,this.bone=i,this.color=new c,this.darkColor=e.darkColor?new c:null,this.setToSetupPose()}return Object(r.a)(t,[{key:"getSkeleton",value:function(){return this.bone.skeleton}},{key:"getAttachment",value:function(){return this.attachment}},{key:"setAttachment",value:function(t){this.attachment!=t&&(t instanceof p&&this.attachment instanceof p&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}},{key:"setToSetupPose",value:function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}]),t}(),ue=function(){function t(e,i){if(Object(n.a)(this,t),this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new v,this.active=!1,!e)throw new Error("data cannot be null.");if(!i)throw new Error("skeleton cannot be null.");this.data=e,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY,this.bones=new Array;for(var a=0;a<e.bones.length;a++){var r=i.findBone(e.bones[a].name);if(!r)throw new Error("Couldn't find bone ".concat(e.bones[a].name,"."));this.bones.push(r)}var s=i.findBone(e.target.name);if(!s)throw new Error("Couldn't find target bone ".concat(e.target.name,"."));this.target=s}return Object(r.a)(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleX&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}},{key:"applyAbsoluteWorld",value:function(){for(var t=this.mixRotate,e=this.mixX,i=this.mixY,a=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,s=0!=e||0!=i,o=this.target,h=o.a,l=o.b,c=o.c,d=o.d,f=h*d-l*c>0?u.degRad:-u.degRad,v=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones,p=0,b=g.length;p<b;p++){var y=g[p];if(0!=t){var w=y.a,x=y.b,k=y.c,A=y.d,S=Math.atan2(c,h)-Math.atan2(k,w)+v;S>u.PI?S-=u.PI2:S<-u.PI&&(S+=u.PI2),S*=t;var C=Math.cos(S),E=Math.sin(S);y.a=C*w-E*k,y.b=C*x-E*A,y.c=E*w+C*k,y.d=E*x+C*A}if(s){var I=this.temp;o.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),y.worldX+=(I.x-y.worldX)*e,y.worldY+=(I.y-y.worldY)*i}if(0!=a){var O=Math.sqrt(y.a*y.a+y.c*y.c);0!=O&&(O=(O+(Math.sqrt(h*h+c*c)-O+this.data.offsetScaleX)*a)/O),y.a*=O,y.c*=O}if(0!=n){var M=Math.sqrt(y.b*y.b+y.d*y.d);0!=M&&(M=(M+(Math.sqrt(l*l+d*d)-M+this.data.offsetScaleY)*n)/M),y.b*=M,y.d*=M}if(r>0){var T=y.b,F=y.d,R=Math.atan2(F,T),Y=Math.atan2(d,l)-Math.atan2(c,h)-(R-Math.atan2(y.c,y.a));Y>u.PI?Y-=u.PI2:Y<-u.PI&&(Y+=u.PI2),Y=R+(Y+m)*r;var L=Math.sqrt(T*T+F*F);y.b=Math.cos(Y)*L,y.d=Math.sin(Y)*L}y.updateAppliedTransform()}}},{key:"applyRelativeWorld",value:function(){for(var t=this.mixRotate,e=this.mixX,i=this.mixY,a=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,s=0!=e||0!=i,o=this.target,h=o.a,l=o.b,c=o.c,d=o.d,f=h*d-l*c>0?u.degRad:-u.degRad,v=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones,p=0,b=g.length;p<b;p++){var y=g[p];if(0!=t){var w=y.a,x=y.b,k=y.c,A=y.d,S=Math.atan2(c,h)+v;S>u.PI?S-=u.PI2:S<-u.PI&&(S+=u.PI2),S*=t;var C=Math.cos(S),E=Math.sin(S);y.a=C*w-E*k,y.b=C*x-E*A,y.c=E*w+C*k,y.d=E*x+C*A}if(s){var I=this.temp;o.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),y.worldX+=I.x*e,y.worldY+=I.y*i}if(0!=a){var O=(Math.sqrt(h*h+c*c)-1+this.data.offsetScaleX)*a+1;y.a*=O,y.c*=O}if(0!=n){var M=(Math.sqrt(l*l+d*d)-1+this.data.offsetScaleY)*n+1;y.b*=M,y.d*=M}if(r>0){var T=Math.atan2(d,l)-Math.atan2(c,h);T>u.PI?T-=u.PI2:T<-u.PI&&(T+=u.PI2);var F=y.b,R=y.d;T=Math.atan2(R,F)+(T-u.PI/2+m)*r;var Y=Math.sqrt(F*F+R*R);y.b=Math.cos(T)*Y,y.d=Math.sin(T)*Y}y.updateAppliedTransform()}}},{key:"applyAbsoluteLocal",value:function(){for(var t=this.mixRotate,e=this.mixX,i=this.mixY,a=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var c=o[h],u=c.arotation;if(0!=t){var d=s.arotation-u+this.data.offsetRotation;u+=(d-=360*(16384-(16384.499999999996-d/360|0)))*t}var f=c.ax,v=c.ay;f+=(s.ax-f+this.data.offsetX)*e,v+=(s.ay-v+this.data.offsetY)*i;var m=c.ascaleX,g=c.ascaleY;0!=a&&0!=m&&(m=(m+(s.ascaleX-m+this.data.offsetScaleX)*a)/m),0!=n&&0!=g&&(g=(g+(s.ascaleY-g+this.data.offsetScaleY)*n)/g);var p=c.ashearY;if(0!=r){var b=s.ashearY-p+this.data.offsetShearY;p+=(b-=360*(16384-(16384.499999999996-b/360|0)))*r}c.updateWorldTransformWith(f,v,u,m,g,c.ashearX,p)}}},{key:"applyRelativeLocal",value:function(){for(var t=this.mixRotate,e=this.mixX,i=this.mixY,a=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var c=o[h],u=c.arotation+(s.arotation+this.data.offsetRotation)*t,d=c.ax+(s.ax+this.data.offsetX)*e,f=c.ay+(s.ay+this.data.offsetY)*i,v=c.ascaleX*((s.ascaleX-1+this.data.offsetScaleX)*a+1),m=c.ascaleY*((s.ascaleY-1+this.data.offsetScaleY)*n+1),g=c.ashearY+(s.ashearY+this.data.offsetShearY)*r;c.updateWorldTransformWith(d,f,u,v,m,c.ashearX,g)}}}]),t}(),de=function(){function t(e){if(Object(n.a)(this,t),this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var i=0;i<e.bones.length;i++){var a=e.bones[i],r=void 0;if(a.parent){var s=this.bones[a.parent.index];r=new $t(a,this,s),s.children.push(r)}else r=new $t(a,this,null);this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(var o=0;o<e.slots.length;o++){var h=e.slots[o],l=this.bones[h.boneData.index],u=new ce(h,l);this.slots.push(u),this.drawOrder.push(u)}this.ikConstraints=new Array;for(var d=0;d<e.ikConstraints.length;d++){var f=e.ikConstraints[d];this.ikConstraints.push(new re(f,this))}this.transformConstraints=new Array;for(var v=0;v<e.transformConstraints.length;v++){var m=e.transformConstraints[v];this.transformConstraints.push(new ue(m,this))}this.pathConstraints=new Array;for(var g=0;g<e.pathConstraints.length;g++){var p=e.pathConstraints[g];this.pathConstraints.push(new he(p,this))}this.color=new c(1,1,1,1),this.updateCache()}return Object(r.a)(t,[{key:"updateCache",value:function(){var t=this._updateCache;t.length=0;for(var e=this.bones,i=0,a=e.length;i<a;i++){var n=e[i];n.sorted=n.data.skinRequired,n.active=!n.sorted}if(this.skin)for(var r=this.skin.bones,s=0,o=this.skin.bones.length;s<o;s++){var h=this.bones[r[s].index];do{h.sorted=!1,h.active=!0,h=h.parent}while(h)}var l=this.ikConstraints,c=this.transformConstraints,u=this.pathConstraints,d=l.length,f=c.length,v=u.length,m=d+f+v;t:for(var g=0;g<m;g++){for(var p=0;p<d;p++){var b=l[p];if(b.data.order==g){this.sortIkConstraint(b);continue t}}for(var y=0;y<f;y++){var w=c[y];if(w.data.order==g){this.sortTransformConstraint(w);continue t}}for(var x=0;x<v;x++){var k=u[x];if(k.data.order==g){this.sortPathConstraint(k);continue t}}}for(var A=0,S=e.length;A<S;A++)this.sortBone(e[A])}},{key:"sortIkConstraint",value:function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&d.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var i=t.bones,a=i[0];if(this.sortBone(a),1==i.length)this._updateCache.push(t),this.sortReset(a.children);else{var n=i[i.length-1];this.sortBone(n),this._updateCache.push(t),this.sortReset(a.children),n.sorted=!0}}}},{key:"sortPathConstraint",value:function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&d.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,i=e.data.index,a=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,a),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,a);for(var n=0,r=this.data.skins.length;n<r;n++)this.sortPathConstraintAttachment(this.data.skins[n],i,a);var s=e.getAttachment();s instanceof Wt&&this.sortPathConstraintAttachmentWith(s,a);for(var o=t.bones,h=o.length,l=0;l<h;l++)this.sortBone(o[l]);this._updateCache.push(t);for(var c=0;c<h;c++)this.sortReset(o[c].children);for(var u=0;u<h;u++)o[u].sorted=!0}}},{key:"sortTransformConstraint",value:function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&d.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,i=e.length;if(t.data.local)for(var a=0;a<i;a++){var n=e[a];this.sortBone(n.parent),this.sortBone(n)}else for(var r=0;r<i;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var s=0;s<i;s++)this.sortReset(e[s].children);for(var o=0;o<i;o++)e[o].sorted=!0}}},{key:"sortPathConstraintAttachment",value:function(t,e,i){var a=t.attachments[e];if(a)for(var n in a)this.sortPathConstraintAttachmentWith(a[n],i)}},{key:"sortPathConstraintAttachmentWith",value:function(t,e){if(t instanceof Wt){var i=t.bones;if(i)for(var a=this.bones,n=0,r=i.length;n<r;){var s=i[n++];for(s+=n;n<s;)this.sortBone(a[i[n++]])}else this.sortBone(e)}}},{key:"sortBone",value:function(t){if(t&&!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}}},{key:"sortReset",value:function(t){for(var e=0,i=t.length;e<i;e++){var a=t[e];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}}},{key:"updateWorldTransform",value:function(){for(var t=this.bones,e=0,i=t.length;e<i;e++){var a=t[e];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY}for(var n=this._updateCache,r=0,s=n.length;r<s;r++)n[r].update()}},{key:"updateWorldTransformWith",value:function(t){var e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");var i=t.a,a=t.b,n=t.c,r=t.d;e.worldX=i*this.x+a*this.y+t.worldX,e.worldY=n*this.x+r*this.y+t.worldY;var s=e.rotation+90+e.shearY,o=u.cosDeg(e.rotation+e.shearX)*e.scaleX,h=u.cosDeg(s)*e.scaleY,l=u.sinDeg(e.rotation+e.shearX)*e.scaleX,c=u.sinDeg(s)*e.scaleY;e.a=(i*o+a*l)*this.scaleX,e.b=(i*h+a*c)*this.scaleX,e.c=(n*o+r*l)*this.scaleY,e.d=(n*h+r*c)*this.scaleY;for(var d=this._updateCache,f=0,v=d.length;f<v;f++){var m=d[f];m!=e&&m.update()}}},{key:"setToSetupPose",value:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}},{key:"setBonesToSetupPose",value:function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();for(var a=this.ikConstraints,n=0,r=a.length;n<r;n++){var s=a[n];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}for(var o=this.transformConstraints,h=0,l=o.length;h<l;h++){var c=o[h],u=c.data;c.mixRotate=u.mixRotate,c.mixX=u.mixX,c.mixY=u.mixY,c.mixScaleX=u.mixScaleX,c.mixScaleY=u.mixScaleY,c.mixShearY=u.mixShearY}for(var d=this.pathConstraints,f=0,v=d.length;f<v;f++){var m=d[f],g=m.data;m.position=g.position,m.spacing=g.spacing,m.mixRotate=g.mixRotate,m.mixX=g.mixX,m.mixY=g.mixY}}},{key:"setSlotsToSetupPose",value:function(){var t=this.slots;d.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,i=t.length;e<i;e++)t[e].setToSetupPose()}},{key:"getRootBone",value:function(){return 0==this.bones.length?null:this.bones[0]}},{key:"findBone",value:function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,a=e.length;i<a;i++){var n=e[i];if(n.data.name==t)return n}return null}},{key:"findSlot",value:function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,a=e.length;i<a;i++){var n=e[i];if(n.data.name==t)return n}return null}},{key:"setSkinByName",value:function(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}},{key:"setSkin",value:function(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,a=e.length;i<a;i++){var n=e[i],r=n.data.attachmentName;if(r){var s=t.getAttachment(i,r);s&&n.setAttachment(s)}}this.skin=t,this.updateCache()}}},{key:"getAttachmentByName",value:function(t,e){var i=this.data.findSlot(t);if(!i)throw new Error("Can't find slot with name ".concat(t));return this.getAttachment(i.index,e)}},{key:"getAttachment",value:function(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}},{key:"setAttachment",value:function(t,e){if(!t)throw new Error("slotName cannot be null.");for(var i=this.slots,a=0,n=i.length;a<n;a++){var r=i[a];if(r.data.name==t){var s=null;if(e&&!(s=this.getAttachment(a,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(s)}}throw new Error("Slot not found: "+t)}},{key:"findIkConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,a=e.length;i<a;i++){var n=e[i];if(n.data.name==t)return n}return null}},{key:"findTransformConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,a=e.length;i<a;i++){var n=e[i];if(n.data.name==t)return n}return null}},{key:"findPathConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,a=e.length;i<a;i++){var n=e[i];if(n.data.name==t)return n}return null}},{key:"getBoundsRect",value:function(){var t=new v,e=new v;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}},{key:"getBounds",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Array(2);if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");for(var a=this.drawOrder,n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=0,l=a.length;h<l;h++){var c=a[h];if(c.bone.active){var u=0,f=null,v=c.getAttachment();if(v instanceof Gt)u=8,f=d.setArraySize(i,u,0),v.computeWorldVertices(c,f,0,2);else if(v instanceof zt){var m=v;u=m.worldVerticesLength,f=d.setArraySize(i,u,0),m.computeWorldVertices(c,0,u,f,0,2)}if(f)for(var g=0,p=f.length;g<p;g+=2){var b=f[g],y=f[g+1];n=Math.min(n,b),r=Math.min(r,y),s=Math.max(s,b),o=Math.max(o,y)}}}t.set(n,r),e.set(s-n,o-r)}}]),t}(),fe=function(){function t(){Object(n.a)(this,t),this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return Object(r.a)(t,[{key:"findBone",value:function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,a=e.length;i<a;i++){var n=e[i];if(n.name==t)return n}return null}},{key:"findSlot",value:function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,a=e.length;i<a;i++){var n=e[i];if(n.name==t)return n}return null}},{key:"findSkin",value:function(t){if(!t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,a=e.length;i<a;i++){var n=e[i];if(n.name==t)return n}return null}},{key:"findEvent",value:function(t){if(!t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,a=e.length;i<a;i++){var n=e[i];if(n.name==t)return n}return null}},{key:"findAnimation",value:function(t){if(!t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,a=e.length;i<a;i++){var n=e[i];if(n.name==t)return n}return null}},{key:"findIkConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,a=e.length;i<a;i++){var n=e[i];if(n.name==t)return n}return null}},{key:"findTransformConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,a=e.length;i<a;i++){var n=e[i];if(n.name==t)return n}return null}},{key:"findPathConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,a=e.length;i<a;i++){var n=e[i];if(n.name==t)return n}return null}}]),t}(),ve=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;Object(n.a)(this,t),this.slotIndex=e,this.name=i,this.attachment=a},me=function(){function t(e){if(Object(n.a)(this,t),this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!e)throw new Error("name cannot be null.");this.name=e}return Object(r.a)(t,[{key:"setAttachment",value:function(t,e,i){if(!i)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][e]=i}},{key:"addSkin",value:function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],a=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==i){a=!0;break}a||this.bones.push(i)}for(var r=0;r<t.constraints.length;r++){for(var s=t.constraints[r],o=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==s){o=!0;break}o||this.constraints.push(s)}for(var l=t.getAttachments(),c=0;c<l.length;c++){var u=l[c];this.setAttachment(u.slotIndex,u.name,u.attachment)}}},{key:"copySkin",value:function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],a=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==i){a=!0;break}a||this.bones.push(i)}for(var r=0;r<t.constraints.length;r++){for(var s=t.constraints[r],o=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==s){o=!0;break}o||this.constraints.push(s)}for(var l=t.getAttachments(),c=0;c<l.length;c++){var u=l[c];u.attachment&&(u.attachment instanceof zt?(u.attachment=u.attachment.newLinkedMesh(),this.setAttachment(u.slotIndex,u.name,u.attachment)):(u.attachment=u.attachment.copy(),this.setAttachment(u.slotIndex,u.name,u.attachment)))}}},{key:"getAttachment",value:function(t,e){var i=this.attachments[t];return i?i[e]:null}},{key:"removeAttachment",value:function(t,e){var i=this.attachments[t];i&&delete i[e]}},{key:"getAttachments",value:function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var i=this.attachments[e];if(i)for(var a in i){var n=i[a];n&&t.push(new ve(e,a,n))}}return t}},{key:"getAttachmentsForSlot",value:function(t,e){var i=this.attachments[t];if(i)for(var a in i){var n=i[a];n&&e.push(new ve(t,a,n))}}},{key:"clear",value:function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}},{key:"attachAll",value:function(t,e){for(var i=0,a=0;a<t.slots.length;a++){var n=t.slots[a],r=n.getAttachment();if(r&&i<e.attachments.length){var s=e.attachments[i];for(var o in s){if(r==s[o]){var h=this.getAttachment(i,o);h&&n.setAttachment(h);break}}}i++}}}]),t}(),ge=function t(e,i,a){if(Object(n.a)(this,t),this.index=0,this.color=new c(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=le.Normal,e<0)throw new Error("index must be >= 0.");if(!i)throw new Error("name cannot be null.");if(!a)throw new Error("boneData cannot be null.");this.index=e,this.name=i,this.boneData=a};!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(le||(le={}));var pe,be=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a;return Object(n.a)(this,i),(a=e.call(this,t,0,!1)).bones=new Array,a._target=null,a.mixRotate=0,a.mixX=0,a.mixY=0,a.mixScaleX=0,a.mixScaleY=0,a.mixShearY=0,a.offsetRotation=0,a.offsetX=0,a.offsetY=0,a.offsetScaleX=0,a.offsetScaleY=0,a.offsetShearY=0,a.relative=!1,a.local=!1,a}return Object(r.a)(i,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(t){this._target=t}}]),i}(te),ye=function(){function t(e){Object(n.a)(this,t),this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return Object(r.a)(t,[{key:"readSkeletonData",value:function(t){var e=this.scale,i=new fe;i.name="";var a=new we(t),n=a.readInt32(),r=a.readInt32();i.hash=0==r&&0==n?null:r.toString(16)+n.toString(16),i.version=a.readString(),i.x=a.readFloat(),i.y=a.readFloat(),i.width=a.readFloat(),i.height=a.readFloat();var s=a.readBoolean();s&&(i.fps=a.readFloat(),i.imagesPath=a.readString(),i.audioPath=a.readString());var o=0;o=a.readInt(!0);for(var h=0;h<o;h++){var l=a.readString();if(!l)throw new Error("String in string table must not be null.");a.strings.push(l)}o=a.readInt(!0);for(var u=0;u<o;u++){var f=a.readString();if(!f)throw new Error("Bone name must not be null.");var v=0==u?null:i.bones[a.readInt(!0)],m=new Zt(u,f,v);m.rotation=a.readFloat(),m.x=a.readFloat()*e,m.y=a.readFloat()*e,m.scaleX=a.readFloat(),m.scaleY=a.readFloat(),m.shearX=a.readFloat(),m.shearY=a.readFloat(),m.length=a.readFloat()*e,m.transformMode=a.readInt(!0),m.skinRequired=a.readBoolean(),s&&c.rgba8888ToColor(m.color,a.readInt32()),i.bones.push(m)}o=a.readInt(!0);for(var g=0;g<o;g++){var p=a.readString();if(!p)throw new Error("Slot name must not be null.");var b=i.bones[a.readInt(!0)],y=new ge(g,p,b);c.rgba8888ToColor(y.color,a.readInt32());var w=a.readInt32();-1!=w&&c.rgb888ToColor(y.darkColor=new c,w),y.attachmentName=a.readStringRef(),y.blendMode=a.readInt(!0),i.slots.push(y)}o=a.readInt(!0);for(var x,k=0;k<o;k++){var A=a.readString();if(!A)throw new Error("IK constraint data name must not be null.");var S=new se(A);S.order=a.readInt(!0),S.skinRequired=a.readBoolean(),x=a.readInt(!0);for(var C=0;C<x;C++)S.bones.push(i.bones[a.readInt(!0)]);S.target=i.bones[a.readInt(!0)],S.mix=a.readFloat(),S.softness=a.readFloat()*e,S.bendDirection=a.readByte(),S.compress=a.readBoolean(),S.stretch=a.readBoolean(),S.uniform=a.readBoolean(),i.ikConstraints.push(S)}o=a.readInt(!0);for(var E,I=0;I<o;I++){var O=a.readString();if(!O)throw new Error("Transform constraint data name must not be null.");var M=new be(O);M.order=a.readInt(!0),M.skinRequired=a.readBoolean(),E=a.readInt(!0);for(var T=0;T<E;T++)M.bones.push(i.bones[a.readInt(!0)]);M.target=i.bones[a.readInt(!0)],M.local=a.readBoolean(),M.relative=a.readBoolean(),M.offsetRotation=a.readFloat(),M.offsetX=a.readFloat()*e,M.offsetY=a.readFloat()*e,M.offsetScaleX=a.readFloat(),M.offsetScaleY=a.readFloat(),M.offsetShearY=a.readFloat(),M.mixRotate=a.readFloat(),M.mixX=a.readFloat(),M.mixY=a.readFloat(),M.mixScaleX=a.readFloat(),M.mixScaleY=a.readFloat(),M.mixShearY=a.readFloat(),i.transformConstraints.push(M)}o=a.readInt(!0);for(var F,R=0;R<o;R++){var Y=a.readString();if(!Y)throw new Error("Path constraint data name must not be null.");var L=new oe(Y);L.order=a.readInt(!0),L.skinRequired=a.readBoolean(),F=a.readInt(!0);for(var j=0;j<F;j++)L.bones.push(i.bones[a.readInt(!0)]);L.target=i.slots[a.readInt(!0)],L.positionMode=a.readInt(!0),L.spacingMode=a.readInt(!0),L.rotateMode=a.readInt(!0),L.offsetRotation=a.readFloat(),L.position=a.readFloat(),L.positionMode==Jt.Fixed&&(L.position*=e),L.spacing=a.readFloat(),L.spacingMode!=Kt.Length&&L.spacingMode!=Kt.Fixed||(L.spacing*=e),L.mixRotate=a.readFloat(),L.mixX=a.readFloat(),L.mixY=a.readFloat(),i.pathConstraints.push(L)}var X=this.readSkin(a,i,!0,s);X&&(i.defaultSkin=X,i.skins.push(X));var B=i.skins.length;for(d.setArraySize(i.skins,o=B+a.readInt(!0));B<o;B++){var P=this.readSkin(a,i,!1,s);if(!P)throw new Error("readSkin() should not have returned null.");i.skins[B]=P}o=this.linkedMeshes.length;for(var V=0;V<o;V++){var D=this.linkedMeshes[V],N=D.skin?i.findSkin(D.skin):i.defaultSkin;if(!N)throw new Error("Not skin found for linked mesh.");if(!D.parent)throw new Error("Linked mesh parent must not be null");var U=N.getAttachment(D.slotIndex,D.parent);if(!U)throw new Error("Parent mesh not found: ".concat(D.parent));D.mesh.timelineAttachment=D.inheritTimeline?U:D.mesh,D.mesh.setParentMesh(U),null!=D.mesh.region&&D.mesh.updateRegion()}this.linkedMeshes.length=0,o=a.readInt(!0);for(var z=0;z<o;z++){var W=a.readStringRef();if(!W)throw new Error;var q=new ne(W);q.intValue=a.readInt(!1),q.floatValue=a.readFloat(),q.stringValue=a.readString(),q.audioPath=a.readString(),q.audioPath&&(q.volume=a.readFloat(),q.balance=a.readFloat()),i.events.push(q)}o=a.readInt(!0);for(var G=0;G<o;G++){var _=a.readString();if(!_)throw new Error("Animatio name must not be null.");i.animations.push(this.readAnimation(a,_,i))}return i}},{key:"readSkin",value:function(t,e,i,a){var n=null,r=0;if(i){if(0==(r=t.readInt(!0)))return null;n=new me("default")}else{var s=t.readStringRef();if(!s)throw new Error("Skin name must not be null.");(n=new me(s)).bones.length=t.readInt(!0);for(var o=0,h=n.bones.length;o<h;o++)n.bones[o]=e.bones[t.readInt(!0)];for(var l=0,c=t.readInt(!0);l<c;l++)n.constraints.push(e.ikConstraints[t.readInt(!0)]);for(var u=0,d=t.readInt(!0);u<d;u++)n.constraints.push(e.transformConstraints[t.readInt(!0)]);for(var f=0,v=t.readInt(!0);f<v;f++)n.constraints.push(e.pathConstraints[t.readInt(!0)]);r=t.readInt(!0)}for(var m=0;m<r;m++)for(var g=t.readInt(!0),p=0,b=t.readInt(!0);p<b;p++){var y=t.readStringRef();if(!y)throw new Error("Attachment name must not be null");var w=this.readAttachment(t,e,n,g,y,a);w&&n.setAttachment(g,y,w)}return n}},{key:"readAttachment",value:function(t,e,i,a,n,r){var s=this.scale,o=t.readStringRef();switch(o||(o=n),t.readByte()){case pe.Region:var h=t.readStringRef(),l=t.readFloat(),u=t.readFloat(),f=t.readFloat(),v=t.readFloat(),m=t.readFloat(),g=t.readFloat(),p=t.readFloat(),b=t.readInt32(),y=this.readSequence(t);h||(h=o);var w=this.attachmentLoader.newRegionAttachment(i,o,h,y);return w?(w.path=h,w.x=u*s,w.y=f*s,w.scaleX=v,w.scaleY=m,w.rotation=l,w.width=g*s,w.height=p*s,c.rgba8888ToColor(w.color,b),w.sequence=y,null==y&&w.updateRegion(),w):null;case pe.BoundingBox:var x=t.readInt(!0),k=this.readVertices(t,x),A=r?t.readInt32():0,S=this.attachmentLoader.newBoundingBoxAttachment(i,o);return S?(S.worldVerticesLength=x<<1,S.vertices=k.vertices,S.bones=k.bones,r&&c.rgba8888ToColor(S.color,A),S):null;case pe.Mesh:var C=t.readStringRef(),E=t.readInt32(),I=t.readInt(!0),O=this.readFloatArray(t,I<<1,1),M=this.readShortArray(t),T=this.readVertices(t,I),F=t.readInt(!0),R=this.readSequence(t),Y=[],L=0,j=0;r&&(Y=this.readShortArray(t),L=t.readFloat(),j=t.readFloat()),C||(C=o);var X=this.attachmentLoader.newMeshAttachment(i,o,C,R);return X?(X.path=C,c.rgba8888ToColor(X.color,E),X.bones=T.bones,X.vertices=T.vertices,X.worldVerticesLength=I<<1,X.triangles=M,X.regionUVs=O,null==R&&X.updateRegion(),X.hullLength=F<<1,X.sequence=R,r&&(X.edges=Y,X.width=L*s,X.height=j*s),X):null;case pe.LinkedMesh:var B=t.readStringRef(),P=t.readInt32(),V=t.readStringRef(),D=t.readStringRef(),N=t.readBoolean(),U=this.readSequence(t),z=0,W=0;r&&(z=t.readFloat(),W=t.readFloat()),B||(B=o);var q=this.attachmentLoader.newMeshAttachment(i,o,B,U);return q?(q.path=B,c.rgba8888ToColor(q.color,P),q.sequence=U,r&&(q.width=z*s,q.height=W*s),this.linkedMeshes.push(new xe(q,V,a,D,N)),q):null;case pe.Path:for(var G=t.readBoolean(),_=t.readBoolean(),H=t.readInt(!0),Z=this.readVertices(t,H),J=d.newArray(H/3,0),K=0,Q=J.length;K<Q;K++)J[K]=t.readFloat()*s;var $=r?t.readInt32():0,tt=this.attachmentLoader.newPathAttachment(i,o);return tt?(tt.closed=G,tt.constantSpeed=_,tt.worldVerticesLength=H<<1,tt.vertices=Z.vertices,tt.bones=Z.bones,tt.lengths=J,r&&c.rgba8888ToColor(tt.color,$),tt):null;case pe.Point:var et=t.readFloat(),it=t.readFloat(),at=t.readFloat(),nt=r?t.readInt32():0,rt=this.attachmentLoader.newPointAttachment(i,o);return rt?(rt.x=it*s,rt.y=at*s,rt.rotation=et,r&&c.rgba8888ToColor(rt.color,nt),rt):null;case pe.Clipping:var st=t.readInt(!0),ot=t.readInt(!0),ht=this.readVertices(t,ot),lt=r?t.readInt32():0,ct=this.attachmentLoader.newClippingAttachment(i,o);return ct?(ct.endSlot=e.slots[st],ct.worldVerticesLength=ot<<1,ct.vertices=ht.vertices,ct.bones=ht.bones,r&&c.rgba8888ToColor(ct.color,lt),ct):null}return null}},{key:"readSequence",value:function(t){if(!t.readBoolean())return null;var e=new y(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}},{key:"readVertices",value:function(t,e){var i=this.scale,a=e<<1,n=new ke;if(!t.readBoolean())return n.vertices=this.readFloatArray(t,a,i),n;for(var r=new Array,s=new Array,o=0;o<e;o++){var h=t.readInt(!0);s.push(h);for(var l=0;l<h;l++)s.push(t.readInt(!0)),r.push(t.readFloat()*i),r.push(t.readFloat()*i),r.push(t.readFloat())}return n.vertices=d.toFloatArray(r),n.bones=s,n}},{key:"readFloatArray",value:function(t,e,i){var a=new Array(e);if(1==i)for(var n=0;n<e;n++)a[n]=t.readFloat();else for(var r=0;r<e;r++)a[r]=t.readFloat()*i;return a}},{key:"readShortArray",value:function(t){for(var e=t.readInt(!0),i=new Array(e),a=0;a<e;a++)i[a]=t.readShort();return i}},{key:"readAnimation",value:function(t,e,i){t.readInt(!0);for(var a=new Array,n=this.scale,r=(new c,new c,0),s=t.readInt(!0);r<s;r++)for(var o=t.readInt(!0),h=0,l=t.readInt(!0);h<l;h++){var u=t.readByte(),f=t.readInt(!0),v=f-1;switch(u){case Xe:for(var m=new lt(f,o),g=0;g<f;g++)m.setFrame(g,t.readFloat(),t.readStringRef());a.push(m);break;case Be:for(var p=t.readInt(!0),b=new nt(f,p,o),y=t.readFloat(),w=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,E=0,I=0;b.setFrame(E,y,w,x,S,C),E!=v;E++){var O=t.readFloat(),M=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,R=t.readUnsignedByte()/255;switch(t.readByte()){case _e:b.setStepped(E);break;case He:Ce(t,b,I++,E,0,y,O,w,M,1),Ce(t,b,I++,E,1,y,O,x,T,1),Ce(t,b,I++,E,2,y,O,S,F,1),Ce(t,b,I++,E,3,y,O,C,R,1)}y=O,w=M,x=T,S=F,C=R}a.push(b);break;case Pe:for(var Y=t.readInt(!0),L=new rt(f,Y,o),j=t.readFloat(),X=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,V=0,D=0;L.setFrame(V,j,X,B,P),V!=v;V++){var N=t.readFloat(),U=t.readUnsignedByte()/255,z=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255;switch(t.readByte()){case _e:L.setStepped(V);break;case He:Ce(t,L,D++,V,0,j,N,X,U,1),Ce(t,L,D++,V,1,j,N,B,z,1),Ce(t,L,D++,V,2,j,N,P,W,1)}j=N,X=U,B=z,P=W}a.push(L);break;case Ve:for(var q=t.readInt(!0),G=new ot(f,q,o),_=t.readFloat(),yt=t.readUnsignedByte()/255,wt=t.readUnsignedByte()/255,xt=t.readUnsignedByte()/255,kt=t.readUnsignedByte()/255,At=t.readUnsignedByte()/255,St=t.readUnsignedByte()/255,Ct=t.readUnsignedByte()/255,Et=0,It=0;G.setFrame(Et,_,yt,wt,xt,kt,At,St,Ct),Et!=v;Et++){var Ot=t.readFloat(),Mt=t.readUnsignedByte()/255,Tt=t.readUnsignedByte()/255,Ft=t.readUnsignedByte()/255,Rt=t.readUnsignedByte()/255,Yt=t.readUnsignedByte()/255,Lt=t.readUnsignedByte()/255,jt=t.readUnsignedByte()/255;switch(t.readByte()){case _e:G.setStepped(Et);break;case He:Ce(t,G,It++,Et,0,_,Ot,yt,Mt,1),Ce(t,G,It++,Et,1,_,Ot,wt,Tt,1),Ce(t,G,It++,Et,2,_,Ot,xt,Ft,1),Ce(t,G,It++,Et,3,_,Ot,kt,Rt,1),Ce(t,G,It++,Et,4,_,Ot,At,Yt,1),Ce(t,G,It++,Et,5,_,Ot,St,Lt,1),Ce(t,G,It++,Et,6,_,Ot,Ct,jt,1)}_=Ot,yt=Mt,wt=Tt,xt=Ft,kt=Rt,At=Yt,St=Lt,Ct=jt}a.push(G);break;case De:for(var Xt=t.readInt(!0),Bt=new ht(f,Xt,o),Pt=t.readFloat(),Vt=t.readUnsignedByte()/255,Dt=t.readUnsignedByte()/255,Nt=t.readUnsignedByte()/255,Ut=t.readUnsignedByte()/255,zt=t.readUnsignedByte()/255,Wt=t.readUnsignedByte()/255,qt=0,Gt=0;Bt.setFrame(qt,Pt,Vt,Dt,Nt,Ut,zt,Wt),qt!=v;qt++){var _t=t.readFloat(),Ht=t.readUnsignedByte()/255,Zt=t.readUnsignedByte()/255,Qt=t.readUnsignedByte()/255,$t=t.readUnsignedByte()/255,te=t.readUnsignedByte()/255,ee=t.readUnsignedByte()/255;switch(t.readByte()){case _e:Bt.setStepped(qt);break;case He:Ce(t,Bt,Gt++,qt,0,Pt,_t,Vt,Ht,1),Ce(t,Bt,Gt++,qt,1,Pt,_t,Dt,Zt,1),Ce(t,Bt,Gt++,qt,2,Pt,_t,Nt,Qt,1),Ce(t,Bt,Gt++,qt,3,Pt,_t,Ut,$t,1),Ce(t,Bt,Gt++,qt,4,Pt,_t,zt,te,1),Ce(t,Bt,Gt++,qt,5,Pt,_t,Wt,ee,1)}Pt=_t,Vt=Ht,Dt=Zt,Nt=Qt,Ut=$t,zt=te,Wt=ee}a.push(Bt);break;case Ne:for(var ie=new st(f,t.readInt(!0),o),ne=t.readFloat(),re=t.readUnsignedByte()/255,se=0,oe=0;ie.setFrame(se,ne,re),se!=v;se++){var he=t.readFloat(),le=t.readUnsignedByte()/255;switch(t.readByte()){case _e:ie.setStepped(se);break;case He:Ce(t,ie,oe++,se,0,ne,he,re,le,1)}ne=he,re=le}a.push(ie)}}for(var ce=0,ue=t.readInt(!0);ce<ue;ce++)for(var de=t.readInt(!0),fe=0,ve=t.readInt(!0);fe<ve;fe++){var me=t.readByte(),ge=t.readInt(!0),pe=t.readInt(!0);switch(me){case Ee:a.push(Ae(t,new H(ge,pe,de),1));break;case Ie:a.push(Se(t,new Z(ge,pe,de),n));break;case Oe:a.push(Ae(t,new J(ge,pe,de),n));break;case Me:a.push(Ae(t,new K(ge,pe,de),n));break;case Te:a.push(Se(t,new Q(ge,pe,de),1));break;case Fe:a.push(Ae(t,new $(ge,pe,de),1));break;case Re:a.push(Ae(t,new tt(ge,pe,de),1));break;case Ye:a.push(Se(t,new et(ge,pe,de),1));break;case Le:a.push(Ae(t,new it(ge,pe,de),1));break;case je:a.push(Ae(t,new at(ge,pe,de),1))}}for(var be=0,ye=t.readInt(!0);be<ye;be++){for(var we=t.readInt(!0),xe=t.readInt(!0),ke=xe-1,Ze=new ft(xe,t.readInt(!0),we),Je=t.readFloat(),Ke=t.readFloat(),Qe=t.readFloat()*n,$e=0,ti=0;Ze.setFrame($e,Je,Ke,Qe,t.readByte(),t.readBoolean(),t.readBoolean()),$e!=ke;$e++){var ei=t.readFloat(),ii=t.readFloat(),ai=t.readFloat()*n;switch(t.readByte()){case _e:Ze.setStepped($e);break;case He:Ce(t,Ze,ti++,$e,0,Je,ei,Ke,ii,1),Ce(t,Ze,ti++,$e,1,Je,ei,Qe,ai,n)}Je=ei,Ke=ii,Qe=ai}a.push(Ze)}for(var ni=0,ri=t.readInt(!0);ni<ri;ni++){for(var si=t.readInt(!0),oi=t.readInt(!0),hi=oi-1,li=new vt(oi,t.readInt(!0),si),ci=t.readFloat(),ui=t.readFloat(),di=t.readFloat(),fi=t.readFloat(),vi=t.readFloat(),mi=t.readFloat(),gi=t.readFloat(),pi=0,bi=0;li.setFrame(pi,ci,ui,di,fi,vi,mi,gi),pi!=hi;pi++){var yi=t.readFloat(),wi=t.readFloat(),xi=t.readFloat(),ki=t.readFloat(),Ai=t.readFloat(),Si=t.readFloat(),Ci=t.readFloat();switch(t.readByte()){case _e:li.setStepped(pi);break;case He:Ce(t,li,bi++,pi,0,ci,yi,ui,wi,1),Ce(t,li,bi++,pi,1,ci,yi,di,xi,1),Ce(t,li,bi++,pi,2,ci,yi,fi,ki,1),Ce(t,li,bi++,pi,3,ci,yi,vi,Ai,1),Ce(t,li,bi++,pi,4,ci,yi,mi,Si,1),Ce(t,li,bi++,pi,5,ci,yi,gi,Ci,1)}ci=yi,ui=wi,di=xi,fi=ki,vi=Ai,mi=Si,gi=Ci}a.push(li)}for(var Ei=0,Ii=t.readInt(!0);Ei<Ii;Ei++)for(var Oi=t.readInt(!0),Mi=i.pathConstraints[Oi],Ti=0,Fi=t.readInt(!0);Ti<Fi;Ti++)switch(t.readByte()){case We:a.push(Ae(t,new mt(t.readInt(!0),t.readInt(!0),Oi),Mi.positionMode==Jt.Fixed?n:1));break;case qe:a.push(Ae(t,new gt(t.readInt(!0),t.readInt(!0),Oi),Mi.spacingMode==Kt.Length||Mi.spacingMode==Kt.Fixed?n:1));break;case Ge:for(var Ri=new pt(t.readInt(!0),t.readInt(!0),Oi),Yi=t.readFloat(),Li=t.readFloat(),ji=t.readFloat(),Xi=t.readFloat(),Bi=0,Pi=0,Vi=Ri.getFrameCount()-1;Ri.setFrame(Bi,Yi,Li,ji,Xi),Bi!=Vi;Bi++){var Di=t.readFloat(),Ni=t.readFloat(),Ui=t.readFloat(),zi=t.readFloat();switch(t.readByte()){case _e:Ri.setStepped(Bi);break;case He:Ce(t,Ri,Pi++,Bi,0,Yi,Di,Li,Ni,1),Ce(t,Ri,Pi++,Bi,1,Yi,Di,ji,Ui,1),Ce(t,Ri,Pi++,Bi,2,Yi,Di,Xi,zi,1)}Yi=Di,Li=Ni,ji=Ui,Xi=zi}a.push(Ri)}for(var Wi=0,qi=t.readInt(!0);Wi<qi;Wi++)for(var Gi=i.skins[t.readInt(!0)],_i=0,Hi=t.readInt(!0);_i<Hi;_i++)for(var Zi=t.readInt(!0),Ji=0,Ki=t.readInt(!0);Ji<Ki;Ji++){var Qi=t.readStringRef();if(!Qi)throw new Error("attachmentName must not be null.");var $i=Gi.getAttachment(Zi,Qi),ta=t.readByte(),ea=t.readInt(!0),ia=ea-1;switch(ta){case Ue:for(var aa=$i,na=aa.bones,ra=aa.vertices,sa=na?ra.length/3*2:ra.length,oa=t.readInt(!0),ha=new ct(ea,oa,Zi,aa),la=t.readFloat(),ca=0,ua=0;;ca++){var da=void 0,fa=t.readInt(!0);if(0==fa)da=na?d.newFloatArray(sa):ra;else{da=d.newFloatArray(sa);var va=t.readInt(!0);if(fa+=va,1==n)for(var ma=va;ma<fa;ma++)da[ma]=t.readFloat();else for(var ga=va;ga<fa;ga++)da[ga]=t.readFloat()*n;if(!na)for(var pa=0,ba=da.length;pa<ba;pa++)da[pa]+=ra[pa]}if(ha.setFrame(ca,la,da),ca==ia)break;var ya=t.readFloat();switch(t.readByte()){case _e:ha.setStepped(ca);break;case He:Ce(t,ha,ua++,ca,0,la,ya,0,1,1)}la=ya}a.push(ha);break;case ze:for(var wa=new bt(ea,Zi,$i),xa=0;xa<ea;xa++){var ka=t.readFloat(),Aa=t.readInt32();wa.setFrame(xa,ka,k[15&Aa],Aa>>4,t.readFloat())}a.push(wa)}}var Sa=t.readInt(!0);if(Sa>0){for(var Ca=new dt(Sa),Ea=i.slots.length,Ia=0;Ia<Sa;Ia++){for(var Oa=t.readFloat(),Ma=t.readInt(!0),Ta=d.newArray(Ea,0),Fa=Ea-1;Fa>=0;Fa--)Ta[Fa]=-1;for(var Ra=d.newArray(Ea-Ma,0),Ya=0,La=0,ja=0;ja<Ma;ja++){for(var Xa=t.readInt(!0);Ya!=Xa;)Ra[La++]=Ya++;Ta[Ya+t.readInt(!0)]=Ya++}for(;Ya<Ea;)Ra[La++]=Ya++;for(var Ba=Ea-1;Ba>=0;Ba--)-1==Ta[Ba]&&(Ta[Ba]=Ra[--La]);Ca.setFrame(Ia,Oa,Ta)}a.push(Ca)}var Pa=t.readInt(!0);if(Pa>0){for(var Va=new ut(Pa),Da=0;Da<Pa;Da++){var Na=t.readFloat(),Ua=i.events[t.readInt(!0)],za=new ae(Na,Ua);za.intValue=t.readInt(!1),za.floatValue=t.readFloat(),za.stringValue=t.readBoolean()?t.readString():Ua.stringValue,za.data.audioPath&&(za.volume=t.readFloat(),za.balance=t.readFloat()),Va.setFrame(Da,za)}a.push(Va)}for(var Wa=0,qa=0,Ga=a.length;qa<Ga;qa++)Wa=Math.max(Wa,a[qa].getDuration());return new A(e,a,Wa)}}]),t}(),we=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new DataView(e.buffer);Object(n.a)(this,t),this.strings=i,this.index=a,this.buffer=r}return Object(r.a)(t,[{key:"readByte",value:function(){return this.buffer.getInt8(this.index++)}},{key:"readUnsignedByte",value:function(){return this.buffer.getUint8(this.index++)}},{key:"readShort",value:function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t}},{key:"readInt32",value:function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t}},{key:"readInt",value:function(t){var e=this.readByte(),i=127&e;return 0!=(128&e)&&(i|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<28)))),t?i:i>>>1^-(1&i)}},{key:"readStringRef",value:function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]}},{key:"readString",value:function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",i=0;i<t;){var a=this.readUnsignedByte();switch(a>>4){case 12:case 13:e+=String.fromCharCode((31&a)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&a)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(a),i++}}return e}},{key:"readFloat",value:function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t}},{key:"readBoolean",value:function(){return 0!=this.readByte()}}]),t}(),xe=function t(e,i,a,r,s){Object(n.a)(this,t),this.mesh=e,this.skin=i,this.slotIndex=a,this.parent=r,this.inheritTimeline=s},ke=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(n.a)(this,t),this.bones=e,this.vertices=i};function Ae(t,e,i){for(var a=t.readFloat(),n=t.readFloat()*i,r=0,s=0,o=e.getFrameCount()-1;e.setFrame(r,a,n),r!=o;r++){var h=t.readFloat(),l=t.readFloat()*i;switch(t.readByte()){case _e:e.setStepped(r);break;case He:Ce(t,e,s++,r,0,a,h,n,l,i)}a=h,n=l}return e}function Se(t,e,i){for(var a=t.readFloat(),n=t.readFloat()*i,r=t.readFloat()*i,s=0,o=0,h=e.getFrameCount()-1;e.setFrame(s,a,n,r),s!=h;s++){var l=t.readFloat(),c=t.readFloat()*i,u=t.readFloat()*i;switch(t.readByte()){case _e:e.setStepped(s);break;case He:Ce(t,e,o++,s,0,a,l,n,c,i),Ce(t,e,o++,s,1,a,l,r,u,i)}a=l,n=c,r=u}return e}function Ce(t,e,i,a,n,r,s,o,h,l){e.setBezier(i,a,n,r,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,s,h)}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(pe||(pe={}));var Ee=0,Ie=1,Oe=2,Me=3,Te=4,Fe=5,Re=6,Ye=7,Le=8,je=9,Xe=0,Be=1,Pe=2,Ve=3,De=4,Ne=5,Ue=0,ze=1,We=0,qe=1,Ge=2,_e=1,He=2,Ze=function(){function t(){Object(n.a)(this,t),this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new f((function(){return d.newFloatArray(16)}))}return Object(r.a)(t,[{key:"update",value:function(t,e){if(!t)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,a=this.polygons,n=this.polygonPool,r=t.slots,s=r.length;i.length=0,n.freeAll(a),a.length=0;for(var o=0;o<s;o++){var h=r[o];if(h.bone.active){var l=h.getAttachment();if(l instanceof Yt){var c=l;i.push(c);var u=n.obtain();u.length!=c.worldVerticesLength&&(u=d.newFloatArray(c.worldVerticesLength)),a.push(u),c.computeWorldVertices(h,0,c.worldVerticesLength,u,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}},{key:"aabbCompute",value:function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,n=this.polygons,r=0,s=n.length;r<s;r++)for(var o=n[r],h=o,l=0,c=o.length;l<c;l+=2){var u=h[l],d=h[l+1];t=Math.min(t,u),e=Math.min(e,d),i=Math.max(i,u),a=Math.max(a,d)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=a}},{key:"aabbContainsPoint",value:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}},{key:"aabbIntersectsSegment",value:function(t,e,i,a){var n=this.minX,r=this.minY,s=this.maxX,o=this.maxY;if(t<=n&&i<=n||e<=r&&a<=r||t>=s&&i>=s||e>=o&&a>=o)return!1;var h=(a-e)/(i-t),l=h*(n-t)+e;if(l>r&&l<o)return!0;if((l=h*(s-t)+e)>r&&l<o)return!0;var c=(r-e)/h+t;return c>n&&c<s||(c=(o-e)/h+t)>n&&c<s}},{key:"aabbIntersectsSkeleton",value:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}},{key:"containsPoint",value:function(t,e){for(var i=this.polygons,a=0,n=i.length;a<n;a++)if(this.containsPointPolygon(i[a],t,e))return this.boundingBoxes[a];return null}},{key:"containsPointPolygon",value:function(t,e,i){for(var a=t,n=t.length,r=n-2,s=!1,o=0;o<n;o+=2){var h=a[o+1],l=a[r+1];if(h<i&&l>=i||l<i&&h>=i){var c=a[o];c+(i-h)/(l-h)*(a[r]-c)<e&&(s=!s)}r=o}return s}},{key:"intersectsSegment",value:function(t,e,i,a){for(var n=this.polygons,r=0,s=n.length;r<s;r++)if(this.intersectsSegmentPolygon(n[r],t,e,i,a))return this.boundingBoxes[r];return null}},{key:"intersectsSegmentPolygon",value:function(t,e,i,a,n){for(var r=t,s=t.length,o=e-a,h=i-n,l=e*n-i*a,c=r[s-2],u=r[s-1],d=0;d<s;d+=2){var f=r[d],v=r[d+1],m=c*v-u*f,g=c-f,p=u-v,b=o*p-h*g,y=(l*g-o*m)/b;if((y>=c&&y<=f||y>=f&&y<=c)&&(y>=e&&y<=a||y>=a&&y<=e)){var w=(l*p-h*m)/b;if((w>=u&&w<=v||w>=v&&w<=u)&&(w>=i&&w<=n||w>=n&&w<=i))return!0}c=f,u=v}return!1}},{key:"getPolygon",value:function(t){if(!t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}},{key:"getWidth",value:function(){return this.maxX-this.minX}},{key:"getHeight",value:function(){return this.maxY-this.minY}}]),t}(),Je=function(){function t(){Object(n.a)(this,t),this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new f((function(){return new Array})),this.polygonIndicesPool=new f((function(){return new Array}))}return Object(r.a)(t,[{key:"triangulate",value:function(e){var i=e,a=e.length>>1,n=this.indicesArray;n.length=0;for(var r=0;r<a;r++)n[r]=r;var s=this.isConcaveArray;s.length=0;for(var o=0,h=a;o<h;++o)s[o]=t.isConcave(o,a,i,n);var l=this.triangles;for(l.length=0;a>3;){for(var c=a-1,u=0,d=1;;){t:if(!s[u]){for(var f=n[c]<<1,v=n[u]<<1,m=n[d]<<1,g=i[f],p=i[f+1],b=i[v],y=i[v+1],w=i[m],x=i[m+1],k=(d+1)%a;k!=c;k=(k+1)%a)if(s[k]){var A=n[k]<<1,S=i[A],C=i[A+1];if(t.positiveArea(w,x,g,p,S,C)&&t.positiveArea(g,p,b,y,S,C)&&t.positiveArea(b,y,w,x,S,C))break t}break}if(0==d){do{if(!s[u])break;u--}while(u>0);break}c=u,u=d,d=(d+1)%a}l.push(n[(a+u-1)%a]),l.push(n[u]),l.push(n[(u+1)%a]),n.splice(u,1),s.splice(u,1);var E=(--a+u-1)%a,I=u==a?0:u;s[E]=t.isConcave(E,a,i,n),s[I]=t.isConcave(I,a,i,n)}return 3==a&&(l.push(n[2]),l.push(n[0]),l.push(n[1])),l}},{key:"decompose",value:function(e,i){var a=e,n=this.convexPolygons;this.polygonPool.freeAll(n),n.length=0;var r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var o=this.polygonPool.obtain();o.length=0;for(var h=-1,l=0,c=0,u=i.length;c<u;c+=3){var d=i[c]<<1,f=i[c+1]<<1,v=i[c+2]<<1,m=a[d],g=a[d+1],p=a[f],b=a[f+1],y=a[v],w=a[v+1],x=!1;if(h==d){var k=o.length-4,A=t.winding(o[k],o[k+1],o[k+2],o[k+3],y,w),S=t.winding(y,w,o[0],o[1],o[2],o[3]);A==l&&S==l&&(o.push(y),o.push(w),s.push(v),x=!0)}x||(o.length>0?(n.push(o),r.push(s)):(this.polygonPool.free(o),this.polygonIndicesPool.free(s)),(o=this.polygonPool.obtain()).length=0,o.push(m),o.push(g),o.push(p),o.push(b),o.push(y),o.push(w),(s=this.polygonIndicesPool.obtain()).length=0,s.push(d),s.push(f),s.push(v),l=t.winding(m,g,p,b,y,w),h=d)}o.length>0&&(n.push(o),r.push(s));for(var C=0,E=n.length;C<E;C++)if(0!=(s=r[C]).length)for(var I=s[0],O=s[s.length-1],M=(o=n[C]).length-4,T=o[M],F=o[M+1],R=o[M+2],Y=o[M+3],L=o[0],j=o[1],X=o[2],B=o[3],P=t.winding(T,F,R,Y,L,j),V=0;V<E;V++)if(V!=C){var D=r[V];if(3==D.length){var N=D[0],U=D[1],z=D[2],W=n[V],q=W[W.length-2],G=W[W.length-1];if(N==I&&U==O){var _=t.winding(T,F,R,Y,q,G),H=t.winding(q,G,L,j,X,B);_==P&&H==P&&(W.length=0,D.length=0,o.push(q),o.push(G),s.push(z),T=R,F=Y,R=q,Y=G,V=0)}}}for(var Z=n.length-1;Z>=0;Z--)0==(o=n[Z]).length&&(n.splice(Z,1),this.polygonPool.free(o),s=r[Z],r.splice(Z,1),this.polygonIndicesPool.free(s));return n}}],[{key:"isConcave",value:function(t,e,i,a){var n=a[(e+t-1)%e]<<1,r=a[t]<<1,s=a[(t+1)%e]<<1;return!this.positiveArea(i[n],i[n+1],i[r],i[r+1],i[s],i[s+1])}},{key:"positiveArea",value:function(t,e,i,a,n,r){return t*(r-a)+i*(e-r)+n*(a-e)>=0}},{key:"winding",value:function(t,e,i,a,n,r){var s=i-t,o=a-e;return n*o-r*s+s*e-t*o>=0?1:-1}}]),t}(),Ke=function(){function t(){Object(n.a)(this,t),this.triangulator=new Je,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array,this.clipAttachment=null,this.clippingPolygons=null}return Object(r.a)(t,[{key:"clipStart",value:function(e,i){if(this.clipAttachment)return 0;this.clipAttachment=i;var a=i.worldVerticesLength,n=d.setArraySize(this.clippingPolygon,a);i.computeWorldVertices(e,0,a,n,0,2);var r=this.clippingPolygon;t.makeClockwise(r);for(var s=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r)),o=0,h=s.length;o<h;o++){var l=s[o];t.makeClockwise(l),l.push(l[0]),l.push(l[1])}return s.length}},{key:"clipEndWithSlot",value:function(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}},{key:"clipEnd",value:function(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}},{key:"isClipping",value:function(){return null!=this.clipAttachment}},{key:"clipTriangles",value:function(t,e,i,a,n,r,s,o){var h=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,u=this.clippingPolygons,f=u.length,v=o?12:8,m=0;l.length=0,c.length=0;t:for(var g=0;g<a;g+=3)for(var p=i[g]<<1,b=t[p],y=t[p+1],w=n[p],x=n[p+1],k=t[p=i[g+1]<<1],A=t[p+1],S=n[p],C=n[p+1],E=t[p=i[g+2]<<1],I=t[p+1],O=n[p],M=n[p+1],T=0;T<f;T++){var F=l.length;if(!this.clip(b,y,k,A,E,I,u[T],h)){var R=d.setArraySize(l,F+3*v);R[F]=b,R[F+1]=y,R[F+2]=r.r,R[F+3]=r.g,R[F+4]=r.b,R[F+5]=r.a,o?(R[F+6]=w,R[F+7]=x,R[F+8]=s.r,R[F+9]=s.g,R[F+10]=s.b,R[F+11]=s.a,R[F+12]=k,R[F+13]=A,R[F+14]=r.r,R[F+15]=r.g,R[F+16]=r.b,R[F+17]=r.a,R[F+18]=S,R[F+19]=C,R[F+20]=s.r,R[F+21]=s.g,R[F+22]=s.b,R[F+23]=s.a,R[F+24]=E,R[F+25]=I,R[F+26]=r.r,R[F+27]=r.g,R[F+28]=r.b,R[F+29]=r.a,R[F+30]=O,R[F+31]=M,R[F+32]=s.r,R[F+33]=s.g,R[F+34]=s.b,R[F+35]=s.a):(R[F+6]=w,R[F+7]=x,R[F+8]=k,R[F+9]=A,R[F+10]=r.r,R[F+11]=r.g,R[F+12]=r.b,R[F+13]=r.a,R[F+14]=S,R[F+15]=C,R[F+16]=E,R[F+17]=I,R[F+18]=r.r,R[F+19]=r.g,R[F+20]=r.b,R[F+21]=r.a,R[F+22]=O,R[F+23]=M),F=c.length;var Y=d.setArraySize(c,F+3);Y[F]=m,Y[F+1]=m+1,Y[F+2]=m+2,m+=3;continue t}var L=h.length;if(0!=L){for(var j=A-I,X=E-k,B=b-E,P=I-y,V=1/(j*B+X*(y-I)),D=L>>1,N=this.clipOutput,U=d.setArraySize(l,F+D*v),z=0;z<L;z+=2){var W=N[z],q=N[z+1];U[F]=W,U[F+1]=q,U[F+2]=r.r,U[F+3]=r.g,U[F+4]=r.b,U[F+5]=r.a;var G=W-E,_=q-I,H=(j*G+X*_)*V,Z=(P*G+B*_)*V,J=1-H-Z;U[F+6]=w*H+S*Z+O*J,U[F+7]=x*H+C*Z+M*J,o&&(U[F+8]=s.r,U[F+9]=s.g,U[F+10]=s.b,U[F+11]=s.a),F+=v}F=c.length;var K=d.setArraySize(c,F+3*(D-2));D--;for(var Q=1;Q<D;Q++)K[F]=m,K[F+1]=m+Q,K[F+2]=m+Q+1,F+=3;m+=D+1}}}},{key:"clip",value:function(t,e,i,a,n,r,s,o){var h,l=o,c=!1;s.length%4>=2?(h=o,o=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(i),h.push(a),h.push(n),h.push(r),h.push(t),h.push(e),o.length=0;for(var u=s,d=s.length-4,f=0;;f+=2){for(var v=u[f],m=u[f+1],g=u[f+2],p=u[f+3],b=v-g,y=m-p,w=h,x=h.length-2,k=o.length,A=0;A<x;A+=2){var S=w[A],C=w[A+1],E=w[A+2],I=w[A+3],O=b*(I-p)-y*(E-g)>0;if(b*(C-p)-y*(S-g)>0){if(O){o.push(E),o.push(I);continue}var M=I-C,T=E-S,F=M*(g-v)-T*(p-m);if(Math.abs(F)>1e-6){var R=(T*(m-C)-M*(v-S))/F;o.push(v+(g-v)*R),o.push(m+(p-m)*R)}else o.push(v),o.push(m)}else if(O){var Y=I-C,L=E-S,j=Y*(g-v)-L*(p-m);if(Math.abs(j)>1e-6){var X=(L*(m-C)-Y*(v-S))/j;o.push(v+(g-v)*X),o.push(m+(p-m)*X)}else o.push(v),o.push(m);o.push(E),o.push(I)}c=!0}if(k==o.length)return l.length=0,!0;if(o.push(o[0]),o.push(o[1]),f==d)break;var B=o;(o=h).length=0,h=B}if(l!=o){l.length=0;for(var P=0,V=o.length-2;P<V;P++)l[P]=o[P]}else l.length=l.length-2;return c}}],[{key:"makeClockwise",value:function(t){for(var e=t,i=t.length,a=e[i-2]*e[1]-e[0]*e[i-1],n=0,r=0,s=0,o=0,h=i-3;o<h;o+=2)n=e[o],r=e[o+1],s=e[o+2],a+=n*e[o+3]-s*r;if(!(a<0))for(var l=0,c=i-2,u=i>>1;l<u;l+=2){var d=e[l],f=e[l+1],v=c-l;e[l]=e[v],e[l+1]=e[v+1],e[v]=d,e[v+1]=f}}}]),t}(),Qe=function(){function t(e){Object(n.a)(this,t),this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return Object(r.a)(t,[{key:"readSkeletonData",value:function(t){var e=this.scale,i=new fe,a="string"===typeof t?JSON.parse(t):t,n=a.skeleton;if(n&&(i.hash=n.hash,i.version=n.spine,i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height,i.fps=n.fps,i.imagesPath=n.images),a.bones)for(var r=0;r<a.bones.length;r++){var s=a.bones[r],o=null,h=ai(s,"parent",null);h&&(o=i.findBone(h));var l=new Zt(i.bones.length,s.name,o);l.length=ai(s,"length",0)*e,l.x=ai(s,"x",0)*e,l.y=ai(s,"y",0)*e,l.rotation=ai(s,"rotation",0),l.scaleX=ai(s,"scaleX",1),l.scaleY=ai(s,"scaleY",1),l.shearX=ai(s,"shearX",0),l.shearY=ai(s,"shearY",0),l.transformMode=d.enumValue(_t,ai(s,"transform","Normal")),l.skinRequired=ai(s,"skin",!1);var u=ai(s,"color",null);u&&l.color.setFromString(u),i.bones.push(l)}if(a.slots)for(var f=0;f<a.slots.length;f++){var v=a.slots[f],m=i.findBone(v.bone);if(!m)throw new Error("Couldn't find bone ".concat(v.bone," for slot ").concat(v.name));var g=new ge(i.slots.length,v.name,m),p=ai(v,"color",null);p&&g.color.setFromString(p);var b=ai(v,"dark",null);b&&(g.darkColor=c.fromString(b)),g.attachmentName=ai(v,"attachment",null),g.blendMode=d.enumValue(le,ai(v,"blend","normal")),i.slots.push(g)}if(a.ik)for(var y=0;y<a.ik.length;y++){var w=a.ik[y],x=new se(w.name);x.order=ai(w,"order",0),x.skinRequired=ai(w,"skin",!1);for(var k=0;k<w.bones.length;k++){var A=i.findBone(w.bones[k]);if(!A)throw new Error("Couldn't find bone ".concat(w.bones[k]," for IK constraint ").concat(w.name,"."));x.bones.push(A)}var S=i.findBone(w.target);if(!S)throw new Error("Couldn't find target bone ".concat(w.target," for IK constraint ").concat(w.name,"."));x.target=S,x.mix=ai(w,"mix",1),x.softness=ai(w,"softness",0)*e,x.bendDirection=ai(w,"bendPositive",!0)?1:-1,x.compress=ai(w,"compress",!1),x.stretch=ai(w,"stretch",!1),x.uniform=ai(w,"uniform",!1),i.ikConstraints.push(x)}if(a.transform)for(var C=0;C<a.transform.length;C++){var E=a.transform[C],I=new be(E.name);I.order=ai(E,"order",0),I.skinRequired=ai(E,"skin",!1);for(var O=0;O<E.bones.length;O++){var M=E.bones[O],T=i.findBone(M);if(!T)throw new Error("Couldn't find bone ".concat(M," for transform constraint ").concat(E.name,"."));I.bones.push(T)}var F=E.target,R=i.findBone(F);if(!R)throw new Error("Couldn't find target bone ".concat(F," for transform constraint ").concat(E.name,"."));I.target=R,I.local=ai(E,"local",!1),I.relative=ai(E,"relative",!1),I.offsetRotation=ai(E,"rotation",0),I.offsetX=ai(E,"x",0)*e,I.offsetY=ai(E,"y",0)*e,I.offsetScaleX=ai(E,"scaleX",0),I.offsetScaleY=ai(E,"scaleY",0),I.offsetShearY=ai(E,"shearY",0),I.mixRotate=ai(E,"mixRotate",1),I.mixX=ai(E,"mixX",1),I.mixY=ai(E,"mixY",I.mixX),I.mixScaleX=ai(E,"mixScaleX",1),I.mixScaleY=ai(E,"mixScaleY",I.mixScaleX),I.mixShearY=ai(E,"mixShearY",1),i.transformConstraints.push(I)}if(a.path)for(var Y=0;Y<a.path.length;Y++){var L=a.path[Y],j=new oe(L.name);j.order=ai(L,"order",0),j.skinRequired=ai(L,"skin",!1);for(var X=0;X<L.bones.length;X++){var B=L.bones[X],P=i.findBone(B);if(!P)throw new Error("Couldn't find bone ".concat(B," for path constraint ").concat(L.name,"."));j.bones.push(P)}var V=L.target,D=i.findSlot(V);if(!D)throw new Error("Couldn't find target slot ".concat(V," for path constraint ").concat(L.name,"."));j.target=D,j.positionMode=d.enumValue(Jt,ai(L,"positionMode","Percent")),j.spacingMode=d.enumValue(Kt,ai(L,"spacingMode","Length")),j.rotateMode=d.enumValue(Qt,ai(L,"rotateMode","Tangent")),j.offsetRotation=ai(L,"rotation",0),j.position=ai(L,"position",0),j.positionMode==Jt.Fixed&&(j.position*=e),j.spacing=ai(L,"spacing",0),j.spacingMode!=Kt.Length&&j.spacingMode!=Kt.Fixed||(j.spacing*=e),j.mixRotate=ai(L,"mixRotate",1),j.mixX=ai(L,"mixX",1),j.mixY=ai(L,"mixY",j.mixX),i.pathConstraints.push(j)}if(a.skins)for(var N=0;N<a.skins.length;N++){var U=a.skins[N],z=new me(U.name);if(U.bones)for(var W=0;W<U.bones.length;W++){var q=U.bones[W],G=i.findBone(q);if(!G)throw new Error("Couldn't find bone ".concat(q," for skin ").concat(U.name,"."));z.bones.push(G)}if(U.ik)for(var _=0;_<U.ik.length;_++){var H=U.ik[_],Z=i.findIkConstraint(H);if(!Z)throw new Error("Couldn't find IK constraint ".concat(H," for skin ").concat(U.name,"."));z.constraints.push(Z)}if(U.transform)for(var J=0;J<U.transform.length;J++){var K=U.transform[J],Q=i.findTransformConstraint(K);if(!Q)throw new Error("Couldn't find transform constraint ".concat(K," for skin ").concat(U.name,"."));z.constraints.push(Q)}if(U.path)for(var $=0;$<U.path.length;$++){var tt=U.path[$],et=i.findPathConstraint(tt);if(!et)throw new Error("Couldn't find path constraint ".concat(tt," for skin ").concat(U.name,"."));z.constraints.push(et)}for(var it in U.attachments){var at=i.findSlot(it);if(!at)throw new Error("Couldn't find slot ".concat(it," for skin ").concat(U.name,"."));var nt=U.attachments[it];for(var rt in nt){var st=this.readAttachment(nt[rt],z,at.index,rt,i);st&&z.setAttachment(at.index,rt,st)}}i.skins.push(z),"default"==z.name&&(i.defaultSkin=z)}for(var ot=0,ht=this.linkedMeshes.length;ot<ht;ot++){var lt=this.linkedMeshes[ot],ct=lt.skin?i.findSkin(lt.skin):i.defaultSkin;if(!ct)throw new Error("Skin not found: ".concat(lt.skin));var ut=ct.getAttachment(lt.slotIndex,lt.parent);if(!ut)throw new Error("Parent mesh not found: ".concat(lt.parent));lt.mesh.timelineAttachment=lt.inheritTimeline?ut:lt.mesh,lt.mesh.setParentMesh(ut),null!=lt.mesh.region&&lt.mesh.updateRegion()}if(this.linkedMeshes.length=0,a.events)for(var dt in a.events){var ft=a.events[dt],vt=new ne(dt);vt.intValue=ai(ft,"int",0),vt.floatValue=ai(ft,"float",0),vt.stringValue=ai(ft,"string",""),vt.audioPath=ai(ft,"audio",null),vt.audioPath&&(vt.volume=ai(ft,"volume",1),vt.balance=ai(ft,"balance",0)),i.events.push(vt)}if(a.animations)for(var mt in a.animations){var gt=a.animations[mt];this.readAnimation(gt,mt,i)}return i}},{key:"readAttachment",value:function(t,e,i,a,n){var r=this.scale;switch(a=ai(t,"name",a),ai(t,"type","region")){case"region":var s=ai(t,"path",a),o=this.readSequence(ai(t,"sequence",null)),h=this.attachmentLoader.newRegionAttachment(e,a,s,o);if(!h)return null;h.path=s,h.x=ai(t,"x",0)*r,h.y=ai(t,"y",0)*r,h.scaleX=ai(t,"scaleX",1),h.scaleY=ai(t,"scaleY",1),h.rotation=ai(t,"rotation",0),h.width=t.width*r,h.height=t.height*r,h.sequence=o;var l=ai(t,"color",null);return l&&h.color.setFromString(l),null!=h.region&&h.updateRegion(),h;case"boundingbox":var c=this.attachmentLoader.newBoundingBoxAttachment(e,a);if(!c)return null;this.readVertices(t,c,t.vertexCount<<1);var u=ai(t,"color",null);return u&&c.color.setFromString(u),c;case"mesh":case"linkedmesh":var f=ai(t,"path",a),v=this.readSequence(ai(t,"sequence",null)),m=this.attachmentLoader.newMeshAttachment(e,a,f,v);if(!m)return null;m.path=f;var g=ai(t,"color",null);g&&m.color.setFromString(g),m.width=ai(t,"width",0)*r,m.height=ai(t,"height",0)*r,m.sequence=v;var p=ai(t,"parent",null);if(p)return this.linkedMeshes.push(new $e(m,ai(t,"skin",null),i,p,ai(t,"timelines",!0))),m;var b=t.uvs;return this.readVertices(t,m,b.length),m.triangles=t.triangles,m.regionUVs=b,null!=m.region&&m.updateRegion(),m.edges=ai(t,"edges",null),m.hullLength=2*ai(t,"hull",0),m;case"path":var y=this.attachmentLoader.newPathAttachment(e,a);if(!y)return null;y.closed=ai(t,"closed",!1),y.constantSpeed=ai(t,"constantSpeed",!0);var w=t.vertexCount;this.readVertices(t,y,w<<1);for(var x=d.newArray(w/3,0),k=0;k<t.lengths.length;k++)x[k]=t.lengths[k]*r;y.lengths=x;var A=ai(t,"color",null);return A&&y.color.setFromString(A),y;case"point":var S=this.attachmentLoader.newPointAttachment(e,a);if(!S)return null;S.x=ai(t,"x",0)*r,S.y=ai(t,"y",0)*r,S.rotation=ai(t,"rotation",0);var C=ai(t,"color",null);return C&&S.color.setFromString(C),S;case"clipping":var E=this.attachmentLoader.newClippingAttachment(e,a);if(!E)return null;var I=ai(t,"end",null);I&&(E.endSlot=n.findSlot(I));var O=t.vertexCount;this.readVertices(t,E,O<<1);var M=ai(t,"color",null);return M&&E.color.setFromString(M),E}return null}},{key:"readSequence",value:function(t){if(null==t)return null;var e=new y(ai(t,"count",0));return e.start=ai(t,"start",1),e.digits=ai(t,"digits",0),e.setupIndex=ai(t,"setup",0),e}},{key:"readVertices",value:function(t,e,i){var a=this.scale;e.worldVerticesLength=i;var n=t.vertices;if(i!=n.length){for(var r=new Array,s=new Array,o=0,h=n.length;o<h;){var l=n[o++];s.push(l);for(var c=o+4*l;o<c;o+=4)s.push(n[o]),r.push(n[o+1]*a),r.push(n[o+2]*a),r.push(n[o+3])}e.bones=s,e.vertices=d.toFloatArray(r)}else{var u=d.toFloatArray(n);if(1!=a)for(var f=0,v=n.length;f<v;f++)u[f]*=a;e.vertices=u}}},{key:"readAnimation",value:function(t,e,i){var a=this.scale,n=new Array;if(t.slots)for(var r in t.slots){var s=t.slots[r],o=i.findSlot(r);if(!o)throw new Error("Slot not found: "+r);var h=o.index;for(var l in s){var u=s[l];if(u){var f=u.length;if("attachment"==l){for(var v=new lt(f,h),m=0;m<f;m++){var g=u[m];v.setFrame(m,ai(g,"time",0),ai(g,"name",null))}n.push(v)}else if("rgba"==l){for(var p=new nt(f,f<<2,h),y=u[0],w=ai(y,"time",0),x=c.fromString(y.color),k=0,S=0;;k++){p.setFrame(k,w,x.r,x.g,x.b,x.a);var C=u[k+1];if(!C){p.shrink(S);break}var E=ai(C,"time",0),I=c.fromString(C.color),O=y.curve;O&&(S=ii(O,p,S,k,0,w,E,x.r,I.r,1),S=ii(O,p,S,k,1,w,E,x.g,I.g,1),S=ii(O,p,S,k,2,w,E,x.b,I.b,1),S=ii(O,p,S,k,3,w,E,x.a,I.a,1)),w=E,x=I,y=C}n.push(p)}else if("rgb"==l){for(var M=new rt(f,3*f,h),T=u[0],F=ai(T,"time",0),R=c.fromString(T.color),Y=0,L=0;;Y++){M.setFrame(Y,F,R.r,R.g,R.b);var j=u[Y+1];if(!j){M.shrink(L);break}var X=ai(j,"time",0),B=c.fromString(j.color),P=T.curve;P&&(L=ii(P,M,L,Y,0,F,X,R.r,B.r,1),L=ii(P,M,L,Y,1,F,X,R.g,B.g,1),L=ii(P,M,L,Y,2,F,X,R.b,B.b,1)),F=X,R=B,T=j}n.push(M)}else if("alpha"==l)n.push(ti(u,new st(f,f,h),0,1));else if("rgba2"==l){for(var V=new ot(f,7*f,h),D=u[0],N=ai(D,"time",0),U=c.fromString(D.light),z=c.fromString(D.dark),W=0,q=0;;W++){V.setFrame(W,N,U.r,U.g,U.b,U.a,z.r,z.g,z.b);var G=u[W+1];if(!G){V.shrink(q);break}var _=ai(G,"time",0),yt=c.fromString(G.light),wt=c.fromString(G.dark),xt=D.curve;xt&&(q=ii(xt,V,q,W,0,N,_,U.r,yt.r,1),q=ii(xt,V,q,W,1,N,_,U.g,yt.g,1),q=ii(xt,V,q,W,2,N,_,U.b,yt.b,1),q=ii(xt,V,q,W,3,N,_,U.a,yt.a,1),q=ii(xt,V,q,W,4,N,_,z.r,wt.r,1),q=ii(xt,V,q,W,5,N,_,z.g,wt.g,1),q=ii(xt,V,q,W,6,N,_,z.b,wt.b,1)),N=_,U=yt,z=wt,D=G}n.push(V)}else if("rgb2"==l){for(var kt=new ht(f,6*f,h),At=u[0],St=ai(At,"time",0),Ct=c.fromString(At.light),Et=c.fromString(At.dark),It=0,Ot=0;;It++){kt.setFrame(It,St,Ct.r,Ct.g,Ct.b,Et.r,Et.g,Et.b);var Mt=u[It+1];if(!Mt){kt.shrink(Ot);break}var Tt=ai(Mt,"time",0),Ft=c.fromString(Mt.light),Rt=c.fromString(Mt.dark),Yt=At.curve;Yt&&(Ot=ii(Yt,kt,Ot,It,0,St,Tt,Ct.r,Ft.r,1),Ot=ii(Yt,kt,Ot,It,1,St,Tt,Ct.g,Ft.g,1),Ot=ii(Yt,kt,Ot,It,2,St,Tt,Ct.b,Ft.b,1),Ot=ii(Yt,kt,Ot,It,3,St,Tt,Et.r,Rt.r,1),Ot=ii(Yt,kt,Ot,It,4,St,Tt,Et.g,Rt.g,1),Ot=ii(Yt,kt,Ot,It,5,St,Tt,Et.b,Rt.b,1)),St=Tt,Ct=Ft,Et=Rt,At=Mt}n.push(kt)}}}}if(t.bones)for(var Lt in t.bones){var jt=t.bones[Lt],Xt=i.findBone(Lt);if(!Xt)throw new Error("Bone not found: "+Lt);var Bt=Xt.index;for(var Pt in jt){var Vt=jt[Pt],Dt=Vt.length;if(0!=Dt)if("rotate"===Pt)n.push(ti(Vt,new H(Dt,Dt,Bt),0,1));else if("translate"===Pt){var Nt=new Z(Dt,Dt<<1,Bt);n.push(ei(Vt,Nt,"x","y",0,a))}else if("translatex"===Pt){var Ut=new J(Dt,Dt,Bt);n.push(ti(Vt,Ut,0,a))}else if("translatey"===Pt){var zt=new K(Dt,Dt,Bt);n.push(ti(Vt,zt,0,a))}else if("scale"===Pt){var Wt=new Q(Dt,Dt<<1,Bt);n.push(ei(Vt,Wt,"x","y",1,1))}else if("scalex"===Pt){var qt=new $(Dt,Dt,Bt);n.push(ti(Vt,qt,1,1))}else if("scaley"===Pt){var Gt=new tt(Dt,Dt,Bt);n.push(ti(Vt,Gt,1,1))}else if("shear"===Pt){var _t=new et(Dt,Dt<<1,Bt);n.push(ei(Vt,_t,"x","y",0,1))}else if("shearx"===Pt){var Ht=new it(Dt,Dt,Bt);n.push(ti(Vt,Ht,0,1))}else if("sheary"===Pt){var Zt=new at(Dt,Dt,Bt);n.push(ti(Vt,Zt,0,1))}}}if(t.ik)for(var Qt in t.ik){var $t=t.ik[Qt],te=$t[0];if(te){var ee=i.findIkConstraint(Qt);if(!ee)throw new Error("IK Constraint not found: "+Qt);for(var ie=i.ikConstraints.indexOf(ee),ne=new ft($t.length,$t.length<<1,ie),re=ai(te,"time",0),se=ai(te,"mix",1),oe=ai(te,"softness",0)*a,he=0,le=0;;he++){ne.setFrame(he,re,se,oe,ai(te,"bendPositive",!0)?1:-1,ai(te,"compress",!1),ai(te,"stretch",!1));var ce=$t[he+1];if(!ce){ne.shrink(le);break}var ue=ai(ce,"time",0),de=ai(ce,"mix",1),fe=ai(ce,"softness",0)*a,ve=te.curve;ve&&(le=ii(ve,ne,le,he,0,re,ue,se,de,1),le=ii(ve,ne,le,he,1,re,ue,oe,fe,a)),re=ue,se=de,oe=fe,te=ce}n.push(ne)}}if(t.transform)for(var me in t.transform){var ge=t.transform[me],pe=ge[0];if(pe){var be=i.findTransformConstraint(me);if(!be)throw new Error("Transform constraint not found: "+me);for(var ye=i.transformConstraints.indexOf(be),we=new vt(ge.length,6*ge.length,ye),xe=ai(pe,"time",0),ke=ai(pe,"mixRotate",1),Ae=ai(pe,"mixX",1),Se=ai(pe,"mixY",Ae),Ce=ai(pe,"mixScaleX",1),Ee=ai(pe,"mixScaleY",Ce),Ie=ai(pe,"mixShearY",1),Oe=0,Me=0;;Oe++){we.setFrame(Oe,xe,ke,Ae,Se,Ce,Ee,Ie);var Te=ge[Oe+1];if(!Te){we.shrink(Me);break}var Fe=ai(Te,"time",0),Re=ai(Te,"mixRotate",1),Ye=ai(Te,"mixX",1),Le=ai(Te,"mixY",Ye),je=ai(Te,"mixScaleX",1),Xe=ai(Te,"mixScaleY",je),Be=ai(Te,"mixShearY",1),Pe=pe.curve;Pe&&(Me=ii(Pe,we,Me,Oe,0,xe,Fe,ke,Re,1),Me=ii(Pe,we,Me,Oe,1,xe,Fe,Ae,Ye,1),Me=ii(Pe,we,Me,Oe,2,xe,Fe,Se,Le,1),Me=ii(Pe,we,Me,Oe,3,xe,Fe,Ce,je,1),Me=ii(Pe,we,Me,Oe,4,xe,Fe,Ee,Xe,1),Me=ii(Pe,we,Me,Oe,5,xe,Fe,Ie,Be,1)),xe=Fe,ke=Re,Ae=Ye,Se=Le,Ce=je,Ee=Xe,Ce=je,pe=Te}n.push(we)}}if(t.path)for(var Ve in t.path){var De=t.path[Ve],Ne=i.findPathConstraint(Ve);if(!Ne)throw new Error("Path constraint not found: "+Ve);var Ue=i.pathConstraints.indexOf(Ne);for(var ze in De){var We=De[ze],qe=We[0];if(qe){var Ge=We.length;if("position"===ze){var _e=new mt(Ge,Ge,Ue);n.push(ti(We,_e,0,Ne.positionMode==Jt.Fixed?a:1))}else if("spacing"===ze){var He=new gt(Ge,Ge,Ue);n.push(ti(We,He,0,Ne.spacingMode==Kt.Length||Ne.spacingMode==Kt.Fixed?a:1))}else if("mix"===ze){for(var Ze=new pt(Ge,3*Ge,Ue),Je=ai(qe,"time",0),Ke=ai(qe,"mixRotate",1),Qe=ai(qe,"mixX",1),$e=ai(qe,"mixY",Qe),ni=0,ri=0;;ni++){Ze.setFrame(ni,Je,Ke,Qe,$e);var si=We[ni+1];if(!si){Ze.shrink(ri);break}var oi=ai(si,"time",0),hi=ai(si,"mixRotate",1),li=ai(si,"mixX",1),ci=ai(si,"mixY",li),ui=qe.curve;ui&&(ri=ii(ui,Ze,ri,ni,0,Je,oi,Ke,hi,1),ri=ii(ui,Ze,ri,ni,1,Je,oi,Qe,li,1),ri=ii(ui,Ze,ri,ni,2,Je,oi,$e,ci,1)),Je=oi,Ke=hi,Qe=li,$e=ci,qe=si}n.push(Ze)}}}}if(t.attachments)for(var di in t.attachments){var fi=t.attachments[di],vi=i.findSkin(di);if(!vi)throw new Error("Skin not found: "+di);for(var mi in fi){var gi=fi[mi],pi=i.findSlot(mi);if(!pi)throw new Error("Slot not found: "+mi);var bi=pi.index;for(var yi in gi){var wi=gi[yi],xi=vi.getAttachment(bi,yi);for(var ki in wi){var Ai=wi[ki],Si=Ai[0];if(Si)if("deform"==ki){for(var Ci=xi.bones,Ei=xi.vertices,Ii=Ci?Ei.length/3*2:Ei.length,Oi=new ct(Ai.length,Ai.length,bi,xi),Mi=ai(Si,"time",0),Ti=0,Fi=0;;Ti++){var Ri=void 0,Yi=ai(Si,"vertices",null);if(Yi){Ri=d.newFloatArray(Ii);var Li=ai(Si,"offset",0);if(d.arrayCopy(Yi,0,Ri,Li,Yi.length),1!=a)for(var ji=Li,Xi=ji+Yi.length;ji<Xi;ji++)Ri[ji]*=a;if(!Ci)for(var Bi=0;Bi<Ii;Bi++)Ri[Bi]+=Ei[Bi]}else Ri=Ci?d.newFloatArray(Ii):Ei;Oi.setFrame(Ti,Mi,Ri);var Pi=Ai[Ti+1];if(!Pi){Oi.shrink(Fi);break}var Vi=ai(Pi,"time",0),Di=Si.curve;Di&&(Fi=ii(Di,Oi,Fi,Ti,0,Mi,Vi,0,1,1)),Mi=Vi,Si=Pi}n.push(Oi)}else if("sequence"==ki){for(var Ni=new bt(Ai.length,bi,xi),Ui=0,zi=0;zi<Ai.length;zi++){var Wi=ai(Si,"delay",Ui),qi=ai(Si,"time",0),Gi=b[ai(Si,"mode","hold")],_i=ai(Si,"index",0);Ni.setFrame(zi,qi,Gi,_i,Wi),Ui=Wi,Si=Ai[zi+1]}n.push(Ni)}}}}}if(t.drawOrder){for(var Hi=new dt(t.drawOrder.length),Zi=i.slots.length,Ji=0,Ki=0;Ki<t.drawOrder.length;Ki++,Ji++){var Qi=t.drawOrder[Ki],$i=null,ta=ai(Qi,"offsets",null);if(ta){$i=d.newArray(Zi,-1);for(var ea=d.newArray(Zi-ta.length,0),ia=0,aa=0,na=0;na<ta.length;na++){var ra=ta[na],sa=i.findSlot(ra.slot);if(!sa)throw new Error("Slot not found: "+sa);for(var oa=sa.index;ia!=oa;)ea[aa++]=ia++;$i[ia+ra.offset]=ia++}for(;ia<Zi;)ea[aa++]=ia++;for(var ha=Zi-1;ha>=0;ha--)-1==$i[ha]&&($i[ha]=ea[--aa])}Hi.setFrame(Ji,ai(Qi,"time",0),$i)}n.push(Hi)}if(t.events){for(var la=new ut(t.events.length),ca=0,ua=0;ua<t.events.length;ua++,ca++){var da=t.events[ua],fa=i.findEvent(da.name);if(!fa)throw new Error("Event not found: "+da.name);var va=new ae(d.toSinglePrecision(ai(da,"time",0)),fa);va.intValue=ai(da,"int",fa.intValue),va.floatValue=ai(da,"float",fa.floatValue),va.stringValue=ai(da,"string",fa.stringValue),va.data.audioPath&&(va.volume=ai(da,"volume",1),va.balance=ai(da,"balance",0)),la.setFrame(ca,va)}n.push(la)}for(var ma=0,ga=0,pa=n.length;ga<pa;ga++)ma=Math.max(ma,n[ga].getDuration());i.animations.push(new A(e,n,ma))}}]),t}(),$e=function t(e,i,a,r,s){Object(n.a)(this,t),this.mesh=e,this.skin=i,this.slotIndex=a,this.parent=r,this.inheritTimeline=s};function ti(t,e,i,a){for(var n=t[0],r=ai(n,"time",0),s=ai(n,"value",i)*a,o=0,h=0;;h++){e.setFrame(h,r,s);var l=t[h+1];if(!l)return e.shrink(o),e;var c=ai(l,"time",0),u=ai(l,"value",i)*a;n.curve&&(o=ii(n.curve,e,o,h,0,r,c,s,u,a)),r=c,s=u,n=l}}function ei(t,e,i,a,n,r){for(var s=t[0],o=ai(s,"time",0),h=ai(s,i,n)*r,l=ai(s,a,n)*r,c=0,u=0;;u++){e.setFrame(u,o,h,l);var d=t[u+1];if(!d)return e.shrink(c),e;var f=ai(d,"time",0),v=ai(d,i,n)*r,m=ai(d,a,n)*r,g=s.curve;g&&(c=ii(g,e,c,u,0,o,f,h,v,r),c=ii(g,e,c,u,1,o,f,l,m,r)),o=f,h=v,l=m,s=d}}function ii(t,e,i,a,n,r,s,o,h,l){if("stepped"==t)return e.setStepped(a),i;var c=n<<2,u=t[c],d=t[c+1]*l,f=t[c+2],v=t[c+3]*l;return e.setBezier(i,a,n,r,o,u,d,f,v,s,h),i+1}function ai(t,e,i){return void 0!==t[e]?t[e]:i}!function(){var t;"undefined"===typeof Math.fround&&(Math.fround=(t=new Float32Array(1),function(e){return t[0]=e,t[0]}))}();var ni=function(){function t(e){var i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{alpha:"true"};if(Object(n.a)(this,t),this.restorables=new Array,e instanceof WebGLRenderingContext||"undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext)this.gl=e,this.canvas=this.gl.canvas;else{var r=e;this.gl=r.getContext("webgl2",a)||r.getContext("webgl",a),this.canvas=r,r.addEventListener("webglcontextlost",(function(t){t&&t.preventDefault()})),r.addEventListener("webglcontextrestored",(function(t){for(var e=0,a=i.restorables.length;e<a;e++)i.restorables[e].restore()}))}}return Object(r.a)(t,[{key:"addRestorable",value:function(t){this.restorables.push(t)}},{key:"removeRestorable",value:function(t){var e=this.restorables.indexOf(t);e>-1&&this.restorables.splice(e,1)}}]),t}(),ri=770,si=771,oi=function(){function t(){Object(n.a)(this,t)}return Object(r.a)(t,null,[{key:"getDestGLBlendMode",value:function(t){switch(t){case le.Normal:return si;case le.Additive:return 1;case le.Multiply:case le.Screen:return si;default:throw new Error("Unknown blend mode: "+t)}}},{key:"getSourceColorGLBlendMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(t){case le.Normal:case le.Additive:return e?1:ri;case le.Multiply:return 774;case le.Screen:return 1;default:throw new Error("Unknown blend mode: "+t)}}},{key:"getSourceAlphaGLBlendMode",value:function(t){switch(t){case le.Normal:case le.Additive:return 1;case le.Multiply:return si;case le.Screen:return 769;default:throw new Error("Unknown blend mode: "+t)}}}]),t}(),hi=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t,a){var r,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(n.a)(this,i),(r=e.call(this,a)).texture=null,r.boundUnit=0,r.useMipMaps=!1,r.context=t instanceof ni?t:new ni(t),r.useMipMaps=s,r.restore(),r.context.addRestorable(Object(h.a)(r)),r}return Object(r.a)(i,[{key:"setFilters",value:function(t,e){var a=this.context.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,i.validateMagFilter(e)),this.useMipMaps=i.usesMipMaps(t),this.useMipMaps&&a.generateMipmap(a.TEXTURE_2D)}},{key:"setWraps",value:function(t,e){var i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e)}},{key:"update",value:function(t){var e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),i.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)}},{key:"restore",value:function(){this.texture=null,this.update(this.useMipMaps)}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.context.gl;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}},{key:"unbind",value:function(){var t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}},{key:"dispose",value:function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}}],[{key:"validateMagFilter",value:function(t){switch(t){case At.MipMap:case At.MipMapLinearLinear:case At.MipMapLinearNearest:case At.MipMapNearestLinear:case At.MipMapNearestNearest:return At.Linear;default:return t}}},{key:"usesMipMaps",value:function(t){switch(t){case At.MipMap:case At.MipMapLinearLinear:case At.MipMapLinearNearest:case At.MipMapNearestLinear:case At.MipMapNearestNearest:return!0;default:return!1}}}]),i}(Bt);hi.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1;var li=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ie;return Object(n.a)(this,i),e.call(this,(function(e){return new hi(t,e)}),a,r)}return i}(ee),ci=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(n.a)(this,t),this.x=0,this.y=0,this.z=0,this.x=e,this.y=i,this.z=a}return Object(r.a)(t,[{key:"setFrom",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"set",value:function(t,e,i){return this.x=t,this.y=e,this.z=i,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"normalize",value:function(){var t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}},{key:"cross",value:function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}},{key:"multiply",value:function(t){var e=t.values;return this.set(this.x*e[ui]+this.y*e[di]+this.z*e[fi]+e[vi],this.x*e[mi]+this.y*e[gi]+this.z*e[pi]+e[bi],this.x*e[yi]+this.y*e[wi]+this.z*e[xi]+e[ki])}},{key:"project",value:function(t){var e=t.values,i=1/(this.x*e[Ai]+this.y*e[Si]+this.z*e[Ci]+e[Ei]);return this.set((this.x*e[ui]+this.y*e[di]+this.z*e[fi]+e[vi])*i,(this.x*e[mi]+this.y*e[gi]+this.z*e[pi]+e[bi])*i,(this.x*e[yi]+this.y*e[wi]+this.z*e[xi]+e[ki])*i)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"distance",value:function(t){var e=t.x-this.x,i=t.y-this.y,a=t.z-this.z;return Math.sqrt(e*e+i*i+a*a)}}]),t}(),ui=0,di=4,fi=8,vi=12,mi=1,gi=5,pi=9,bi=13,yi=2,wi=6,xi=10,ki=14,Ai=3,Si=7,Ci=11,Ei=15,Ii=function(){function t(){Object(n.a)(this,t),this.temp=new Float32Array(16),this.values=new Float32Array(16);var e=this.values;e[ui]=1,e[gi]=1,e[xi]=1,e[Ei]=1}return Object(r.a)(t,[{key:"set",value:function(t){return this.values.set(t),this}},{key:"transpose",value:function(){var t=this.temp,e=this.values;return t[ui]=e[ui],t[di]=e[mi],t[fi]=e[yi],t[vi]=e[Ai],t[mi]=e[di],t[gi]=e[gi],t[pi]=e[wi],t[bi]=e[Si],t[yi]=e[fi],t[wi]=e[pi],t[xi]=e[xi],t[ki]=e[Ci],t[Ai]=e[vi],t[Si]=e[bi],t[Ci]=e[ki],t[Ei]=e[Ei],this.set(t)}},{key:"identity",value:function(){var t=this.values;return t[ui]=1,t[di]=0,t[fi]=0,t[vi]=0,t[mi]=0,t[gi]=1,t[pi]=0,t[bi]=0,t[yi]=0,t[wi]=0,t[xi]=1,t[ki]=0,t[Ai]=0,t[Si]=0,t[Ci]=0,t[Ei]=1,this}},{key:"invert",value:function(){var t=this.values,e=this.temp,i=t[Ai]*t[wi]*t[pi]*t[vi]-t[yi]*t[Si]*t[pi]*t[vi]-t[Ai]*t[gi]*t[xi]*t[vi]+t[mi]*t[Si]*t[xi]*t[vi]+t[yi]*t[gi]*t[Ci]*t[vi]-t[mi]*t[wi]*t[Ci]*t[vi]-t[Ai]*t[wi]*t[fi]*t[bi]+t[yi]*t[Si]*t[fi]*t[bi]+t[Ai]*t[di]*t[xi]*t[bi]-t[ui]*t[Si]*t[xi]*t[bi]-t[yi]*t[di]*t[Ci]*t[bi]+t[ui]*t[wi]*t[Ci]*t[bi]+t[Ai]*t[gi]*t[fi]*t[ki]-t[mi]*t[Si]*t[fi]*t[ki]-t[Ai]*t[di]*t[pi]*t[ki]+t[ui]*t[Si]*t[pi]*t[ki]+t[mi]*t[di]*t[Ci]*t[ki]-t[ui]*t[gi]*t[Ci]*t[ki]-t[yi]*t[gi]*t[fi]*t[Ei]+t[mi]*t[wi]*t[fi]*t[Ei]+t[yi]*t[di]*t[pi]*t[Ei]-t[ui]*t[wi]*t[pi]*t[Ei]-t[mi]*t[di]*t[xi]*t[Ei]+t[ui]*t[gi]*t[xi]*t[Ei];if(0==i)throw new Error("non-invertible matrix");var a=1/i;return e[ui]=t[pi]*t[ki]*t[Si]-t[bi]*t[xi]*t[Si]+t[bi]*t[wi]*t[Ci]-t[gi]*t[ki]*t[Ci]-t[pi]*t[wi]*t[Ei]+t[gi]*t[xi]*t[Ei],e[di]=t[vi]*t[xi]*t[Si]-t[fi]*t[ki]*t[Si]-t[vi]*t[wi]*t[Ci]+t[di]*t[ki]*t[Ci]+t[fi]*t[wi]*t[Ei]-t[di]*t[xi]*t[Ei],e[fi]=t[fi]*t[bi]*t[Si]-t[vi]*t[pi]*t[Si]+t[vi]*t[gi]*t[Ci]-t[di]*t[bi]*t[Ci]-t[fi]*t[gi]*t[Ei]+t[di]*t[pi]*t[Ei],e[vi]=t[vi]*t[pi]*t[wi]-t[fi]*t[bi]*t[wi]-t[vi]*t[gi]*t[xi]+t[di]*t[bi]*t[xi]+t[fi]*t[gi]*t[ki]-t[di]*t[pi]*t[ki],e[mi]=t[bi]*t[xi]*t[Ai]-t[pi]*t[ki]*t[Ai]-t[bi]*t[yi]*t[Ci]+t[mi]*t[ki]*t[Ci]+t[pi]*t[yi]*t[Ei]-t[mi]*t[xi]*t[Ei],e[gi]=t[fi]*t[ki]*t[Ai]-t[vi]*t[xi]*t[Ai]+t[vi]*t[yi]*t[Ci]-t[ui]*t[ki]*t[Ci]-t[fi]*t[yi]*t[Ei]+t[ui]*t[xi]*t[Ei],e[pi]=t[vi]*t[pi]*t[Ai]-t[fi]*t[bi]*t[Ai]-t[vi]*t[mi]*t[Ci]+t[ui]*t[bi]*t[Ci]+t[fi]*t[mi]*t[Ei]-t[ui]*t[pi]*t[Ei],e[bi]=t[fi]*t[bi]*t[yi]-t[vi]*t[pi]*t[yi]+t[vi]*t[mi]*t[xi]-t[ui]*t[bi]*t[xi]-t[fi]*t[mi]*t[ki]+t[ui]*t[pi]*t[ki],e[yi]=t[gi]*t[ki]*t[Ai]-t[bi]*t[wi]*t[Ai]+t[bi]*t[yi]*t[Si]-t[mi]*t[ki]*t[Si]-t[gi]*t[yi]*t[Ei]+t[mi]*t[wi]*t[Ei],e[wi]=t[vi]*t[wi]*t[Ai]-t[di]*t[ki]*t[Ai]-t[vi]*t[yi]*t[Si]+t[ui]*t[ki]*t[Si]+t[di]*t[yi]*t[Ei]-t[ui]*t[wi]*t[Ei],e[xi]=t[di]*t[bi]*t[Ai]-t[vi]*t[gi]*t[Ai]+t[vi]*t[mi]*t[Si]-t[ui]*t[bi]*t[Si]-t[di]*t[mi]*t[Ei]+t[ui]*t[gi]*t[Ei],e[ki]=t[vi]*t[gi]*t[yi]-t[di]*t[bi]*t[yi]-t[vi]*t[mi]*t[wi]+t[ui]*t[bi]*t[wi]+t[di]*t[mi]*t[ki]-t[ui]*t[gi]*t[ki],e[Ai]=t[pi]*t[wi]*t[Ai]-t[gi]*t[xi]*t[Ai]-t[pi]*t[yi]*t[Si]+t[mi]*t[xi]*t[Si]+t[gi]*t[yi]*t[Ci]-t[mi]*t[wi]*t[Ci],e[Si]=t[di]*t[xi]*t[Ai]-t[fi]*t[wi]*t[Ai]+t[fi]*t[yi]*t[Si]-t[ui]*t[xi]*t[Si]-t[di]*t[yi]*t[Ci]+t[ui]*t[wi]*t[Ci],e[Ci]=t[fi]*t[gi]*t[Ai]-t[di]*t[pi]*t[Ai]-t[fi]*t[mi]*t[Si]+t[ui]*t[pi]*t[Si]+t[di]*t[mi]*t[Ci]-t[ui]*t[gi]*t[Ci],e[Ei]=t[di]*t[pi]*t[yi]-t[fi]*t[gi]*t[yi]+t[fi]*t[mi]*t[wi]-t[ui]*t[pi]*t[wi]-t[di]*t[mi]*t[xi]+t[ui]*t[gi]*t[xi],t[ui]=e[ui]*a,t[di]=e[di]*a,t[fi]=e[fi]*a,t[vi]=e[vi]*a,t[mi]=e[mi]*a,t[gi]=e[gi]*a,t[pi]=e[pi]*a,t[bi]=e[bi]*a,t[yi]=e[yi]*a,t[wi]=e[wi]*a,t[xi]=e[xi]*a,t[ki]=e[ki]*a,t[Ai]=e[Ai]*a,t[Si]=e[Si]*a,t[Ci]=e[Ci]*a,t[Ei]=e[Ei]*a,this}},{key:"determinant",value:function(){var t=this.values;return t[Ai]*t[wi]*t[pi]*t[vi]-t[yi]*t[Si]*t[pi]*t[vi]-t[Ai]*t[gi]*t[xi]*t[vi]+t[mi]*t[Si]*t[xi]*t[vi]+t[yi]*t[gi]*t[Ci]*t[vi]-t[mi]*t[wi]*t[Ci]*t[vi]-t[Ai]*t[wi]*t[fi]*t[bi]+t[yi]*t[Si]*t[fi]*t[bi]+t[Ai]*t[di]*t[xi]*t[bi]-t[ui]*t[Si]*t[xi]*t[bi]-t[yi]*t[di]*t[Ci]*t[bi]+t[ui]*t[wi]*t[Ci]*t[bi]+t[Ai]*t[gi]*t[fi]*t[ki]-t[mi]*t[Si]*t[fi]*t[ki]-t[Ai]*t[di]*t[pi]*t[ki]+t[ui]*t[Si]*t[pi]*t[ki]+t[mi]*t[di]*t[Ci]*t[ki]-t[ui]*t[gi]*t[Ci]*t[ki]-t[yi]*t[gi]*t[fi]*t[Ei]+t[mi]*t[wi]*t[fi]*t[Ei]+t[yi]*t[di]*t[pi]*t[Ei]-t[ui]*t[wi]*t[pi]*t[Ei]-t[mi]*t[di]*t[xi]*t[Ei]+t[ui]*t[gi]*t[xi]*t[Ei]}},{key:"translate",value:function(t,e,i){var a=this.values;return a[vi]+=t,a[bi]+=e,a[ki]+=i,this}},{key:"copy",value:function(){return(new t).set(this.values)}},{key:"projection",value:function(t,e,i,a){this.identity();var n=1/Math.tan(i*(Math.PI/180)/2),r=(e+t)/(t-e),s=2*e*t/(t-e),o=this.values;return o[ui]=n/a,o[mi]=0,o[yi]=0,o[Ai]=0,o[di]=0,o[gi]=n,o[wi]=0,o[Si]=0,o[fi]=0,o[pi]=0,o[xi]=r,o[Ci]=-1,o[vi]=0,o[bi]=0,o[ki]=s,o[Ei]=0,this}},{key:"ortho2d",value:function(t,e,i,a){return this.ortho(t,t+i,e,e+a,0,1)}},{key:"ortho",value:function(t,e,i,a,n,r){this.identity();var s=2/(e-t),o=2/(a-i),h=-2/(r-n),l=-(e+t)/(e-t),c=-(a+i)/(a-i),u=-(r+n)/(r-n),d=this.values;return d[ui]=s,d[mi]=0,d[yi]=0,d[Ai]=0,d[di]=0,d[gi]=o,d[wi]=0,d[Si]=0,d[fi]=0,d[pi]=0,d[xi]=h,d[Ci]=0,d[vi]=l,d[bi]=c,d[ki]=u,d[Ei]=1,this}},{key:"multiply",value:function(t){var e=this.temp,i=this.values,a=t.values;return e[ui]=i[ui]*a[ui]+i[di]*a[mi]+i[fi]*a[yi]+i[vi]*a[Ai],e[di]=i[ui]*a[di]+i[di]*a[gi]+i[fi]*a[wi]+i[vi]*a[Si],e[fi]=i[ui]*a[fi]+i[di]*a[pi]+i[fi]*a[xi]+i[vi]*a[Ci],e[vi]=i[ui]*a[vi]+i[di]*a[bi]+i[fi]*a[ki]+i[vi]*a[Ei],e[mi]=i[mi]*a[ui]+i[gi]*a[mi]+i[pi]*a[yi]+i[bi]*a[Ai],e[gi]=i[mi]*a[di]+i[gi]*a[gi]+i[pi]*a[wi]+i[bi]*a[Si],e[pi]=i[mi]*a[fi]+i[gi]*a[pi]+i[pi]*a[xi]+i[bi]*a[Ci],e[bi]=i[mi]*a[vi]+i[gi]*a[bi]+i[pi]*a[ki]+i[bi]*a[Ei],e[yi]=i[yi]*a[ui]+i[wi]*a[mi]+i[xi]*a[yi]+i[ki]*a[Ai],e[wi]=i[yi]*a[di]+i[wi]*a[gi]+i[xi]*a[wi]+i[ki]*a[Si],e[xi]=i[yi]*a[fi]+i[wi]*a[pi]+i[xi]*a[xi]+i[ki]*a[Ci],e[ki]=i[yi]*a[vi]+i[wi]*a[bi]+i[xi]*a[ki]+i[ki]*a[Ei],e[Ai]=i[Ai]*a[ui]+i[Si]*a[mi]+i[Ci]*a[yi]+i[Ei]*a[Ai],e[Si]=i[Ai]*a[di]+i[Si]*a[gi]+i[Ci]*a[wi]+i[Ei]*a[Si],e[Ci]=i[Ai]*a[fi]+i[Si]*a[pi]+i[Ci]*a[xi]+i[Ei]*a[Ci],e[Ei]=i[Ai]*a[vi]+i[Si]*a[bi]+i[Ci]*a[ki]+i[Ei]*a[Ei],this.set(this.temp)}},{key:"multiplyLeft",value:function(t){var e=this.temp,i=this.values,a=t.values;return e[ui]=a[ui]*i[ui]+a[di]*i[mi]+a[fi]*i[yi]+a[vi]*i[Ai],e[di]=a[ui]*i[di]+a[di]*i[gi]+a[fi]*i[wi]+a[vi]*i[Si],e[fi]=a[ui]*i[fi]+a[di]*i[pi]+a[fi]*i[xi]+a[vi]*i[Ci],e[vi]=a[ui]*i[vi]+a[di]*i[bi]+a[fi]*i[ki]+a[vi]*i[Ei],e[mi]=a[mi]*i[ui]+a[gi]*i[mi]+a[pi]*i[yi]+a[bi]*i[Ai],e[gi]=a[mi]*i[di]+a[gi]*i[gi]+a[pi]*i[wi]+a[bi]*i[Si],e[pi]=a[mi]*i[fi]+a[gi]*i[pi]+a[pi]*i[xi]+a[bi]*i[Ci],e[bi]=a[mi]*i[vi]+a[gi]*i[bi]+a[pi]*i[ki]+a[bi]*i[Ei],e[yi]=a[yi]*i[ui]+a[wi]*i[mi]+a[xi]*i[yi]+a[ki]*i[Ai],e[wi]=a[yi]*i[di]+a[wi]*i[gi]+a[xi]*i[wi]+a[ki]*i[Si],e[xi]=a[yi]*i[fi]+a[wi]*i[pi]+a[xi]*i[xi]+a[ki]*i[Ci],e[ki]=a[yi]*i[vi]+a[wi]*i[bi]+a[xi]*i[ki]+a[ki]*i[Ei],e[Ai]=a[Ai]*i[ui]+a[Si]*i[mi]+a[Ci]*i[yi]+a[Ei]*i[Ai],e[Si]=a[Ai]*i[di]+a[Si]*i[gi]+a[Ci]*i[wi]+a[Ei]*i[Si],e[Ci]=a[Ai]*i[fi]+a[Si]*i[pi]+a[Ci]*i[xi]+a[Ei]*i[Ci],e[Ei]=a[Ai]*i[vi]+a[Si]*i[bi]+a[Ci]*i[ki]+a[Ei]*i[Ei],this.set(this.temp)}},{key:"lookAt",value:function(e,i,a){var n=t.xAxis,r=t.yAxis,s=t.zAxis;s.setFrom(i).normalize(),n.setFrom(i).normalize(),n.cross(a).normalize(),r.setFrom(n).cross(s).normalize(),this.identity();var o=this.values;return o[ui]=n.x,o[di]=n.y,o[fi]=n.z,o[mi]=r.x,o[gi]=r.y,o[pi]=r.z,o[yi]=-s.x,o[wi]=-s.y,o[xi]=-s.z,t.tmpMatrix.identity(),t.tmpMatrix.values[vi]=-e.x,t.tmpMatrix.values[bi]=-e.y,t.tmpMatrix.values[ki]=-e.z,this.multiply(t.tmpMatrix),this}}]),t}();Ii.xAxis=new ci,Ii.yAxis=new ci,Ii.zAxis=new ci,Ii.tmpMatrix=new Ii;var Oi=function(){function t(e,i){Object(n.a)(this,t),this.position=new ci(0,0,0),this.direction=new ci(0,0,-1),this.up=new ci(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new Ii,this.inverseProjectionView=new Ii,this.projection=new Ii,this.view=new Ii,this.viewportWidth=e,this.viewportHeight=i,this.update()}return Object(r.a)(t,[{key:"update",value:function(){var t=this.projection,e=this.view,i=this.projectionView,a=this.inverseProjectionView,n=this.zoom,r=this.viewportWidth,s=this.viewportHeight;t.ortho(n*(-r/2),n*(r/2),n*(-s/2),n*(s/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),i.set(t.values),i.multiply(e),a.set(i.values).invert()}},{key:"screenToWorld",value:function(t,e,i){var a=t.x,n=i-t.y-1;return t.x=2*a/e-1,t.y=2*n/i-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}},{key:"worldToScreen",value:function(t,e,i){return t.project(this.projectionView),t.x=e*(t.x+1)/2,t.y=i*(t.y+1)/2,t.z=(t.z+1)/2,t}},{key:"setViewport",value:function(t,e){this.viewportWidth=t,this.viewportHeight=e}}]),t}(),Mi=function(){function t(e){Object(n.a)(this,t),this.mouseX=0,this.mouseY=0,this.buttonDown=!1,this.touch0=null,this.touch1=null,this.initialPinchDistance=0,this.listeners=new Array,this.eventListeners=[],this.element=e,this.setupCallbacks(e)}return Object(r.a)(t,[{key:"setupCallbacks",value:function(t){var e=this,i=function(i){if(i instanceof MouseEvent){var a=t.getBoundingClientRect();e.mouseX=i.clientX-a.left,e.mouseY=i.clientY-a.top,e.listeners.map((function(t){e.buttonDown?t.dragged&&t.dragged(e.mouseX,e.mouseY):t.moved&&t.moved(e.mouseX,e.mouseY)}))}},a=function a(n){if(n instanceof MouseEvent){var r=t.getBoundingClientRect();e.mouseX=n.clientX-r.left,e.mouseY=n.clientY-r.top,e.buttonDown=!1,e.listeners.map((function(t){t.up&&t.up(e.mouseX,e.mouseY)})),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)}};t.addEventListener("mousedown",(function(n){if(n instanceof MouseEvent){var r=t.getBoundingClientRect();e.mouseX=n.clientX-r.left,e.mouseY=n.clientY-r.top,e.buttonDown=!0,e.listeners.map((function(t){t.down&&t.down(e.mouseX,e.mouseY)})),document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)}}),!0),t.addEventListener("mousemove",i,!0),t.addEventListener("mouseup",a,!0),t.addEventListener("wheel",(function(t){t.preventDefault();t.deltaY;t.deltaMode,WheelEvent.DOM_DELTA_LINE,t.deltaMode,WheelEvent.DOM_DELTA_PAGE,e.listeners.map((function(e){e.wheel&&e.wheel(t.deltaY)}))}),!0),t.addEventListener("touchstart",(function(i){if(!e.touch0||!e.touch1){var a=i.changedTouches.item(0);if(!a)return;var n=t.getBoundingClientRect(),r=a.clientX-n.left,s=a.clientY-n.top,o=new Ti(a.identifier,r,s);if(e.mouseX=r,e.mouseY=s,e.buttonDown=!0,e.touch0){if(!e.touch1){e.touch1=o;var h=e.touch1.x-e.touch0.x,l=e.touch1.x-e.touch0.x;e.initialPinchDistance=Math.sqrt(h*h+l*l),e.listeners.map((function(t){t.zoom&&t.zoom(e.initialPinchDistance,e.initialPinchDistance)}))}}else e.touch0=o,e.listeners.map((function(t){t.down&&t.down(o.x,o.y)}))}i.preventDefault()}),!1),t.addEventListener("touchmove",(function(i){if(e.touch0){for(var a=i.changedTouches,n=t.getBoundingClientRect(),r=function(){var t=(o=a[s]).clientX-n.left,i=o.clientY-n.top;e.touch0.identifier===o.identifier&&(e.touch0.x=e.mouseX=t,e.touch0.y=e.mouseY=i,e.listeners.map((function(e){e.dragged&&e.dragged(t,i)}))),e.touch1&&e.touch1.identifier===o.identifier&&(e.touch1.x=e.mouseX=t,e.touch1.y=e.mouseY=i)},s=0;s<a.length;s++){var o;r()}if(e.touch0&&e.touch1){var h=e.touch1.x-e.touch0.x,l=e.touch1.x-e.touch0.x,c=Math.sqrt(h*h+l*l);e.listeners.map((function(t){t.zoom&&t.zoom(e.initialPinchDistance,c)}))}}i.preventDefault()}),!1);var n=function(i){if(e.touch0)for(var a=i.changedTouches,n=t.getBoundingClientRect(),r=function(){var t=(o=a[s]).clientX-n.left,i=o.clientY-n.top;if(e.touch0.identifier===o.identifier){if(e.touch0=null,e.mouseX=t,e.mouseY=i,e.listeners.map((function(e){e.up&&e.up(t,i)})),!e.touch1)return e.buttonDown=!1,"break";e.touch0=e.touch1,e.touch1=null,e.mouseX=e.touch0.x,e.mouseX=e.touch0.x,e.buttonDown=!0,e.listeners.map((function(t){t.down&&t.down(e.touch0.x,e.touch0.y)}))}e.touch1&&e.touch1.identifier&&(e.touch1=null)},s=0;s<a.length;s++){var o;if("break"===r())break}i.preventDefault()};t.addEventListener("touchend",n,!1),t.addEventListener("touchcancel",n)}},{key:"addListener",value:function(t){this.listeners.push(t)}},{key:"removeListener",value:function(t){var e=this.listeners.indexOf(t);e>-1&&this.listeners.splice(e,1)}}]),t}(),Ti=function t(e,i,a){Object(n.a)(this,t),this.identifier=e,this.x=i,this.y=a},Fi=function(){function t(e,i,a){Object(n.a)(this,t),this.vertexShader=i,this.fragmentShader=a,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=i,this.fsSource=a,this.context=e instanceof ni?e:new ni(e),this.context.addRestorable(this),this.compile()}return Object(r.a)(t,[{key:"getProgram",value:function(){return this.program}},{key:"getVertexShader",value:function(){return this.vertexShader}},{key:"getFragmentShader",value:function(){return this.fragmentShader}},{key:"getVertexShaderSource",value:function(){return this.vsSource}},{key:"getFragmentSource",value:function(){return this.fsSource}},{key:"compile",value:function(){var t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(e){throw this.dispose(),e}}},{key:"compileShader",value:function(t,e){var i=this.context.gl,a=i.createShader(t);if(!a)throw new Error("Couldn't create shader.");if(i.shaderSource(a,e),i.compileShader(a),!i.getShaderParameter(a,i.COMPILE_STATUS)){var n="Couldn't compile shader: "+i.getShaderInfoLog(a);if(i.deleteShader(a),!i.isContextLost())throw new Error(n)}return a}},{key:"compileProgram",value:function(t,e){var i=this.context.gl,a=i.createProgram();if(!a)throw new Error("Couldn't compile program.");if(i.attachShader(a,t),i.attachShader(a,e),i.linkProgram(a),!i.getProgramParameter(a,i.LINK_STATUS)){var n="Couldn't compile shader program: "+i.getProgramInfoLog(a);if(i.deleteProgram(a),!i.isContextLost())throw new Error(n)}return a}},{key:"restore",value:function(){this.compile()}},{key:"bind",value:function(){this.context.gl.useProgram(this.program)}},{key:"unbind",value:function(){this.context.gl.useProgram(null)}},{key:"setUniformi",value:function(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)}},{key:"setUniformf",value:function(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)}},{key:"setUniform2f",value:function(t,e,i){this.context.gl.uniform2f(this.getUniformLocation(t),e,i)}},{key:"setUniform3f",value:function(t,e,i,a){this.context.gl.uniform3f(this.getUniformLocation(t),e,i,a)}},{key:"setUniform4f",value:function(t,e,i,a,n){this.context.gl.uniform4f(this.getUniformLocation(t),e,i,a,n)}},{key:"setUniform2x2f",value:function(t,e){var i=this.context.gl;this.tmp2x2.set(e),i.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}},{key:"setUniform3x3f",value:function(t,e){var i=this.context.gl;this.tmp3x3.set(e),i.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}},{key:"setUniform4x4f",value:function(t,e){var i=this.context.gl;this.tmp4x4.set(e),i.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}},{key:"getUniformLocation",value:function(t){var e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");var i=e.getUniformLocation(this.program,t);if(!i&&!e.isContextLost())throw new Error("Couldn't find location for uniform ".concat(t));return i}},{key:"getAttributeLocation",value:function(t){var e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");var i=e.getAttribLocation(this.program,t);if(-1==i&&!e.isContextLost())throw new Error("Couldn't find location for attribute ".concat(t));return i}},{key:"dispose",value:function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}}],[{key:"newColoredTextured",value:function(e){return new t(e,"\n\t\t\t\tattribute vec4 ".concat(t.POSITION,";\n\t\t\t\tattribute vec4 ").concat(t.COLOR,";\n\t\t\t\tattribute vec2 ").concat(t.TEXCOORDS,";\n\t\t\t\tuniform mat4 ").concat(t.MVP_MATRIX,";\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ").concat(t.COLOR,";\n\t\t\t\t\tv_texCoords = ").concat(t.TEXCOORDS,";\n\t\t\t\t\tgl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n\t\t\t\t}\n\t\t\t"),"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")}},{key:"newTwoColoredTextured",value:function(e){return new t(e,"\n\t\t\t\tattribute vec4 ".concat(t.POSITION,";\n\t\t\t\tattribute vec4 ").concat(t.COLOR,";\n\t\t\t\tattribute vec4 ").concat(t.COLOR2,";\n\t\t\t\tattribute vec2 ").concat(t.TEXCOORDS,";\n\t\t\t\tuniform mat4 ").concat(t.MVP_MATRIX,";\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = ").concat(t.COLOR,";\n\t\t\t\t\tv_dark = ").concat(t.COLOR2,";\n\t\t\t\t\tv_texCoords = ").concat(t.TEXCOORDS,";\n\t\t\t\t\tgl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n\t\t\t\t}\n\t\t\t"),"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")}},{key:"newColored",value:function(e){return new t(e,"\n\t\t\t\tattribute vec4 ".concat(t.POSITION,";\n\t\t\t\tattribute vec4 ").concat(t.COLOR,";\n\t\t\t\tuniform mat4 ").concat(t.MVP_MATRIX,";\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ").concat(t.COLOR,";\n\t\t\t\t\tgl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n\t\t\t\t}\n\t\t\t"),"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")}}]),t}();Fi.MVP_MATRIX="u_projTrans",Fi.POSITION="a_position",Fi.COLOR="a_color",Fi.COLOR2="a_color2",Fi.TEXCOORDS="a_texCoords",Fi.SAMPLER="u_texture";var Ri,Yi=function(){function t(e,i,a,r){Object(n.a)(this,t),this.attributes=i,this.verticesBuffer=null,this.verticesLength=0,this.dirtyVertices=!1,this.indicesBuffer=null,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=e instanceof ni?e:new ni(e),this.elementsPerVertex=0;for(var s=0;s<i.length;s++)this.elementsPerVertex+=i[s].numElements;this.vertices=new Float32Array(a*this.elementsPerVertex),this.indices=new Uint16Array(r),this.context.addRestorable(this)}return Object(r.a)(t,[{key:"getAttributes",value:function(){return this.attributes}},{key:"maxVertices",value:function(){return this.vertices.length/this.elementsPerVertex}},{key:"numVertices",value:function(){return this.verticesLength/this.elementsPerVertex}},{key:"setVerticesLength",value:function(t){this.dirtyVertices=!0,this.verticesLength=t}},{key:"getVertices",value:function(){return this.vertices}},{key:"maxIndices",value:function(){return this.indices.length}},{key:"numIndices",value:function(){return this.indicesLength}},{key:"setIndicesLength",value:function(t){this.dirtyIndices=!0,this.indicesLength=t}},{key:"getIndices",value:function(){return this.indices}},{key:"getVertexSizeInFloats",value:function(){for(var t=0,e=0;e<this.attributes.length;e++){t+=this.attributes[e].numElements}return t}},{key:"setVertices",value:function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}},{key:"setIndices",value:function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}},{key:"draw",value:function(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}},{key:"drawWithOffset",value:function(t,e,i,a){var n=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?n.drawElements(e,a,n.UNSIGNED_SHORT,2*i):n.drawArrays(e,i,a),this.unbind(t)}},{key:"bind",value:function(t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);for(var i=0,a=0;a<this.attributes.length;a++){var n=this.attributes[a],r=t.getAttributeLocation(n.name);e.enableVertexAttribArray(r),e.vertexAttribPointer(r,n.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*i),i+=n.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}},{key:"unbind",value:function(t){for(var e=this.context.gl,i=0;i<this.attributes.length;i++){var a=this.attributes[i],n=t.getAttributeLocation(a.name);e.disableVertexAttribArray(n)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}},{key:"update",value:function(){var t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}},{key:"restore",value:function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}},{key:"dispose",value:function(){this.context.removeRestorable(this);var t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}}]),t}(),Li=function t(e,i,a){Object(n.a)(this,t),this.name=e,this.type=i,this.numElements=a},ji=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(){return Object(n.a)(this,i),e.call(this,Fi.POSITION,Ri.Float,2)}return i}(Li),Xi=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(n.a)(this,i),e.call(this,Fi.TEXCOORDS+(0==t?"":t),Ri.Float,2)}return i}(Li),Bi=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(){return Object(n.a)(this,i),e.call(this,Fi.COLOR,Ri.Float,4)}return i}(Li),Pi=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(){return Object(n.a)(this,i),e.call(this,Fi.COLOR2,Ri.Float,4)}return i}(Li);!function(t){t[t.Float=0]="Float"}(Ri||(Ri={}));var Vi,Di=function(){function t(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10920;if(Object(n.a)(this,t),this.drawCalls=0,this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,this.cullWasEnabled=!1,a>10920)throw new Error("Can't have more than 10920 triangles per batch: "+a);this.context=e instanceof ni?e:new ni(e);var r=i?[new ji,new Bi,new Xi,new Pi]:[new ji,new Bi,new Xi];this.mesh=new Yi(e,r,a,3*a);var s=this.context.gl;this.srcColorBlend=s.SRC_ALPHA,this.srcAlphaBlend=s.ONE,this.dstBlend=s.ONE_MINUS_SRC_ALPHA}return Object(r.a)(t,[{key:"begin",value:function(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;var e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend),this.cullWasEnabled=e.isEnabled(e.CULL_FACE),this.cullWasEnabled&&e.disable(e.CULL_FACE)}},{key:"setBlendMode",value:function(t,e,i){this.srcColorBlend==t&&this.srcAlphaBlend==e&&this.dstBlend==i||(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=i,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,i,e,i)))}},{key:"draw",value:function(t,e,i){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+i.length>this.mesh.getIndices().length)&&this.flush();var a=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);for(var n=this.mesh.getIndices(),r=this.indicesLength,s=0;s<i.length;r++,s++)n[r]=i[s]+a;this.indicesLength+=i.length,this.mesh.setIndicesLength(this.indicesLength)}},{key:"flush",value:function(){if(0!=this.verticesLength){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++}}},{key:"end",value:function(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;var t=this.context.gl;t.disable(t.BLEND),this.cullWasEnabled&&t.enable(t.CULL_FACE)}},{key:"getDrawCalls",value:function(){return this.drawCalls}},{key:"dispose",value:function(){this.mesh.dispose()}}]),t}(),Ni=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10920;if(Object(n.a)(this,t),this.isDrawing=!1,this.shapeType=Vi.Filled,this.color=new c(1,1,1,1),this.shader=null,this.vertexIndex=0,this.tmp=new v,i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=e instanceof ni?e:new ni(e),this.mesh=new Yi(e,[new ji,new Bi],i,0);var a=this.context.gl;this.srcColorBlend=a.SRC_ALPHA,this.srcAlphaBlend=a.ONE,this.dstBlend=a.ONE_MINUS_SRC_ALPHA}return Object(r.a)(t,[{key:"begin",value:function(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;var e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}},{key:"setBlendMode",value:function(t,e,i){(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=i,this.isDrawing)&&(this.flush(),this.context.gl.blendFuncSeparate(t,i,e,i))}},{key:"setColor",value:function(t){this.color.setFromColor(t)}},{key:"setColorWith",value:function(t,e,i,a){this.color.set(t,e,i,a)}},{key:"point",value:function(t,e,i){this.check(Vi.Point,1),i||(i=this.color),this.vertex(t,e,i)}},{key:"line",value:function(t,e,i,a,n){this.check(Vi.Line,2);this.mesh.getVertices(),this.vertexIndex;n||(n=this.color),this.vertex(t,e,n),this.vertex(i,a,n)}},{key:"triangle",value:function(t,e,i,a,n,r,s,o,h,l){this.check(t?Vi.Filled:Vi.Line,3);this.mesh.getVertices(),this.vertexIndex;o||(o=this.color),h||(h=this.color),l||(l=this.color),t?(this.vertex(e,i,o),this.vertex(a,n,h),this.vertex(r,s,l)):(this.vertex(e,i,o),this.vertex(a,n,h),this.vertex(a,n,o),this.vertex(r,s,h),this.vertex(r,s,o),this.vertex(e,i,h))}},{key:"quad",value:function(t,e,i,a,n,r,s,o,h,l,c,u,d){this.check(t?Vi.Filled:Vi.Line,3);this.mesh.getVertices(),this.vertexIndex;l||(l=this.color),c||(c=this.color),u||(u=this.color),d||(d=this.color),t?(this.vertex(e,i,l),this.vertex(a,n,c),this.vertex(r,s,u),this.vertex(r,s,u),this.vertex(o,h,d),this.vertex(e,i,l)):(this.vertex(e,i,l),this.vertex(a,n,c),this.vertex(a,n,c),this.vertex(r,s,u),this.vertex(r,s,u),this.vertex(o,h,d),this.vertex(o,h,d),this.vertex(e,i,l))}},{key:"rect",value:function(t,e,i,a,n,r){this.quad(t,e,i,e+a,i,e+a,i+n,e,i+n,r,r,r,r)}},{key:"rectLine",value:function(t,e,i,a,n,r,s){this.check(t?Vi.Filled:Vi.Line,8),s||(s=this.color);var o=this.tmp.set(n-i,e-a);o.normalize(),r*=.5;var h=o.x*r,l=o.y*r;t?(this.vertex(e+h,i+l,s),this.vertex(e-h,i-l,s),this.vertex(a+h,n+l,s),this.vertex(a-h,n-l,s),this.vertex(a+h,n+l,s),this.vertex(e-h,i-l,s)):(this.vertex(e+h,i+l,s),this.vertex(e-h,i-l,s),this.vertex(a+h,n+l,s),this.vertex(a-h,n-l,s),this.vertex(a+h,n+l,s),this.vertex(e+h,i+l,s),this.vertex(a-h,n-l,s),this.vertex(e-h,i-l,s))}},{key:"x",value:function(t,e,i){this.line(t-i,e-i,t+i,e+i),this.line(t-i,e+i,t+i,e-i)}},{key:"polygon",value:function(t,e,i,a){if(i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(Vi.Line,2*i),a||(a=this.color);this.mesh.getVertices(),this.vertexIndex;i<<=1;for(var n=t[e<<=1],r=t[e+1],s=e+i,o=e,h=e+i-2;o<h;o+=2){var l=t[o],c=t[o+1],u=0,d=0;o+2>=s?(u=n,d=r):(u=t[o+2],d=t[o+3]),this.vertex(l,c,a),this.vertex(u,d,a)}}},{key:"circle",value:function(t,e,i,a,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(0==r&&(r=Math.max(1,6*u.cbrt(a)|0)),r<=0)throw new Error("segments must be > 0.");n||(n=this.color);var s=2*u.PI/r,o=Math.cos(s),h=Math.sin(s),l=a,c=0;if(t){this.check(Vi.Filled,3*r+3),r--;for(var d=0;d<r;d++){this.vertex(e,i,n),this.vertex(e+l,i+c,n);var f=l;l=o*l-h*c,c=h*f+o*c,this.vertex(e+l,i+c,n)}this.vertex(e,i,n),this.vertex(e+l,i+c,n)}else{this.check(Vi.Line,2*r+2);for(var v=0;v<r;v++){this.vertex(e+l,i+c,n);var m=l;l=o*l-h*c,c=h*m+o*c,this.vertex(e+l,i+c,n)}this.vertex(e+l,i+c,n)}l=a,c=0,this.vertex(e+l,i+c,n)}},{key:"curve",value:function(t,e,i,a,n,r,s,o,h,l){this.check(Vi.Line,2*h+2),l||(l=this.color);for(var c=1/h,u=c*c,d=c*c*c,f=3*c,v=3*u,m=6*u,g=6*d,p=t-2*i+n,b=e-2*a+r,y=3*(i-n)-t+s,w=3*(a-r)-e+o,x=t,k=e,A=(i-t)*f+p*v+y*d,S=(a-e)*f+b*v+w*d,C=p*m+y*g,E=b*m+w*g,I=y*g,O=w*g;h-->0;)this.vertex(x,k,l),x+=A,k+=S,A+=C,S+=E,C+=I,E+=O,this.vertex(x,k,l);this.vertex(x,k,l),this.vertex(s,o,l)}},{key:"vertex",value:function(t,e,i){var a=this.vertexIndex,n=this.mesh.getVertices();n[a++]=t,n[a++]=e,n[a++]=i.r,n[a++]=i.g,n[a++]=i.b,n[a++]=i.a,this.vertexIndex=a}},{key:"end",value:function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();var t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}},{key:"flush",value:function(){if(0!=this.vertexIndex){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}},{key:"check",value:function(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}},{key:"dispose",value:function(){this.mesh.dispose()}}]),t}();!function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(Vi||(Vi={}));var Ui=function(){function t(e){Object(n.a)(this,t),this.boneLineColor=new c(1,0,0,1),this.boneOriginColor=new c(0,1,0,1),this.attachmentLineColor=new c(0,0,1,.5),this.triangleLineColor=new c(1,.64,0,.5),this.pathColor=(new c).setFromString("FF7F00"),this.clipColor=new c(.8,0,0,2),this.aabbColor=new c(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new Ze,this.temp=new Array,this.vertices=d.newFloatArray(2048),this.context=e instanceof ni?e:new ni(e)}return Object(r.a)(t,[{key:"draw",value:function(e,i,a){var n=i.x,r=i.y,s=this.context.gl,o=this.premultipliedAlpha?s.ONE:s.SRC_ALPHA;e.setBlendMode(o,s.ONE,s.ONE_MINUS_SRC_ALPHA);var h=i.bones;if(this.drawBones){e.setColor(this.boneLineColor);for(var l=0,c=h.length;l<c;l++){var u=h[l];if(!(a&&a.indexOf(u.data.name)>-1)&&u.parent){var f=u.data.length*u.a+u.worldX,v=u.data.length*u.c+u.worldY;e.rectLine(!0,u.worldX,u.worldY,f,v,this.boneWidth*this.scale)}}this.drawSkeletonXY&&e.x(n,r,4*this.scale)}if(this.drawRegionAttachments){e.setColor(this.attachmentLineColor);for(var m=i.slots,g=0,p=m.length;g<p;g++){var b=m[g],y=b.getAttachment();if(y instanceof Gt){var w=y,x=this.vertices;w.computeWorldVertices(b,x,0,2),e.line(x[0],x[1],x[2],x[3]),e.line(x[2],x[3],x[4],x[5]),e.line(x[4],x[5],x[6],x[7]),e.line(x[6],x[7],x[0],x[1])}}}if(this.drawMeshHull||this.drawMeshTriangles)for(var k=i.slots,A=0,S=k.length;A<S;A++){var C=k[A];if(C.bone.active){var E=C.getAttachment();if(E instanceof zt){var I=E,O=this.vertices;I.computeWorldVertices(C,0,I.worldVerticesLength,O,0,2);var M=I.triangles,T=I.hullLength;if(this.drawMeshTriangles){e.setColor(this.triangleLineColor);for(var F=0,R=M.length;F<R;F+=3){var Y=2*M[F],L=2*M[F+1],j=2*M[F+2];e.triangle(!1,O[Y],O[Y+1],O[L],O[L+1],O[j],O[j+1])}}if(this.drawMeshHull&&T>0){e.setColor(this.attachmentLineColor);for(var X=O[(T=2*(T>>1))-2],B=O[T-1],P=0,V=T;P<V;P+=2){var D=O[P],N=O[P+1];e.line(D,N,X,B),X=D,B=N}}}}}if(this.drawBoundingBoxes){var U=this.bounds;U.update(i,!0),e.setColor(this.aabbColor),e.rect(!1,U.minX,U.minY,U.getWidth(),U.getHeight());for(var z=U.polygons,W=U.boundingBoxes,q=0,G=z.length;q<G;q++){var _=z[q];e.setColor(W[q].color),e.polygon(_,0,_.length)}}if(this.drawPaths)for(var H=i.slots,Z=0,J=H.length;Z<J;Z++){var K=H[Z];if(K.bone.active){var Q=K.getAttachment();if(Q instanceof Wt){var $=Q,tt=$.worldVerticesLength,et=this.temp=d.setArraySize(this.temp,tt,0);$.computeWorldVertices(K,0,tt,et,0,2);var it=this.pathColor,at=et[2],nt=et[3],rt=0,st=0;if($.closed){e.setColor(it);var ot=et[0],ht=et[1],lt=et[tt-2],ct=et[tt-1];rt=et[tt-4],st=et[tt-3],e.curve(at,nt,ot,ht,lt,ct,rt,st,32),e.setColor(t.LIGHT_GRAY),e.line(at,nt,ot,ht),e.line(rt,st,lt,ct)}tt-=4;for(var ut=4;ut<tt;ut+=6){var dt=et[ut],ft=et[ut+1],vt=et[ut+2],mt=et[ut+3];rt=et[ut+4],st=et[ut+5],e.setColor(it),e.curve(at,nt,dt,ft,vt,mt,rt,st,32),e.setColor(t.LIGHT_GRAY),e.line(at,nt,dt,ft),e.line(rt,st,vt,mt),at=rt,nt=st}}}}if(this.drawBones){e.setColor(this.boneOriginColor);for(var gt=0,pt=h.length;gt<pt;gt++){var bt=h[gt];a&&a.indexOf(bt.data.name)>-1||e.circle(!0,bt.worldX,bt.worldY,3*this.scale,t.GREEN,8)}}if(this.drawClipping){var yt=i.slots;e.setColor(this.clipColor);for(var wt=0,xt=yt.length;wt<xt;wt++){var kt=yt[wt];if(kt.bone.active){var At=kt.getAttachment();if(At instanceof Lt){var St=At,Ct=St.worldVerticesLength,Et=this.temp=d.setArraySize(this.temp,Ct,0);St.computeWorldVertices(kt,0,Ct,Et,0,2);for(var It=0,Ot=Et.length;It<Ot;It+=2){var Mt=Et[It],Tt=Et[It+1],Ft=Et[(It+2)%Et.length],Rt=Et[(It+3)%Et.length];e.line(Mt,Tt,Ft,Rt)}}}}}}},{key:"dispose",value:function(){}}]),t}();Ui.LIGHT_GRAY=new c(192/255,192/255,192/255,1),Ui.GREEN=new c(0,1,0,1);var zi=function t(e,i,a){Object(n.a)(this,t),this.vertices=e,this.numVertices=i,this.numFloats=a},Wi=function(){function t(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(n.a)(this,t),this.premultipliedAlpha=!1,this.tempColor=new c,this.tempColor2=new c,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new zi([],0,0),this.clipper=new Ke,this.temp=new v,this.temp2=new v,this.temp3=new c,this.temp4=new c,this.twoColorTint=i,i&&(this.vertexSize+=4),this.vertices=d.newFloatArray(1024*this.vertexSize)}return Object(r.a)(t,[{key:"draw",value:function(e,i){var a,n,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,h=this.clipper,l=this.premultipliedAlpha,c=this.twoColorTint,u=null,f=(this.temp,this.temp2,this.temp3,this.temp4,this.renderable),v=i.drawOrder,m=i.color,g=c?12:8,p=!1;-1==s&&(p=!0);for(var b=0,y=v.length;b<y;b++){var w=h.isClipping()?2:g,x=v[b];if(x.bone.active)if(s>=0&&s==x.data.index&&(p=!0),p){o>=0&&o==x.data.index&&(p=!1);var k=x.getAttachment(),A=void 0;if(k instanceof Gt){var S=k;f.vertices=this.vertices,f.numVertices=4,f.numFloats=w<<2,S.computeWorldVertices(x,f.vertices,0,w),n=t.QUAD_TRIANGLES,a=S.uvs,A=S.region.renderObject.page.texture,r=S.color}else{if(!(k instanceof zt)){if(k instanceof Lt){var C=k;h.clipStart(x,C);continue}h.clipEndWithSlot(x);continue}var E=k;f.vertices=this.vertices,f.numVertices=E.worldVerticesLength>>1,f.numFloats=f.numVertices*w,f.numFloats>f.vertices.length&&(f.vertices=this.vertices=d.newFloatArray(f.numFloats)),E.computeWorldVertices(x,0,E.worldVerticesLength,f.vertices,0,w),n=E.triangles,A=E.region.renderObject.page.texture,a=E.uvs,r=E.color}if(A){var I=x.color,O=this.tempColor;O.r=m.r*I.r*r.r,O.g=m.g*I.g*r.g,O.b=m.b*I.b*r.b,O.a=m.a*I.a*r.a,l&&(O.r*=O.a,O.g*=O.a,O.b*=O.a);var M=this.tempColor2;x.darkColor?(l?(M.r=x.darkColor.r*O.a,M.g=x.darkColor.g*O.a,M.b=x.darkColor.b*O.a):M.setFromColor(x.darkColor),M.a=l?1:0):M.set(0,0,0,1);var T=x.data.blendMode;if(T!=u&&(u=T,e.setBlendMode(oi.getSourceColorGLBlendMode(u,l),oi.getSourceAlphaGLBlendMode(u),oi.getDestGLBlendMode(u))),h.isClipping()){h.clipTriangles(f.vertices,f.numFloats,n,n.length,a,O,M,c);var F=new Float32Array(h.clippedVertices),R=h.clippedTriangles;e.draw(A,F,R)}else{var Y=f.vertices;if(c)for(var L=2,j=0,X=f.numFloats;L<X;L+=g,j+=2)Y[L]=O.r,Y[L+1]=O.g,Y[L+2]=O.b,Y[L+3]=O.a,Y[L+4]=a[j],Y[L+5]=a[j+1],Y[L+6]=M.r,Y[L+7]=M.g,Y[L+8]=M.b,Y[L+9]=M.a;else for(var B=2,P=0,V=f.numFloats;B<V;B+=g,P+=2)Y[B]=O.r,Y[B+1]=O.g,Y[B+2]=O.b,Y[B+3]=O.a,Y[B+4]=a[P],Y[B+5]=a[P+1];var D=f.vertices.subarray(0,f.numFloats);e.draw(A,D,n)}}h.clipEndWithSlot(x)}else h.clipEndWithSlot(x);else h.clipEndWithSlot(x)}h.clipEnd()}}]),t}();Wi.QUAD_TRIANGLES=[0,1,2,2,3,0];var qi,Gi,_i,Hi=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],Zi=[0,1,2,2,3,0],Ji=new c(1,1,1,1),Ki=function(){function t(e,i){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(n.a)(this,t),this.twoColorTint=!1,this.activeRenderer=null,this.canvas=e,this.context=i instanceof ni?i:new ni(i),this.twoColorTint=a,this.camera=new Oi(e.width,e.height),this.batcherShader=a?Fi.newTwoColoredTextured(this.context):Fi.newColoredTextured(this.context),this.batcher=new Di(this.context,a),this.shapesShader=Fi.newColored(this.context),this.shapes=new Ni(this.context),this.skeletonRenderer=new Wi(this.context,a),this.skeletonDebugRenderer=new Ui(this.context)}return Object(r.a)(t,[{key:"dispose",value:function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}},{key:"begin",value:function(){this.camera.update(),this.enableRenderer(this.batcher)}},{key:"drawSkeleton",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,i,a)}},{key:"drawSkeletonDebug",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,i)}},{key:"drawTexture",value:function(t,e,i,a,n,r){this.enableRenderer(this.batcher),r||(r=Ji);var s=0;Hi[s++]=e,Hi[s++]=i,Hi[s++]=r.r,Hi[s++]=r.g,Hi[s++]=r.b,Hi[s++]=r.a,Hi[s++]=0,Hi[s++]=1,this.twoColorTint&&(Hi[s++]=0,Hi[s++]=0,Hi[s++]=0,Hi[s++]=0),Hi[s++]=e+a,Hi[s++]=i,Hi[s++]=r.r,Hi[s++]=r.g,Hi[s++]=r.b,Hi[s++]=r.a,Hi[s++]=1,Hi[s++]=1,this.twoColorTint&&(Hi[s++]=0,Hi[s++]=0,Hi[s++]=0,Hi[s++]=0),Hi[s++]=e+a,Hi[s++]=i+n,Hi[s++]=r.r,Hi[s++]=r.g,Hi[s++]=r.b,Hi[s++]=r.a,Hi[s++]=1,Hi[s++]=0,this.twoColorTint&&(Hi[s++]=0,Hi[s++]=0,Hi[s++]=0,Hi[s++]=0),Hi[s++]=e,Hi[s++]=i+n,Hi[s++]=r.r,Hi[s++]=r.g,Hi[s++]=r.b,Hi[s++]=r.a,Hi[s++]=0,Hi[s++]=0,this.twoColorTint&&(Hi[s++]=0,Hi[s++]=0,Hi[s++]=0,Hi[s]=0),this.batcher.draw(t,Hi,Zi)}},{key:"drawTextureUV",value:function(t,e,i,a,n,r,s,o,h,l){this.enableRenderer(this.batcher),l||(l=Ji);var c=0;Hi[c++]=e,Hi[c++]=i,Hi[c++]=l.r,Hi[c++]=l.g,Hi[c++]=l.b,Hi[c++]=l.a,Hi[c++]=r,Hi[c++]=s,this.twoColorTint&&(Hi[c++]=0,Hi[c++]=0,Hi[c++]=0,Hi[c++]=0),Hi[c++]=e+a,Hi[c++]=i,Hi[c++]=l.r,Hi[c++]=l.g,Hi[c++]=l.b,Hi[c++]=l.a,Hi[c++]=o,Hi[c++]=s,this.twoColorTint&&(Hi[c++]=0,Hi[c++]=0,Hi[c++]=0,Hi[c++]=0),Hi[c++]=e+a,Hi[c++]=i+n,Hi[c++]=l.r,Hi[c++]=l.g,Hi[c++]=l.b,Hi[c++]=l.a,Hi[c++]=o,Hi[c++]=h,this.twoColorTint&&(Hi[c++]=0,Hi[c++]=0,Hi[c++]=0,Hi[c++]=0),Hi[c++]=e,Hi[c++]=i+n,Hi[c++]=l.r,Hi[c++]=l.g,Hi[c++]=l.b,Hi[c++]=l.a,Hi[c++]=r,Hi[c++]=h,this.twoColorTint&&(Hi[c++]=0,Hi[c++]=0,Hi[c++]=0,Hi[c]=0),this.batcher.draw(t,Hi,Zi)}},{key:"drawTextureRotated",value:function(t,e,i,a,n,r,s,o,h){this.enableRenderer(this.batcher),h||(h=Ji);var l=e+r,c=i+s,d=-r,f=-s,v=a-r,m=n-s,g=d,p=f,b=d,y=m,w=v,x=m,k=v,A=f,S=0,C=0,E=0,I=0,O=0,M=0,T=0,F=0;if(0!=o){var R=u.cosDeg(o),Y=u.sinDeg(o);E=(O=R*w-Y*x)+((S=R*g-Y*p)-(T=R*b-Y*y)),I=(M=Y*w+R*x)+((C=Y*g+R*p)-(F=Y*b+R*y))}else S=g,C=p,T=b,F=y,O=w,M=x,E=k,I=A;S+=l,C+=c,E+=l,I+=c,O+=l,M+=c,T+=l,F+=c;var L=0;Hi[L++]=S,Hi[L++]=C,Hi[L++]=h.r,Hi[L++]=h.g,Hi[L++]=h.b,Hi[L++]=h.a,Hi[L++]=0,Hi[L++]=1,this.twoColorTint&&(Hi[L++]=0,Hi[L++]=0,Hi[L++]=0,Hi[L++]=0),Hi[L++]=E,Hi[L++]=I,Hi[L++]=h.r,Hi[L++]=h.g,Hi[L++]=h.b,Hi[L++]=h.a,Hi[L++]=1,Hi[L++]=1,this.twoColorTint&&(Hi[L++]=0,Hi[L++]=0,Hi[L++]=0,Hi[L++]=0),Hi[L++]=O,Hi[L++]=M,Hi[L++]=h.r,Hi[L++]=h.g,Hi[L++]=h.b,Hi[L++]=h.a,Hi[L++]=1,Hi[L++]=0,this.twoColorTint&&(Hi[L++]=0,Hi[L++]=0,Hi[L++]=0,Hi[L++]=0),Hi[L++]=T,Hi[L++]=F,Hi[L++]=h.r,Hi[L++]=h.g,Hi[L++]=h.b,Hi[L++]=h.a,Hi[L++]=0,Hi[L++]=0,this.twoColorTint&&(Hi[L++]=0,Hi[L++]=0,Hi[L++]=0,Hi[L]=0),this.batcher.draw(t,Hi,Zi)}},{key:"drawRegion",value:function(t,e,i,a,n,r){this.enableRenderer(this.batcher),r||(r=Ji);var s=0;Hi[s++]=e,Hi[s++]=i,Hi[s++]=r.r,Hi[s++]=r.g,Hi[s++]=r.b,Hi[s++]=r.a,Hi[s++]=t.u,Hi[s++]=t.v2,this.twoColorTint&&(Hi[s++]=0,Hi[s++]=0,Hi[s++]=0,Hi[s++]=0),Hi[s++]=e+a,Hi[s++]=i,Hi[s++]=r.r,Hi[s++]=r.g,Hi[s++]=r.b,Hi[s++]=r.a,Hi[s++]=t.u2,Hi[s++]=t.v2,this.twoColorTint&&(Hi[s++]=0,Hi[s++]=0,Hi[s++]=0,Hi[s++]=0),Hi[s++]=e+a,Hi[s++]=i+n,Hi[s++]=r.r,Hi[s++]=r.g,Hi[s++]=r.b,Hi[s++]=r.a,Hi[s++]=t.u2,Hi[s++]=t.v,this.twoColorTint&&(Hi[s++]=0,Hi[s++]=0,Hi[s++]=0,Hi[s++]=0),Hi[s++]=e,Hi[s++]=i+n,Hi[s++]=r.r,Hi[s++]=r.g,Hi[s++]=r.b,Hi[s++]=r.a,Hi[s++]=t.u,Hi[s++]=t.v,this.twoColorTint&&(Hi[s++]=0,Hi[s++]=0,Hi[s++]=0,Hi[s]=0),this.batcher.draw(t.page.texture,Hi,Zi)}},{key:"line",value:function(t,e,i,a,n,r){this.enableRenderer(this.shapes),this.shapes.line(t,e,i,a,n)}},{key:"triangle",value:function(t,e,i,a,n,r,s,o,h,l){this.enableRenderer(this.shapes),this.shapes.triangle(t,e,i,a,n,r,s,o,h,l)}},{key:"quad",value:function(t,e,i,a,n,r,s,o,h,l,c,u,d){this.enableRenderer(this.shapes),this.shapes.quad(t,e,i,a,n,r,s,o,h,l,c,u,d)}},{key:"rect",value:function(t,e,i,a,n,r){this.enableRenderer(this.shapes),this.shapes.rect(t,e,i,a,n,r)}},{key:"rectLine",value:function(t,e,i,a,n,r,s){this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,i,a,n,r,s)}},{key:"polygon",value:function(t,e,i,a){this.enableRenderer(this.shapes),this.shapes.polygon(t,e,i,a)}},{key:"circle",value:function(t,e,i,a,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.enableRenderer(this.shapes),this.shapes.circle(t,e,i,a,n,r)}},{key:"curve",value:function(t,e,i,a,n,r,s,o,h,l){this.enableRenderer(this.shapes),this.shapes.curve(t,e,i,a,n,r,s,o,h,l)}},{key:"end",value:function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}},{key:"resize",value:function(t){var e=this.canvas,i=window.devicePixelRatio||1,a=Math.round(e.clientWidth*i),n=Math.round(e.clientHeight*i);if(e.width==a&&e.height==n||(e.width=a,e.height=n),this.context.gl.viewport(0,0,e.width,e.height),t===qi.Expand)this.camera.setViewport(a,n);else if(t===qi.Fit){var r=e.width,s=e.height,o=this.camera.viewportWidth,h=this.camera.viewportHeight,l=h/o<s/r?o/r:h/s;this.camera.setViewport(r*l,s*l)}this.camera.update()}},{key:"enableRenderer",value:function(t){this.activeRenderer!==t&&(this.end(),t instanceof Di?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(Fi.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof Ni?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(Fi.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}}]),t}();!function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"}(qi||(qi={}));var Qi=0,$i=165,ta=108,ea=163,ia=function(){function t(e){if(Object(n.a)(this,t),this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.fadeIn=0,this.timeKeeper=new m,this.backgroundColor=new c(.135,.135,.135,1),this.tempColor=new c,this.renderer=e,this.timeKeeper.maxDelta=9,!_i){var i=navigator.userAgent.indexOf("Safari")>-1,a=function(){return Qi++};(_i=new Image).src=na,i||(_i.crossOrigin="anonymous"),_i.onload=a,(Gi=new Image).src=aa,i||(Gi.crossOrigin="anonymous"),Gi.onload=a}}return Object(r.a)(t,[{key:"dispose",value:function(){var t,e;null===(t=this.logo)||void 0===t||t.dispose(),null===(e=this.spinner)||void 0===e||e.dispose()}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(Qi<2||t&&this.fadeOut>1)){this.timeKeeper.update();var e=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=200*this.timeKeeper.delta*(1+1.5*Math.pow(e,5));var i=this.tempColor,a=this.renderer,n=a.canvas,r=a.context.gl;if(a.resize(qi.Expand),a.camera.position.set(n.width/2,n.height/2,0),a.batcher.setBlendMode(r.ONE,r.ONE,r.ONE_MINUS_SRC_ALPHA),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>1)return;i.setFromColor(this.backgroundColor),e=1-((e=1-this.fadeOut/1)-1)*(e-1),i.a*=e,i.a>0&&(a.camera.zoom=1,a.begin(),a.quad(!0,0,0,n.width,0,n.width,n.height,0,n.height,i,i,i,i),a.end())}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(r.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),r.clear(r.COLOR_BUFFER_BIT)),e=1;e*=Math.min(this.fadeIn/1,1),i.set(e,e,e,e),this.logo||(this.logo=new hi(a.context,_i),this.spinner=new hi(a.context,Gi)),a.camera.zoom=Math.max(1,ea/n.height),a.begin(),a.drawTexture(this.logo,(n.width-$i)/2,(n.height-ta)/2,$i,ta,i),this.spinner&&a.drawTextureRotated(this.spinner,(n.width-ea)/2,(n.height-ea)/2,ea,ea,81.5,81.5,this.angle,i),a.end()}}}]),t}(),aa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACjCAYAAADmbK6AAAALKElEQVR42u2de2iW5R/GPzuqcwfnnKfNmafl5tTNHWzqNi3DEMQykcAoJSsySkspjSIk0iD/07Kf4R+FnVBDUTshZGpWUEJaaiWFgZlUFmXmIe3HNXthyebeZ77P9H13ffBG8Y8H7ut7vff93N/7fu4vGGPiFZiez/Qtw9lytJajfzfw9z/j+efPOv7cV8W+lUNY2a8T/ayTCRsWFLJA5rtUO1LLkV5p9LJeJizQiHeqnlOtmVFtdTGrrZkJCxYXsTgaI6r9MY4/UpNItW4mFDaXsTlaM6qVZlBq3UwofFrJp0HMWJ9DvXUzobCznJ1BzFjWlTLrZkJh/TDWBzFjTgo51s2EgnKI0Rrx+FiOWzNzVaym91Syx5qZsGBWb2ZFa0ZN6dbMhAWTcpkUrRmXD2K5NTNhgVbH0Zpxbl/mWjMTFvRIo0e0ZpzcncnWzISKtvmiMWNRJ4qslwmVXRXsas2Ix8ZwzFqZsGFREYtaM+Oaa1ljrUzYkJ9G/ok6TlzKjJWZVFor0y7c1Zu7WjLiqiGsskamXdHopyT4vALmzS9k/t19uHtKHlOSIMn6xAtARjIZ1sFcUSZ0Y4La+G6M18hS2IlCn4a+WoC0JNL0d/dUupdnUj40g6EJ2VEdMnhrOG/p5f/jUXz8SgmvaGU6KpNRNsLVQV0OdXf24s63h/P2gWoOrBjMCr2GJFQnnxnIM3q5P1PPmaYv+4ev4/C6UtbpV2gzXCkgL5W8Bwt48OIc6ul6Tp+s4+SyASxLiI4+PYCn1bHzDZxvaQW6vZzto7MYnQIpNkf7kp5EuozYUroqEjcNKHHd0Tl9mBPN1pk+hFeieGBnBtog7UXjsj9pWg+m6duecw2cay1OC/uxMC47KmP9OIYfoz1YoC20J/rzRG4quTZK2EAyJGs20qwUbYw0aNRmUxtvfUW/uEtNzc1NB1/X8LVyd15hh82F43AvD+VlXcsSJEZa1CQ3ejleAO7oxR3RDP0XN91X4+NXYb8nkv7UNTwV7e0YTdu7I3g33t7tuaEbNwSZpps2fSyvs4M2Tjhot+jb0Xzbltj8r5j/xVt/6Z1Ob93U1ZYO691EhhzchcHeXosVjcNZysyezLw4xRZt05R+fTeuj8vOj+zKyG0j2aZcVVs6v+QalnjrMFZASQYl2nBoSyz06e3j/Xk8rgWYmMvEICu2pm1HOTuc7okV8FgRj0XukwzanhvCc/F+72TjoQjdObN1OFuDLmh0xP+WHtxiI10ukJlCprb4guiv1fP+avZrS1C7NAkliHZjDtZwMMgqbukAltpMlwuMy2FcEBPqvfLLar5Uqi0hBdEwryy+Mv5n6zkbjTBa+dlMlwvUZFETZKGiFM7tvbhdJ3gSVRO0wzIjnxmvl/J6a6JsGMYGrahtpssFeqbR841S3mhN80OjOaSDEdqd6SjaMKgzgzRK7q1ib3PT9sYyNo7JZoyNFNvRcVMZmy7WOvIuryv/Zvdmdt90+nY0bRp3AvROohFwdwW7dTG7RFlbwlqdrbOBYg005NAQmZU0HWt1rXMBH1Xw0dQ8pmqzoaPmdhun7bHZjNVe9qP9eFQfO1VkUmHjhAVUZ1GtnKFSbjrkrPfy4i4UW5t/6ZxM54J0CqxFe81KpGsQyE4h23oYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjLna+bdOy+IiFquIpGq16Pb79cNYv3IIK/X/ugx+Ui6TVKvYVU9Nc8gX8od8Ir/IN/KPfCQ/yVfyl/6/pfJvLChkQdD6wyqntquCXYuKWJSfRr6D0dEAxV3xlw/khyD+kd/ku/88cHo+09tS3LBpO1HHCVUqcIA6CqB4K+6X6x35L/JM2loXurlWmUmlA5XogOIcK8/If5HncrSWo7F6cKIWPjT/RXGOlWfkv8hzaWsN4uaaysE6WIkOKM6x8oz8F3kusXqo2vxC5jtYiQ4ozrH0TeS5qIZcrB7qkrwdA8U5Vp6R/yLPZV8V+2L14Cl5THGwEh1QnGPlGfkv8lyUlIzFQ1cNYVVHrcjZ0VCcFe9Y+Eb+izy3ceclUl43aFN52DXXssYpnY6a4qFS8ZcP2uIf+e7inRh6pdFrdTGrm8uiHx/L8T2V7NGWzvJBLJ/bl7mTuzO5qBNFDoiJID/IF/KHfCK/yDfyT3O7d/KbfNfS80hNIrU0g9L6HOq1x5iTQo6FNpeLfCQ/yVfyl3xmXYwxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHNk9z4JwJ0SqKTdQkbyEwhU393T6V7zzR6pieR3tE1ITeVXImhe6BXDGZFdRbVeank2TBhcaEMr0rwbixj49IBLL2/L/ffmMuNHfqO9tFZjJYBd1ewO3Lx+IcVfKhqna5nHZYR6XFPH+5R3eeI5t9fx/fvjeC9Jdew5OKZKqFR/RDVKL6vL/f9PJafmyvHsL+a/ff24V6NmjZQbGchVbY6UM2BluqHv1rCqzVZ1KQlkZboepCdQvacPsz5bjTfXao+yMEaDt7Wk9tSIMVGig3TejCtJSM2bSpkPjWPqd1S6Zao+lORSYWmgkOjORRNwZqd5ezMSiHLRooNr5XwWjS6/1XHX9vL2T67N7M1iyXa9JCrYjVrS1gbpJyw6hBfsmiNCYT0P9/A+Wj1/6qGr5YNYFlJBiWJogEzezLz/ZG8/9s4fgtSyuvNYbyp1IONFBtu7sHNv4/j9yAxUHWrdaWsG9+N8XHd+YxkMpSy+aySz841cC5oXbmHCnnI74yxAgZ3YbDeB4PEQCOpBpFNZWwa2ZWRcdnxLsl00crtRB0n2lLg8JNRfDKoM4NsolgBSmw/UMADba1+qpmqfyf6x1u/0a/og3I+aEunP6/i86osqmygcGarF4p54dex/Bo0LqfqOfVwIQ/HW5/RSkwV1oN2WLlHTc82TljAwM4M1O5LWwYKZTjibYXNS0N5KcjKTe10PadfLObFuJwK4ozp+UzXDBTUjL+M5ZcBnRkQV53dMIwNQTu6bSTbVEzbi5awuVByd2E/FgaN0Tc1fKOzBHHV2aAdVSdv6s5NNkp7cSH/++xAng2yyHx+CM/H21YhfdPp+0U1X0TbSZnXx8faG9Aop0MS0cToh1p+iLcpOkLj9t/JOk5eqoPHxnDsyf486an5yqCDK7XZ1O4oZ4dWyy3FSXHUAYq47uyYbMZoGmhpG3DlEFb6uNiVBhpyaHhnBO8oJmfqOROJjzIiP43hJ8UxITqqX56S2Hur2KsOnq3nrE6PPNKPRwrSKbAZrjTQNZmuE7oxYXMZmxWbw9dxWFu4W4ezVedOE6qzI7oyYkY+M7TPeWsPbk2UX1qioSN+E3OZqOR2cReKE+qQRFN0Pi7y73g/UawU1KzezJpXwLz5hczX1ueUPKYkNb6GJQZ+j7/aAfRZREsv+quGsMoamXZBW2Gt5eU0alorEzYsKmJRa/m4NdeyxlqZsCGa84DKnVorEzboC7podis69DfIJmwufHMc7famvvmxZiYsKOtKWbRm1OcW1syEBboSJFozLh/EcmtmwgIluaM14/phrLdmJixYXMTiaM24p5I91syEBTphFOR7Y2tmwgJNvUFOr+tov3UzoaAv44KYUatv62ZCoemdhtG0+hzqrZsJBR08DWLG0gxKrZu50qvpxos3U5NItW4mFPp1ot+lPlpq2lYXs9qamVBZUMiC1ox4pJYjvlfStAu6GmTLcLboMtPIV4/6im5fFfuUi9QIap2MiWP+D96R1vPmsD/fAAAAAElFTkSuQmCC",na="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAQ7klEQVR42u3da4xdVRUA4D0zd2Y6nZY59DVtZ1puS9+lzC0YAi2UQ8AAQczFpPgA9VIeIQbirRqJ0cBUBVGjDr/QCKSNRSMmpuODxAdxqhgwxkhFjf6Sxh/+UUNVNGJCzR7uTvas7LXX2q9zzp3em6y0gTN3Zu75utZe5+yztxC9V+/Ve5X9En1Vjd7J6SFbLNF7naPw+l2jh7YHMBWssqMHtlsRdim4qsLtIawaPiHEQOLoNrA9iIkQDnRrVA1qD2LZ8ISoxYqKo13sQAtBWBayQWZUAXGRQM9JjCngDVY0UqJNDbQrMcaGmArdUKpIjbYiQLsCZCyIMQBy8QwnilR4Q5AuCpxFYvRFmBLbEiwKwpsSaWycVQGZBKMrwBjA9BhxDe57u2L2hOoKNCbOrgAZitEVYUxoKSMErQvSxYIzCkguRg5EF4AUhqUlhy/YUKSxcRaKsioYOQhD4I0yYxkR3PcJBcuFysmgsXAWBTMJyBCMIQh9kGGxXIXvexCQXbHGAMrBWTbM2CCpMSMLIxehC77lSJwXGth7M0FzoVJIXXDWQnGmhOkL0ic7YhhtWdGGkAuPAjUWGoF4faCmwBkbZmyUqUCyMqMLRA4+E6IsdTjidUHKBYrh9CnpRcH0ypKxsyOGEYNIIeTCOz91OIJ1QYoB5eAMyZo+MFNnyVTZ0YiRC9EGEMOyAgshxErHsL2XK1gOUgwohtM1a5YNM7Rsu4K0ZkcbRm4mpPBRwFZ5hg9eCqkrUB+csWGGogzNkqEgrdnRhpGLkINudaLgwvVB6oqzCjCTZElb2Y4B0gUjBtEG0ARnDRLjjoG9DwcshtQGlIPTljVjwUySLWNkyRCQVHa0ZUUTRAwgF91a33BEy0VKAcVwwqwZC2bqbOlUurllOxQkJzNyINoAYqjWhYYjWg5SCiiG05Q1U8FMjTIoS8YE6YORi1BHtJ4KIcQEEtTXUWAxpK44YVlPBdO1jCdFWTZIE8bVGEYMIRPcZGBw4HKQcoBiOE1ZMzbMgVQwU6JMAdKEEcuIJogUvg1YCCE2gsCO42DlIIVAKZwpYJaSLVNnSU6XjYHUmxhTmXaFaMO3EYkLqMC+FsLlIoVAKZzMrEnBhJeLfLNlKMrYWRIDCbOkFSSVHbHM6AKRC6/ODUewNqQ+OLlZkxpjUmV8MBbMUJSxyzY3Q1IgTRgxiBRCHdem0KDAUkBh9sRwwjEnAXMMgTnKhFlUtiwkS5rGka4g9SaGgxFmRC7AzTCEEBcyA36dDSsXqAtOLkysjGMwY5XxVChjZ0kuSCo7YlkRQsQQYtDEFsegsLoCxUp7Kpgps2UslFGzJGccSYHUmxhOZqwzEZqAbfUMCisHKIZzgsCpl3MTzMwTpi1bYp2477gyFKUxS7qWbdjY2EBS2dGE0QQRA7gNCyHEdhjE8RhUDlBT9tzgmjWZMFNlSy+Urk1OzCyJlW0XkK4YOQh1cDtcgwBrQmoDWkdgboBZE8mYsJSHlnFbJ+5bwmOPJ7lZkirbC8aRsMvmgtTHjBhGE0QbwJ2egUE1ITVlUC5OmDVdYNrKuN70xM6WoShjlW4464dbtiFIWK6x7GjESEHUUe0iYncnbMdQSE0Z1ITTNOb0hRmjjLtmS9dmJ2rp1jtuKktyyrb6YLEMCUHq2dGG0QQRQ7f72kzc+cJecerne8Wvv7JNPHPvenEkz8Sh3UtFc92QyGt9Yko/HgOLAIUZlItTz5ouMF3KuE+2jFLCQ1D6lm6fLMkBacuOJowYRBUXyfjuHjF3NhdnsfjvAfH6E9vFt9XxKgikEKgJZyyYalzOLeMu2bLbULI6bh+QGwmQ+rgRlumdGEQAao+K56bEL2woVUwOiev0r8OAUjiJrMmFCbvykGxZRAmPitK1dHM7bohyMsuyi/I8f0+e57fJYIKEZXpXo9E4mOf5XTKyLLvCBLETF8uY2SKepkC+dpX4T02Ivepr4HvZcOZ5fmee54fyPL+DmTUhzAs6n4n8bN5dr9f3YdkSg8nsxG0lPBVKVpNjG0/aGhzfLDmRZdnumZmZp8+c+cdZPV555fSr7Xb7s0jJ3i5Pcue4MxKkPPkvvXTqz/B92u32l0wYOzG1fkhcd/py8Rcbyq/vFM/KY1WA95h/3zzP71bfU6JsNpsfgj+P/FlbrdaDGExYyuXvLz8H+DudODH700ajcSM3W6Yu4alQ1spCOTd38jcKocTZbh9+9NixY99XJ8AEUkcpo9W64yH197m5k7+bnZ19QT+J09NHntQhwji/Jg58qi6++ofLxJ8gSFneVw2Ka4QQDfh1Ok4dZavVmtZ/nrm5k7/Vf55O1tRhboUw5+ZOvqyOl5+R/FyOHj32PYVU/tloNG5IXcKrhJIzngwp3fNjomazea/64BuNxts646f50lWv169utw9/DmtqdJQyZFaSJVuV6nq9fqMEof5/vV6/CYBqgJDlee+yAbF/+4i4ZWqZeNfaIfHWzn+Hx0KcEuU9+s8jv3ej0bhVlXOZydX/k0iRMeb8P0D5e6tj8zy/Xb9UJIc56h/yqVOnXul8lmuZ2bJslKmbHG7XrbpCmCXFRLvdfqQD6jTS3Jiy5I4OykM6ADV+1Eu1DmV6evopBORexzDi1L+X/HnGxsb2w3Hm9PSRJ9QxWPOTZdmlKht2hi+w6dkox5bqffI8fye3hDteGqKaHVsHXihKl0tB+h0cY+lute54AGRKDCW89LNTRynHb7ChUWVVjetOnJh9EYBUyPZeNCoOtsbFQwdXi4/esELcd+tq8cCHJ8UXp+viy9efLz7AgamjlKXc1AA1m83DoIRDlFubzeb96hhZLVTlgJ24gttutx+ONa50bHZKRenaeTs1OfpAfnr6yOOdE7EZdNwmlKocntXLNkA5JTGq47Ds+Lf94lWsyfnXleLfnIwJUN4DOnNYwuUxh2A3Ln9XULrfK8t3J27Tu3BVwiOjXJqoAy8UZej1yclGo3GTLN+gu3w+z/P3YaWbQqk3Ne12e4ZC+c8rxWsYytcPiP9RpZxCqWDKnxOiBNlyAUpOnGsoh4tA2Rm8X9xqtT6md5wyZmYe+0YRKL+1S/wYQ3n8zctBl5SBUv5djivfjMOPduIzcizeiYfr9foVvUwZG+XCuzibZKnSceZ5/v4QlKp8y7ElhnJlTeTP7BI/kllRYfzrfvHqFy4UX1vaL/aVlSmROzwbwdS29T2UcEwZF+V8ozM2lu1VY812u/15akypGh3TmFJesJbHHD167IdUxz3YJy5bNySuX1mbvy55CbMLtzU6tjGlsdFptVqfUMc0Go23F4wy1l2dSnbfvpMwVPe9WWVLDsrOJaF9MFu2Wq1PqmNkGce67xiXhTjdNwdlvV6/BgxfbPfBfVCetxi6b9/rlCup65QzM48dl2OjLMv26CibzeZ96sTIzEFdpwQXz9U1yrtVlpR/Zll2Fec65Y6l4pbbx8XHH9kknvzJlPjlHy8Tp29eKT5ou0aJoIT3w3dBlLDzVpfAJEZ1XOdaJZxnOSlvPMjPzxFljIvng914RwebsjYO7uhMyHu46sOfnf3Oz2TXDW6vvYxdFoIXz3Wc8J5zs9n8iOn2IrxTc2BM3Glqdp7dI553uaOjxrhwcob+MyuUpjs6WZZdon8OcigjPx8V+u+GTWFTSWEx3WYcdJ225jNDSE4q0GHCzlueHOyujn6bUWYgeb9ZZUaQPe+GzQ+Gc8+oOGhC+c1d4gfI16n3XDAhQ7+9qE9l01E2Go132GYKyXE1NiFDTcpoNpv3LOYJGWXNErJNW9sEp63p2RKiVPMn1bS1DgxsyhoGdGpmizj+xtXiDYnx7/vFmce3iWdW1cTVGEY4hQ2ZW0nNq8Qm/M6XbXm3S100lwGedFybuvNOibLI+ZS2ceU4eAxiEuvCkfmU8ycToDxETe6FgCBQHeqyAbFvfEhcO7BwDuXFCEbTZF840XeHK0jYcbs2OIGle0mVJ/mmnClEPQqxyTY5I8/zFhif7fSZee4bnrPOU4AssnRXHaVTCTd14dRDY3UbTIiSeFhsN/aMjgnqthFx880rxX3yATL5p3y4LPXzOaBkUyBjZMlYpbtQlIOBD475ZEusjMNSvkXe6VEoJVDkeZ2dzIfIFsRzU+JF2OyM9M9fTC/6SUYOyFQPjQ2nWiUjxnPfw5EeHqMWIqAeIFsAU847lJM2JM6xsewt1OIDLs99P7ZFHNdB/upS8XtPiD7PfLuCXJNolYyyFiNI/Zit65ItrOVafFbHcFohY7hPTN21Tjz4uc3iqfsnxKdX1MTl1OoYRFaMsToGB6Trw2JFP/OdZC2hJZ7ZkrMoAbbSGmelDJ91hFKuJeS7jlBMkJnrAqqJlgMUZS/dArPlGHNdSg5M3xXXtvquuEatvIYtDRhpxbUJuIgqsU5lGWtUploK0KuEU9mSW8YpmFQ556xNuYW7NiW13B+FkMiKHIy+C6eGgBxJvMR0oSv5hi6+z4HJyZoU0M2RVvDlrOQbcxVfX5AhZbuqy0v7ZstYMLHlAVlLTF9ALLbvu9Y5Zylpn/XOsd0ibIvxr2KCLHpp6SCUIdnSZSF+WzfOhem6GD+1KwR3Z4jNjrtDpNoZwmWd8yrupZN6Hx3fbMmFSe0Swdq2ZIPjxk1112Duo8OBGLrBkw/IoncdK2XHsdC9dHz204m50xh3tzFq1zFqtzHXrfCw7OgDsqyNnZLszVijsmXgrmNcmGtS78lIoMX2aJz03fKO2sDJddPQSCDPiQ1DfWBycY6XtXstc2PQKuxgG2McmXTPb9/9vmuJYXKyJrWjbeg+3xPM4O73nWqvbyw7xgZZSJbEUBa157cNJjdr2vb+5iA1YV3HxYscj30PDCEHIgcjtfm8K8hSsmRotkwFk5s1TTghUAopB6xrjHMBBkI0YYTZ0dZlxwLpkiWDULpmy5gwqayZgZNkA7oKQQCxctByYg0XIIEQQuRitGVHblMTA2ShKGPDpC6wu+DEgJqg2rDGDBtAF4Q6RAojp1xXGmSMbImVcR+YWNY04eQCtUG1ofUJ2/uvcETIgUhhdAE5GAlkKShjwHTNmhhODKgJqQ2sC14uOgyfD0IbRF+MlQaZAiZWyn2yJsTJATqGnHQO2Jhh+xlsACFCG0QbRtdyzQFZCZSxYPpmTS7Q5cjJHYNBYIkZpu99HoUQ/o4QIYSIZUZfjJ4ZMjZI32wZBDMU5yhy8pZTULl4XYP5fagMyEVoy4oupTpGduwnkloSlKEwY+AcQU4MhRTD6ovXBRwFzwWgCSEF0QVjJUGmgEllTS5OLlCIlIN1mS9mx/cZ5eLDALpCTI2RAhkTZQqYoTgpoCPECbaBHQ2ETL3PUl98ECAXYijG0OyYAmQoTG7W5ODkAF1CnVgm2JQx4okPA+gCMTbGskBGgRmaOblAh5GTORIrfKFx4VH4EIAxIXIxlg2SBbMvECY3e7oApbDaIgQu5/2HmeEKEINYiwSRi7EQkLFgumZOCuggctKGI4ULZN/vMeSLj0AYMytWEqMLzFg4fYDaoKaC6wvOFR4FkIPQFaILxrJAOsHsc/zlfYDWXE8qF22s8Pz5KHxcgEVALBtjJXBSSEOwFhk1Zgy4hitCT4hVw+gFs8/zwxqIBbUgyK7fcyA0PD9XX4iVxhiC0xdof6STWCsoBmKF7+cVCWFXQYyBMxRpf+STX1b0x45AhN0OMSrOGEirhrY/dfQAdjvS7oy+WCF6r1RIFxXWvlTRg1YVqFWBmxZbD99ig9pt0YPQw9rD1nstVri9V+/Ve3XrS/wfim4P5fIFxLoAAAAASUVORK5CYII=",ra=function(){function t(e,i){var a=this;Object(n.a)(this,t),this.config=i,this.canvas=null,this.context=null,this.sceneRenderer=null,this.loadingScreen=null,this.assetManager=null,this.bg=new c,this.bgFullscreen=new c,this.playerControls=null,this.timelineSlider=null,this.playButton=null,this.skinButton=null,this.animationButton=null,this.playTime=0,this.selectedBones=[],this.cancelId=0,this.popup=null,this.error=!1,this.skeleton=null,this.animationState=null,this.paused=!0,this.speed=1,this.time=new m,this.stopRequestAnimationFrame=!1,this.disposed=!1,this.viewport={},this.currentViewport={},this.previousViewport={},this.viewportTransitionStart=0,this.eventListeners=[];var r="string"===typeof e?document.getElementById(e):e;if(null==r)throw new Error("SpinePlayer parent not found: "+e);this.parent=r,void 0===i.showControls&&(i.showControls=!0);var s=i.showControls?'\n<div class="spine-player-controls spine-player-popup-parent spine-player-controls-hidden">\n<div class="spine-player-timeline"></div>\n<div class="spine-player-buttons">\n<button class="spine-player-button spine-player-button-icon-pause"></button>\n<div class="spine-player-button-spacer"></div>\n<button class="spine-player-button spine-player-button-icon-speed"></button>\n<button class="spine-player-button spine-player-button-icon-animations"></button>\n<button class="spine-player-button spine-player-button-icon-skins"></button>\n<button class="spine-player-button spine-player-button-icon-settings"></button>\n<button class="spine-player-button spine-player-button-icon-fullscreen"></button>\n<img class="spine-player-button-icon-spine-logo" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20104%2031.16%22%3E%3Cpath%20d%3D%22M104%2012.68a1.31%201.31%200%200%201-.37%201%201.28%201.28%200%200%201-.85.31H91.57a10.51%2010.51%200%200%200%20.29%202.55%204.92%204.92%200%200%200%201%202%204.27%204.27%200%200%200%201.64%201.26%206.89%206.89%200%200%200%202.6.44%2010.66%2010.66%200%200%200%202.17-.2%2012.81%2012.81%200%200%200%201.64-.44q.69-.25%201.14-.44a1.87%201.87%200%200%201%20.68-.2.44.44%200%200%201%20.27.04.43.43%200%200%201%20.16.2%201.38%201.38%200%200%201%20.09.37%204.89%204.89%200%200%201%200%20.58%204.14%204.14%200%200%201%200%20.43v.32a.83.83%200%200%201-.09.26%201.1%201.1%200%200%201-.17.22%202.77%202.77%200%200%201-.61.34%208.94%208.94%200%200%201-1.32.46%2018.54%2018.54%200%200%201-1.88.41%2013.78%2013.78%200%200%201-2.28.18%2010.55%2010.55%200%200%201-3.68-.59%206.82%206.82%200%200%201-2.66-1.74%207.44%207.44%200%200%201-1.63-2.89%2013.48%2013.48%200%200%201-.55-4%2012.76%2012.76%200%200%201%20.57-3.94%208.35%208.35%200%200%201%201.64-3%207.15%207.15%200%200%201%202.58-1.87%208.47%208.47%200%200%201%203.39-.65%208.19%208.19%200%200%201%203.41.64%206.46%206.46%200%200%201%202.32%201.73%207%207%200%200%201%201.3%202.54%2011.17%2011.17%200%200%201%20.43%203.13zm-3.14-.93a5.69%205.69%200%200%200-1.09-3.86%204.17%204.17%200%200%200-3.42-1.4%204.52%204.52%200%200%200-2%20.44%204.41%204.41%200%200%200-1.47%201.15A5.29%205.29%200%200%200%2092%209.75a7%207%200%200%200-.36%202zM80.68%2021.94a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.31%206.31%200%200%201-.76%200%206.5%206.5%200%200%201-.78%200%201.74%201.74%200%200%201-.47-.11.59.59%200%200%201-.25-.18.42.42%200%200%201-.08-.26V12a9.8%209.8%200%200%200-.23-2.35%204.86%204.86%200%200%200-.66-1.53%202.88%202.88%200%200%200-1.13-1%203.57%203.57%200%200%200-1.6-.34%204%204%200%200%200-2.35.83A12.71%2012.71%200%200%200%2069.11%2010v11.9a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.51%206.51%200%200%201-.78%200%206.31%206.31%200%200%201-.76%200%201.88%201.88%200%200%201-.48-.11.52.52%200%200%201-.25-.18.46.46%200%200%201-.07-.26v-17a.53.53%200%200%201%20.03-.21.5.5%200%200%201%20.23-.19%201.28%201.28%200%200%201%20.44-.11%208.53%208.53%200%200%201%201.39%200%201.12%201.12%200%200%201%20.43.11.6.6%200%200%201%20.22.19.47.47%200%200%201%20.07.26V7.2a10.46%2010.46%200%200%201%202.87-2.36%206.17%206.17%200%200%201%202.88-.75%206.41%206.41%200%200%201%202.87.58%205.16%205.16%200%200%201%201.88%201.54%206.15%206.15%200%200%201%201%202.26%2013.46%2013.46%200%200%201%20.31%203.11z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M43.35%202.86c.09%202.6%201.89%204%205.48%204.61%203%20.48%205.79.24%206.69-2.37%201.75-5.09-2.4-3.82-6-4.39s-6.31-2.03-6.17%202.15zm1.08%2010.69c.33%201.94%202.14%203.06%204.91%203s4.84-1.16%205.13-3.25c.53-3.88-2.53-2.38-5.3-2.3s-5.4-1.26-4.74%202.55zM48%2022.44c.55%201.45%202.06%202.06%204.1%201.63s3.45-1.11%203.33-2.76c-.21-3.06-2.22-2.1-4.26-1.66S47%2019.6%2048%2022.44zm1.78%206.78c.16%201.22%201.22%202%202.88%201.93s2.92-.67%203.13-2c.4-2.43-1.46-1.53-3.12-1.51s-3.17-.82-2.89%201.58z%22%20fill%3D%22%23ff4000%22%2F%3E%3Cpath%20d%3D%22M35.28%2013.16a15.33%2015.33%200%200%201-.48%204%208.75%208.75%200%200%201-1.42%203%206.35%206.35%200%200%201-2.32%201.91%207.14%207.14%200%200%201-3.16.67%206.1%206.1%200%200%201-1.4-.15%205.34%205.34%200%200%201-1.26-.47%207.29%207.29%200%200%201-1.24-.81q-.61-.49-1.29-1.15v8.51a.47.47%200%200%201-.08.26.56.56%200%200%201-.25.19%201.74%201.74%200%200%201-.47.11%206.47%206.47%200%200%201-.78%200%206.26%206.26%200%200%201-.76%200%201.89%201.89%200%200%201-.48-.11.49.49%200%200%201-.25-.19.51.51%200%200%201-.07-.26V4.91a.57.57%200%200%201%20.06-.27.46.46%200%200%201%20.23-.18%201.47%201.47%200%200%201%20.44-.1%207.41%207.41%200%200%201%201.3%200%201.45%201.45%200%200%201%20.43.1.52.52%200%200%201%20.24.18.51.51%200%200%201%20.07.27V7.2a18.06%2018.06%200%200%201%201.49-1.38%209%209%200%200%201%201.45-1%206.82%206.82%200%200%201%201.49-.59%207.09%207.09%200%200%201%204.78.52%206%206%200%200%201%202.13%202%208.79%208.79%200%200%201%201.2%202.9%2015.72%2015.72%200%200%201%20.4%203.51zm-3.28.36a15.64%2015.64%200%200%200-.2-2.53%207.32%207.32%200%200%200-.69-2.17%204.06%204.06%200%200%200-1.3-1.51%203.49%203.49%200%200%200-2-.57%204.1%204.1%200%200%200-1.2.18%204.92%204.92%200%200%200-1.2.57%208.54%208.54%200%200%200-1.28%201A15.77%2015.77%200%200%200%2022.76%2010v6.77a13.53%2013.53%200%200%200%202.46%202.4%204.12%204.12%200%200%200%202.44.83%203.56%203.56%200%200%200%202-.57A4.28%204.28%200%200%200%2031%2018a7.58%207.58%200%200%200%20.77-2.12%2011.43%2011.43%200%200%200%20.23-2.36zM12%2017.3a5.39%205.39%200%200%201-.48%202.33%204.73%204.73%200%200%201-1.37%201.72%206.19%206.19%200%200%201-2.12%201.06%209.62%209.62%200%200%201-2.71.36%2010.38%2010.38%200%200%201-3.21-.5A7.63%207.63%200%200%201%201%2021.82a3.25%203.25%200%200%201-.66-.43%201.09%201.09%200%200%201-.3-.53%203.59%203.59%200%200%201-.04-.93%204.06%204.06%200%200%201%200-.61%202%202%200%200%201%20.09-.4.42.42%200%200%201%20.16-.22.43.43%200%200%201%20.24-.07%201.35%201.35%200%200%201%20.61.26q.41.26%201%20.56a9.22%209.22%200%200%200%201.41.55%206.25%206.25%200%200%200%201.87.26%205.62%205.62%200%200%200%201.44-.17%203.48%203.48%200%200%200%201.12-.5%202.23%202.23%200%200%200%20.73-.84%202.68%202.68%200%200%200%20.26-1.21%202%202%200%200%200-.37-1.21%203.55%203.55%200%200%200-1-.87%208.09%208.09%200%200%200-1.36-.66l-1.56-.61a16%2016%200%200%201-1.57-.73%206%206%200%200%201-1.37-1%204.52%204.52%200%200%201-1-1.4%204.69%204.69%200%200%201-.37-2%204.88%204.88%200%200%201%20.39-1.87%204.46%204.46%200%200%201%201.16-1.61%205.83%205.83%200%200%201%201.94-1.11A8.06%208.06%200%200%201%206.53%204a8.28%208.28%200%200%201%201.36.11%209.36%209.36%200%200%201%201.23.28%205.92%205.92%200%200%201%20.94.37%204.09%204.09%200%200%201%20.59.35%201%201%200%200%201%20.26.26.83.83%200%200%201%20.09.26%201.32%201.32%200%200%200%20.06.35%203.87%203.87%200%200%201%200%20.51%204.76%204.76%200%200%201%200%20.56%201.39%201.39%200%200%201-.09.39.5.5%200%200%201-.16.22.35.35%200%200%201-.21.07%201%201%200%200%201-.49-.21%207%207%200%200%200-.83-.44%209.26%209.26%200%200%200-1.2-.44%205.49%205.49%200%200%200-1.58-.16%204.93%204.93%200%200%200-1.4.18%202.69%202.69%200%200%200-1%20.51%202.16%202.16%200%200%200-.59.83%202.43%202.43%200%200%200-.2%201%202%202%200%200%200%20.38%201.24%203.6%203.6%200%200%200%201%20.88%208.25%208.25%200%200%200%201.38.68l1.58.62q.8.32%201.59.72a6%206%200%200%201%201.39%201%204.37%204.37%200%200%201%201%201.36%204.46%204.46%200%200%201%20.37%201.8z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E">\n</div></div>':"";this.parent.appendChild(this.dom=ca('<div class="spine-player" style="position:relative;height:100%"><canvas class="spine-player-canvas" style="display:block;width:100%;height:100%"></canvas>'.concat(s,"</div>")));try{this.validateConfig(i)}catch(o){this.showError(o.message,o)}this.initialize(),this.addEventListener(window,"resize",(function(){return a.drawFrame(!1)})),requestAnimationFrame((function(){return a.drawFrame()}))}return Object(r.a)(t,[{key:"dispose",value:function(){var t,e,i;null===(t=this.sceneRenderer)||void 0===t||t.dispose(),null===(e=this.loadingScreen)||void 0===e||e.dispose(),null===(i=this.assetManager)||void 0===i||i.dispose();for(var a=0;a<this.eventListeners.length;a++){var n=this.eventListeners[a];n.target.removeEventListener(n.event,n.func)}this.parent.removeChild(this.dom),this.disposed=!0}},{key:"addEventListener",value:function(t,e,i){this.eventListeners.push({target:t,event:e,func:i}),t.addEventListener(e,i)}},{key:"validateConfig",value:function(t){if(!t)throw new Error("A configuration object must be passed to to new SpinePlayer().");if(t.skelUrl&&(t.binaryUrl=t.skelUrl),!t.jsonUrl&&!t.binaryUrl)throw new Error("A URL must be specified for the skeleton JSON or binary file.");if(!t.atlasUrl)throw new Error("A URL must be specified for the atlas file.");if(t.backgroundColor||(t.backgroundColor=t.alpha?"00000000":"000000"),t.fullScreenBackgroundColor||(t.fullScreenBackgroundColor=t.backgroundColor),t.backgroundImage&&!t.backgroundImage.url&&(t.backgroundImage=void 0),void 0===t.premultipliedAlpha&&(t.premultipliedAlpha=!0),void 0===t.preserveDrawingBuffer&&(t.preserveDrawingBuffer=!1),void 0===t.mipmaps&&(t.mipmaps=!0),t.debug||(t.debug={bones:!1,clipping:!1,bounds:!1,hulls:!1,meshes:!1,paths:!1,points:!1,regions:!1}),t.animations&&t.animation&&t.animations.indexOf(t.animation)<0)throw new Error("Animation '"+t.animation+"' is not in the config animation list: "+da(t.animations));if(t.skins&&t.skin&&t.skins.indexOf(t.skin)<0)throw new Error("Default skin '"+t.skin+"' is not in the config skins list: "+da(t.skins));t.viewport||(t.viewport={}),t.viewport.animations||(t.viewport.animations={}),void 0===t.viewport.debugRender&&(t.viewport.debugRender=!1),void 0===t.viewport.transitionTime&&(t.viewport.transitionTime=.25),t.controlBones||(t.controlBones=[]),void 0===t.showLoading&&(t.showLoading=!0),void 0===t.defaultMix&&(t.defaultMix=.25)}},{key:"initialize",value:function(){var t=this,e=this.config,i=this.dom;if(!e.alpha){var a=e.backgroundColor;this.dom.style.backgroundColor=("#"==a.charAt(0)?a:"#"+a).substr(0,7)}try{this.canvas=la(i,"spine-player-canvas"),this.context=new ni(this.canvas,{alpha:e.alpha,preserveDrawingBuffer:e.preserveDrawingBuffer}),this.sceneRenderer=new Ki(this.canvas,this.context,!0),e.showLoading&&(this.loadingScreen=new ia(this.sceneRenderer))}catch(p){return this.showError("Sorry, your browser does not support \nPlease use the latest version of Firefox, Chrome, Edge, or Safari.",p),null}if(this.assetManager=new li(this.context,"",e.downloader),e.rawDataURIs)for(var n in e.rawDataURIs)this.assetManager.setRawDataURI(n,e.rawDataURIs[n]);if(e.jsonUrl?this.assetManager.loadJson(e.jsonUrl):this.assetManager.loadBinary(e.binaryUrl),this.assetManager.loadTextureAtlas(e.atlasUrl),e.backgroundImage&&this.assetManager.loadTexture(e.backgroundImage.url),this.bg.setFromString(e.backgroundColor),this.bgFullscreen.setFromString(e.fullScreenBackgroundColor),e.showControls){this.playerControls=i.children[1];var r=this.playerControls.children,s=r[0],o=r[1].children;this.playButton=o[0];var h=o[2];this.animationButton=o[3],this.skinButton=o[4];var l=o[5],c=o[6],u=o[7];this.timelineSlider=new ha,s.appendChild(this.timelineSlider.create()),this.timelineSlider.change=function(e){t.pause();var i=t.animationState.getCurrent(0).animation.duration*e;t.animationState.update(i-t.playTime),t.animationState.apply(t.skeleton),t.skeleton.updateWorldTransform(),t.playTime=i},this.playButton.onclick=function(){return t.paused?t.play():t.pause()},h.onclick=function(){return t.showSpeedDialog(h)},this.animationButton.onclick=function(){return t.showAnimationsDialog(t.animationButton)},this.skinButton.onclick=function(){return t.showSkinsDialog(t.skinButton)},l.onclick=function(){return t.showSettingsDialog(l)};var d=this.canvas.clientWidth,f=this.canvas.clientHeight,v=this.canvas.style.width,m=this.canvas.style.height,g=!1;c.onclick=function(){var e=function(){(g=!g)||(t.canvas.style.width=d+"px",t.canvas.style.height=f+"px",t.drawFrame(!1),requestAnimationFrame((function(){t.canvas.style.width=v,t.canvas.style.height=m})))},a=i;a.onfullscreenchange=e,a.onwebkitfullscreenchange=e;var n=document;n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement?n.exitFullscreen?n.exitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.msExitFullscreen&&n.msExitFullscreen():(d=t.canvas.clientWidth,f=t.canvas.clientHeight,v=t.canvas.style.width,m=t.canvas.style.height,a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen())},u.onclick=function(){return window.open("http://esotericsoftware.com")}}return i}},{key:"loadSkeleton",value:function(){var t=this;if(!this.error){this.assetManager.hasErrors()&&this.showError("Error: Assets could not be loaded.\n"+da(this.assetManager.getErrors()));var e,i,n=this.config,r=this.assetManager.require(n.atlasUrl),s=this.context.gl,o=s.getExtension("EXT_texture_filter_anisotropic"),h=-1!=s.getParameter(s.VERSION).indexOf("WebGL 1.0"),l=Object(a.a)(r.pages);try{for(l.s();!(e=l.n()).done;){var c=e.value,d=c.minFilter,f=n.mipmaps,v=u.isPowerOfTwo(c.width)&&u.isPowerOfTwo(c.height);h&&!v&&(f=!1),f&&(o?(s.texParameterf(s.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,8),d=At.MipMapLinearLinear):d=At.Linear,c.texture.setFilters(d,At.Nearest)),d!=At.Nearest&&d!=At.Linear&&c.texture.update(!0)}}catch(x){l.e(x)}finally{l.f()}if(n.jsonUrl)try{var m=this.assetManager.remove(n.jsonUrl);if(!m)throw new Error("Empty JSON data.");if(n.jsonField&&!(m=m[n.jsonField]))throw new Error("JSON field does not exist: "+n.jsonField);var g=new Qe(new Ht(r));i=g.readSkeletonData(m)}catch(k){return void this.showError("Error: Could not load skeleton JSON.\n".concat(k.message),k)}else{var p=this.assetManager.remove(n.binaryUrl),b=new ye(new Ht(r));try{i=b.readSkeletonData(p)}catch(k){return void this.showError("Error: Could not load skeleton binary.\n".concat(k.message),k)}}this.skeleton=new de(i);var y=new Rt(i);y.defaultMix=n.defaultMix,this.animationState=new yt(y),n.controlBones.forEach((function(e){i.findBone(e)||t.showError("Error: Control bone does not exist in skeleton: ".concat(e))})),!n.skin&&i.skins.length&&(n.skin=i.skins[0].name),n.skins&&n.skin.length&&n.skins.forEach((function(e){t.skeleton.data.findSkin(e)||t.showError("Error: Skin in config list does not exist in skeleton: ".concat(e))})),n.skin&&(this.skeleton.data.findSkin(n.skin)||this.showError("Error: Skin does not exist in skeleton: ".concat(n.skin)),this.skeleton.setSkinByName(n.skin),this.skeleton.setSlotsToSetupPose()),Object.getOwnPropertyNames(n.viewport.animations).forEach((function(e){i.findAnimation(e)||t.showError("Error: Animation for which a viewport was specified does not exist in skeleton: ".concat(e))})),n.animations&&n.animations.length&&(n.animations.forEach((function(e){t.skeleton.data.findAnimation(e)||t.showError("Error: Animation in config list does not exist in skeleton: ".concat(e))})),n.animation||(n.animation=n.animations[0])),n.animation&&!i.findAnimation(n.animation)&&this.showError("Error: Animation does not exist in skeleton: ".concat(n.animation)),this.setupInput(),n.showControls&&((1==i.skins.length||n.skins&&1==n.skins.length)&&this.skinButton.classList.add("spine-player-hidden"),(1==i.animations.length||n.animations&&1==n.animations.length)&&this.animationButton.classList.add("spine-player-hidden")),n.success&&n.success(this);var w=this.animationState.getCurrent(0);w?this.currentViewport||(this.setViewport(w.animation),this.play()):n.animation?(w=this.setAnimation(n.animation),this.play()):((w=this.animationState.setEmptyAnimation(0)).trackEnd=1e8,this.setViewport(w.animation),this.pause())}}},{key:"setupInput",value:function(){var t=this,e=this.config,i=e.controlBones;if(i.length||e.showControls){var a=this.selectedBones=new Array(i.length),n=this.canvas,r=null,s=new v,o=new ci,h=new ci,l=new v,c=this.skeleton,d=this.sceneRenderer,f=function(t,e){h.set(t,n.clientHeight-e,0),s.x=s.y=0;for(var r=24,l=0,u=null,f=0;f<i.length;f++){a[f]=null;var v=c.findBone(i[f]);if(v){var m=d.camera.worldToScreen(o.set(v.worldX,v.worldY,0),n.clientWidth,n.clientHeight).distance(h);m<r&&(r=m,u=v,l=f,s.x=o.x-h.x,s.y=o.y-h.y)}}return u&&(a[l]=u),u};if(new Mi(n).addListener({down:function(t,e){r=f(t,e)},up:function(){r?r=null:e.showControls&&(t.paused?t.play():t.pause())},dragged:function(t,e){r&&(t=u.clamp(t+s.x,0,n.clientWidth),e=u.clamp(e-s.y,0,n.clientHeight),d.camera.screenToWorld(o.set(t,e,0),n.clientWidth,n.clientHeight),r.parent?(r.parent.worldToLocal(l.set(o.x-c.x,o.y-c.y)),r.x=l.x,r.y=l.y):(r.x=o.x-c.x,r.y=o.y-c.y))},moved:function(t,e){return f(t,e)}}),e.showControls){this.addEventListener(document,"mousemove",(function(t){t instanceof MouseEvent&&b(t.clientX,t.clientY)})),this.addEventListener(document,"touchmove",(function(t){if(t instanceof TouchEvent){var e=t.changedTouches;if(e.length){var i=e[0];b(i.clientX,i.clientY)}}}));var m=function(t,e,i){var a=t-i.left,n=e-i.top;return a>=0&&a<=i.width&&n>=0&&n<=i.height},g=!0,p=!1,b=function(e,i){var a=la(t.dom,"spine-player-popup");g=m(e,i,t.playerControls.getBoundingClientRect()),p=m(e,i,n.getBoundingClientRect()),clearTimeout(t.cancelId),!a&&!g&&!p&&!t.paused?t.playerControls.classList.add("spine-player-controls-hidden"):t.playerControls.classList.remove("spine-player-controls-hidden"),g||a||t.paused||(t.cancelId=setTimeout((function(){t.paused||t.playerControls.classList.add("spine-player-controls-hidden")}),1e3))}}}}},{key:"play",value:function(){var t=this;this.paused=!1;var e=this.config;e.showControls&&(this.cancelId=setTimeout((function(){t.paused||t.playerControls.classList.add("spine-player-controls-hidden")}),1e3),this.playButton.classList.remove("spine-player-button-icon-play"),this.playButton.classList.add("spine-player-button-icon-pause"),e.animation||(e.animations&&e.animations.length?e.animation=e.animations[0]:this.skeleton.data.animations.length&&(e.animation=this.skeleton.data.animations[0].name),e.animation&&this.setAnimation(e.animation)))}},{key:"pause",value:function(){this.paused=!0,this.config.showControls&&(this.playerControls.classList.remove("spine-player-controls-hidden"),clearTimeout(this.cancelId),this.playButton.classList.remove("spine-player-button-icon-pause"),this.playButton.classList.add("spine-player-button-icon-play"))}},{key:"setAnimation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=this.setViewport(t),this.animationState.setAnimationWith(0,t,e)}},{key:"addAnimation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t=this.setViewport(t),this.animationState.addAnimationWith(0,t,e,i)}},{key:"setViewport",value:function(t){if("string"==typeof t){var e=this.skeleton.data.findAnimation(t);if(!e)throw new Error("Animation not found: "+t);t=e}this.previousViewport=this.currentViewport;var i=this.config.viewport,a=this.currentViewport={padLeft:void 0!==i.padLeft?i.padLeft:"10%",padRight:void 0!==i.padRight?i.padRight:"10%",padTop:void 0!==i.padTop?i.padTop:"10%",padBottom:void 0!==i.padBottom?i.padBottom:"10%"};void 0!==i.x&&void 0!==i.y&&i.width&&i.height?(a.x=i.x,a.y=i.y,a.width=i.width,a.height=i.height):this.calculateAnimationViewport(t,a);var n=this.config.viewport.animations[t.name];return n&&(void 0!==n.x&&void 0!==n.y&&n.width&&n.height&&(a.x=n.x,a.y=n.y,a.width=n.width,a.height=n.height),void 0!==n.padLeft&&(a.padLeft=n.padLeft),void 0!==n.padRight&&(a.padRight=n.padRight),void 0!==n.padTop&&(a.padTop=n.padTop),void 0!==n.padBottom&&(a.padBottom=n.padBottom)),a.padLeft=this.percentageToWorldUnit(a.width,a.padLeft),a.padRight=this.percentageToWorldUnit(a.width,a.padRight),a.padBottom=this.percentageToWorldUnit(a.height,a.padBottom),a.padTop=this.percentageToWorldUnit(a.height,a.padTop),this.viewportTransitionStart=performance.now(),t}},{key:"percentageToWorldUnit",value:function(t,e){return"string"===typeof e?t*parseFloat(e.substr(0,e.length-1))/100:e}},{key:"calculateAnimationViewport",value:function(t,e){this.skeleton.setToSetupPose();for(var i=t.duration?t.duration/100:0,a=0,n=1e8,r=-1e8,s=1e8,o=-1e8,h=new v,l=new v,c=0;c<100;c++,a+=i)t.apply(this.skeleton,a,a,!1,[],1,w.setup,x.mixIn),this.skeleton.updateWorldTransform(),this.skeleton.getBounds(h,l),isNaN(h.x)||isNaN(h.y)||isNaN(l.x)||isNaN(l.y)?this.showError("Animation bounds are invalid: "+t.name):(n=Math.min(h.x,n),r=Math.max(h.x+l.x,r),s=Math.min(h.y,s),o=Math.max(h.y+l.y,o));e.x=n,e.y=s,e.width=r-n,e.height=o-s}},{key:"drawFrame",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{if(this.error)return;if(this.disposed)return;e&&!this.stopRequestAnimationFrame&&requestAnimationFrame((function(){return t.drawFrame()}));var i=document,a=i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement,n=a?this.bgFullscreen:this.bg;this.time.update();var r=this.time.delta,s=this.assetManager.isLoadingComplete();!this.skeleton&&s&&this.loadSkeleton();var o=this.skeleton,h=this.config;if(o){var l=this.sceneRenderer;l.resize(qi.Expand);var u=this.paused?0:r*this.speed;if(h.frame&&h.frame(this,u),!this.paused&&(this.animationState.update(u),this.animationState.apply(o),o.updateWorldTransform(),h.showControls)){this.playTime+=u;var d=this.animationState.getCurrent(0);if(d){for(var f=d.animation.duration;this.playTime>=f&&0!=f;)this.playTime-=f;this.playTime=Math.max(0,Math.min(this.playTime,f)),this.timelineSlider.setValue(this.playTime/f)}}var v=this.viewport;if(v.x=this.currentViewport.x-this.currentViewport.padLeft,v.y=this.currentViewport.y-this.currentViewport.padBottom,v.width=this.currentViewport.width+this.currentViewport.padLeft+this.currentViewport.padRight,v.height=this.currentViewport.height+this.currentViewport.padBottom+this.currentViewport.padTop,this.previousViewport){var m=(performance.now()-this.viewportTransitionStart)/1e3/h.viewport.transitionTime;if(m<1){var g=this.previousViewport.x-this.previousViewport.padLeft,p=this.previousViewport.y-this.previousViewport.padBottom,b=this.previousViewport.width+this.previousViewport.padLeft+this.previousViewport.padRight,y=this.previousViewport.height+this.previousViewport.padBottom+this.previousViewport.padTop;v.x=g+(v.x-g)*m,v.y=p+(v.y-p)*m,v.width=b+(v.width-b)*m,v.height=y+(v.height-y)*m}}l.camera.zoom=this.canvas.height/this.canvas.width>v.height/v.width?v.width/this.canvas.width:v.height/this.canvas.height,l.camera.position.x=v.x+v.width/2,l.camera.position.y=v.y+v.height/2;var w=this.context.gl;w.clearColor(n.r,n.g,n.b,n.a),w.clear(w.COLOR_BUFFER_BIT),h.update&&h.update(this,u),l.begin();var x=h.backgroundImage;if(x){var k=this.assetManager.require(x.url);void 0!==x.x&&void 0!==x.y&&x.width&&x.height?l.drawTexture(k,x.x,x.y,x.width,x.height):l.drawTexture(k,v.x,v.y,v.width,v.height)}l.drawSkeleton(o,h.premultipliedAlpha),((l.skeletonDebugRenderer.drawBones=h.debug.bones)||(l.skeletonDebugRenderer.drawBoundingBoxes=h.debug.bounds)||(l.skeletonDebugRenderer.drawClipping=h.debug.clipping)||(l.skeletonDebugRenderer.drawMeshHull=h.debug.hulls)||(l.skeletonDebugRenderer.drawPaths=h.debug.paths)||(l.skeletonDebugRenderer.drawRegionAttachments=h.debug.regions)||(l.skeletonDebugRenderer.drawMeshTriangles=h.debug.meshes))&&l.drawSkeletonDebug(o,h.premultipliedAlpha);var A=h.controlBones;if(A.length){var S=this.selectedBones;w.lineWidth(2);for(var C=0;C<A.length;C++){var E=o.findBone(A[C]);if(E){var I=S[C]?fa:ma,O=S[C]?va:ga;l.circle(!0,o.x+E.worldX,o.y+E.worldY,20,I),l.circle(!1,o.x+E.worldX,o.y+E.worldY,20,O)}}}h.viewport.debugRender&&(w.lineWidth(1),l.rect(!1,this.currentViewport.x,this.currentViewport.y,this.currentViewport.width,this.currentViewport.height,c.GREEN),l.rect(!1,v.x,v.y,v.width,v.height,c.RED)),l.end(),h.draw&&h.draw(this,u)}h.showLoading&&(this.loadingScreen.backgroundColor.setFromColor(n),this.loadingScreen.draw(s)),s&&h.loading&&h.loading(this,r)}catch(M){this.showError("Error: Unable to render skeleton.\n".concat(M.message),M)}}},{key:"stopRendering",value:function(){this.stopRequestAnimationFrame=!0}},{key:"hidePopup",value:function(t){return null!=this.popup&&this.popup.hide(t)}},{key:"showSpeedDialog",value:function(t){var e=this,i="speed";if(!this.hidePopup(i)){var a=new sa(i,t,this,this.playerControls,'\n<div class="spine-player-popup-title">Speed</div>\n<hr>\n<div class="spine-player-row" style="align-items:center;padding:8px">\n<div class="spine-player-column">\n\t<div class="spine-player-speed-slider" style="margin-bottom:4px"></div>\n\t<div class="spine-player-row" style="justify-content:space-between"><div>0.1x</div><div>1x</div><div>2x</div></div>\n</div>\n</div>'),n=new ha(2,.1,!0);la(a.dom,"spine-player-speed-slider").appendChild(n.create()),n.setValue(this.speed/2),n.change=function(t){return e.speed=2*t},a.show()}}},{key:"showAnimationsDialog",value:function(t){var e=this,i="animations";if(!this.hidePopup(i)&&this.skeleton&&this.skeleton.data.animations.length){var a=new sa(i,t,this,this.playerControls,'<div class="spine-player-popup-title">Animations</div><hr><ul class="spine-player-list"></ul>'),n=la(a.dom,"spine-player-list");this.skeleton.data.animations.forEach((function(t){if(!(e.config.animations&&e.config.animations.indexOf(t.name)<0)){var i=ca('<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>');t.name==e.config.animation&&i.classList.add("selected"),la(i,"selectable-text").innerText=t.name,n.appendChild(i),i.onclick=function(){ua(n.children,"selected"),i.classList.add("selected"),e.config.animation=t.name,e.playTime=0,e.setAnimation(t.name),e.play()}}})),a.show()}}},{key:"showSkinsDialog",value:function(t){var e=this,i="skins";if(!this.hidePopup(i)&&this.skeleton&&this.skeleton.data.animations.length){var a=new sa(i,t,this,this.playerControls,'<div class="spine-player-popup-title">Skins</div><hr><ul class="spine-player-list"></ul>'),n=la(a.dom,"spine-player-list");this.skeleton.data.skins.forEach((function(t){if(!(e.config.skins&&e.config.skins.indexOf(t.name)<0)){var i=ca('<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>');t.name==e.config.skin&&i.classList.add("selected"),la(i,"selectable-text").innerText=t.name,n.appendChild(i),i.onclick=function(){ua(n.children,"selected"),i.classList.add("selected"),e.config.skin=t.name,e.skeleton.setSkinByName(e.config.skin),e.skeleton.setSlotsToSetupPose()}}})),a.show()}}},{key:"showSettingsDialog",value:function(t){var e=this,i="settings";if(!this.hidePopup(i)&&this.skeleton&&this.skeleton.data.animations.length){var a=new sa(i,t,this,this.playerControls,'<div class="spine-player-popup-title">Debug</div><hr><ul class="spine-player-list"></li>'),n=la(a.dom,"spine-player-list"),r=function(t,i){var a=ca('<li class="spine-player-list-item"></li>'),r=new oa(t);a.appendChild(r.create());var s=e.config.debug;r.setEnabled(s[i]),r.change=function(t){return s[i]=t},n.appendChild(a)};r("Bones","bones"),r("Regions","regions"),r("Meshes","meshes"),r("Bounds","bounds"),r("Paths","paths"),r("Clipping","clipping"),r("Points","points"),r("Hulls","hulls"),a.show()}}},{key:"showError",value:function(t,e){if(!this.error)throw this.error=!0,this.dom.appendChild(ca('<div class="spine-player-error" style="background:#000;color:#fff;position:absolute;top:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;overflow:auto;z-index:999">'+t.replace("\n","<br><br>")+"</div>")),this.config.error&&this.config.error(this,t),e||new Error(t);if(e)throw e}}]),t}(),sa=function(){function t(e,i,a,r,s){Object(n.a)(this,t),this.id=e,this.button=i,this.player=a,this.dom=ca('<div class="spine-player-popup spine-player-hidden"></div>'),this.dom.innerHTML=s,r.appendChild(this.dom),this.className="spine-player-button-icon-"+e+"-selected"}return Object(r.a)(t,[{key:"dispose",value:function(){}},{key:"hide",value:function(t){return this.dom.remove(),this.button.classList.remove(this.className),this.id==t&&(this.player.popup=null,!0)}},{key:"show",value:function(){var t=this;this.player.popup=this,this.button.classList.add(this.className),this.dom.classList.remove("spine-player-hidden");var e=!1;requestAnimationFrame((function i(){e||requestAnimationFrame(i);var a=t.player.dom,n=Math.abs(a.getBoundingClientRect().bottom-a.getBoundingClientRect().bottom),r=Math.abs(a.getBoundingClientRect().right-a.getBoundingClientRect().right);t.dom.style.maxHeight=a.clientHeight-n-r+"px"}));var i=!0;this.player.addEventListener(window,"click",(function a(n){i||t.player.popup!=t?i=!1:t.dom.contains(n.target)||(t.dom.remove(),window.removeEventListener("click",a),t.button.classList.remove(t.className),t.player.popup=null,e=!0)}))}}]),t}(),oa=function(){function t(e){Object(n.a)(this,t),this.text=e,this.switch=null,this.enabled=!1,this.change=function(){}}return Object(r.a)(t,[{key:"create",value:function(){var t=this;return this.switch=ca('\n<div class="spine-player-switch">\n\t<span class="spine-player-switch-text">'.concat(this.text,'</span>\n\t<div class="spine-player-switch-knob-area">\n\t\t<div class="spine-player-switch-knob"></div>\n\t</div>\n</div>')),this.switch.addEventListener("click",(function(){t.setEnabled(!t.enabled),t.change&&t.change(t.enabled)})),this.switch}},{key:"setEnabled",value:function(t){var e,i;t?null===(e=this.switch)||void 0===e||e.classList.add("active"):null===(i=this.switch)||void 0===i||i.classList.remove("active"),this.enabled=t}},{key:"isEnabled",value:function(){return this.enabled}}]),t}(),ha=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(n.a)(this,t),this.snaps=e,this.snapPercentage=i,this.big=a,this.slider=null,this.value=null,this.knob=null,this.change=function(){}}return Object(r.a)(t,[{key:"create",value:function(){var t=this;this.slider=ca('\n<div class="spine-player-slider '.concat(this.big?"big":"",'">\n\t<div class="spine-player-slider-value"></div>\n\t\x3c!--<div class="spine-player-slider-knob"></div>--\x3e\n</div>')),this.value=la(this.slider,"spine-player-slider-value"),this.setValue(0);var e=!1;return new Mi(this.slider).addListener({down:function(i,a){var n;e=!0,null===(n=t.value)||void 0===n||n.classList.add("hovering")},up:function(i,a){var n;e=!1,t.change&&t.change(t.setValue(i/t.slider.clientWidth)),null===(n=t.value)||void 0===n||n.classList.remove("hovering")},moved:function(i,a){e&&t.change&&t.change(t.setValue(i/t.slider.clientWidth))},dragged:function(e,i){t.change&&t.change(t.setValue(e/t.slider.clientWidth))}}),this.slider}},{key:"setValue",value:function(t){if(t=Math.max(0,Math.min(1,t)),this.snaps){var e=1/this.snaps,i=t%e;i<e*this.snapPercentage?t-=i:i>e-e*this.snapPercentage&&(t=t-i+e),t=Math.max(0,Math.min(1,t))}return this.value.style.width=100*t+"%",t}}]),t}();function la(t,e){return t.getElementsByClassName(e)[0]}function ca(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}function ua(t,e){for(var i=0;i<t.length;i++)t[i].classList.remove(e)}function da(t){return JSON.stringify(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")}var fa=new c(.478,0,0,.25),va=new c(1,1,1,1),ma=new c(.478,0,0,.5),ga=new c(1,0,0,.8)}}]);