(this["webpackJsonppandora-frontend"]=this["webpackJsonppandora-frontend"]||[]).push([[5],{1068:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return g}));var c,r=n(3),i=n.n(r),o=n(1),a=n(10),s=n(7),l=n(2),b=n(93),d=n(24),j=n.n(d),u=n(61),p=(n(23),n(48)),O=n(35),x=n(196),f=n(259),h=n(535),m=function(){var e=Object(l.useState)(Date.now()),t=Object(s.a)(e,2),n=t[0],c=t[1];return{lastUpdated:n,previousLastUpdated:Object(h.a)(n),setLastUpdated:Object(l.useCallback)((function(){c(Date.now())}),[c])}};!function(e){e.NOT_FETCHED="not-fetched",e.FETCHING="fetching",e.SUCCESS="success",e.FAILED="failed"}(c||(c={}));var v=function(e){var t=c.NOT_FETCHED,n=c.SUCCESS,r=c.FAILED,b=c.FETCHING,d=Object(l.useState)({balance:O.c,fetchStatus:t}),x=Object(s.a)(d,2),h=x[0],m=x[1],v=Object(u.c)().account,g=Object(f.a)().fastRefresh;return Object(l.useEffect)((function(){v&&function(){var t=Object(a.a)(i.a.mark((function t(){var c,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(p.b)(e),t.prev=1,m((function(e){return Object(o.a)(Object(o.a)({},e),{},{fetchStatus:b})})),t.next=5,c.balanceOf(v);case 5:a=t.sent,m({balance:new j.a(a.toString()),fetchStatus:n}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),m((function(e){return Object(o.a)(Object(o.a)({},e),{},{fetchStatus:r})}));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}()()}),[v,e,g,n,r]),h},g=function(){var e=Object(l.useState)(c.NOT_FETCHED),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(l.useState)(b.a.BigNumber.from(0)),d=Object(s.a)(o,2),j=d[0],p=d[1],O=Object(u.c)().account,f=m(),h=f.lastUpdated,v=f.setLastUpdated;return Object(l.useEffect)((function(){O&&function(){var e=Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.getBalance(O);case 3:t=e.sent,p(t),r(c.SUCCESS),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(c.FAILED);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[O,h,p,r]),{balance:j,fetchStatus:n,refresh:v}};t.b=v},1164:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var c,r=n(1),i=n(18),o=n(2),a=n(4),s=n(58),l=n(61),b=n(5),d=n(113),j=n(92),u=n(354),p=n(6),O=n(23),x=n(119),f=n(0),h=["tokenAddress","amount"],m=["cost","tokenAddress","bnbBusdPrice"],v=["title","children"],g=Object(O.l)(),k=function(e){var t,n,c,o=e.tokenAddress,s=e.amount,l=Object(i.a)(e,h),b=Object(a.gc)().isMobile,j=s>999999?Object(x.b)(s,0,0):Object(x.b)(s),u=b&&j.length>9;return Object(f.jsxs)(a.T,Object(r.a)(Object(r.a)({alignItems:"center"},l),{},{children:[Object(f.jsx)("img",{style:{width:b?16:20,marginRight:4},src:Object(d.a)(null===(t=g[null===o||void 0===o?void 0:o.toLowerCase()])||void 0===t||null===(n=t.symbol)||void 0===n?void 0:n.toLowerCase()),alt:"token"}),Object(f.jsx)(a.Qb,{fontWeight:"600",children:j}),u?null:Object(f.jsx)(a.Qb,{fontWeight:"600",ml:"4px",children:null===(c=g[null===o||void 0===o?void 0:o.toLowerCase()])||void 0===c?void 0:c.symbol})]}))},y=function(e){var t=e.cost,n=e.tokenAddress,c=e.bnbBusdPrice,o=Object(i.a)(e,m);Object(u.b)(c,t),Object(a.gc)().isMobile;return Object(f.jsx)(a.T,Object(r.a)(Object(r.a)({alignItems:"center"},o),{},{children:Object(f.jsx)(k,{tokenAddress:n,amount:t})}))},w=function(e){var t=e.title,n=e.children,c=Object(i.a)(e,v);return Object(f.jsxs)(a.T,Object(r.a)(Object(r.a)({alignItems:"center",justifyContent:"space-between"},c),{},{children:[Object(f.jsx)(a.Qb,{fontSize:"12px",color:"textSubtle",maxWidth:"120px",ellipsis:!0,title:t,children:t}),Object(f.jsx)(a.n,{children:n})]}))},C=Object(p.e)(a.u)(c||(c=Object(b.a)(["\n  border-radius: 8px;\n  max-width: 420px;\n  transition: opacity 200ms;\n\n  & > div {\n    border-radius: 8px;\n  }\n\n  "," {\n    &:hover > a {\n      cursor: pointer;\n      opacity: 0.6;\n    }\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),I=n(7),T=n(94),B=n(29),S=n(127),D=n(1124),P=n(1394),N=n(1107),A=n(1123),E=n(151),F=n(1044),M=n(450),R=n(1257),Q=function(e){var t=e.nft,n=e.isShownOffer,c=e.isBot,r=e.bnbBusdPrice,i=e.askingUsdPrice,o=e.biddingUsdPrice,s=e.isOwner,l=e.onPresentBuyModal,b=e.aprs,d=(e.dailyEarnings,e.isSystemNft),j=t.name,u=t.characterImage,p=t.power,O=t.tokenId,x=t.marketData;return Object(f.jsxs)(a.v,{p:"0px",children:[Object(f.jsxs)(a.n,{position:"relative",children:[Object(f.jsx)(A.a,{isSystemNft:d,characterImage:u,tokenId:O,power:c?p:void 0}),d&&Object(f.jsx)(N.b,{type:t.type,level:t.level,values:b})]}),Object(f.jsxs)(a.T,{p:"8px",flexDirection:"column",children:[Object(f.jsx)(a.T,{alignItems:"center",justifyContent:"space-between",children:Object(f.jsx)(a.T,{children:Object(f.jsx)(a.Qb,{display:"inline",fontSize:"14px",as:"h4",fontWeight:"600",mb:"8px",children:j})})}),Object(f.jsx)(a.n,{borderTop:"1px solid",borderTopColor:"cardBorder",pt:"16px",children:x.askingPrice&&Object(f.jsxs)(a.T,{flexDirection:"column",alignItems:"flex-start",children:[c&&Object(f.jsx)(R.b,{power:p,isCard:!0}),Object(f.jsx)(w,{title:"",children:Object(f.jsx)(y,{tokenAddress:x.askingToken,cost:Number(x.askingPrice),bnbBusdPrice:r})}),Object(f.jsx)(w,{title:"",children:Object(f.jsxs)(a.Qb,{opacity:.4,fontSize:"12px",children:["~ $",i]})}),Object(f.jsx)(a.o,{width:"100%",mt:"16px",onClick:function(e){e.preventDefault(),l()},scale:"sm",disabled:s,style:{fontSize:12},children:s?"Owned":"Buy"})]})}),n&&Object(f.jsxs)(a.n,{borderTop:"1px solid",borderTopColor:"cardBorder",pt:"16px",pb:"16px",children:[Object(f.jsx)(w,{title:"Offer",mb:"0px",children:Object(f.jsx)(y,{tokenAddress:x.askingToken,cost:Number(x.biddingPrice),bnbBusdPrice:r})}),Object(f.jsx)(w,{title:"",children:Object(f.jsxs)(a.Qb,{fontSize:"12px",children:["~ $",o]})})]})]})]})},L=function(e){var t,n,c=e.nft,r=e.isShownOffer,i=e.onBought,s=Object(T.k)(),l=(null===(t=c.marketData)||void 0===t?void 0:t.askingToken)&&(null===(n=c.marketData)||void 0===n?void 0:n.askingPrice),b=Object(S.d)(Object.values(O.m).map((function(e){return e.symbol}))),d=Object(B.a)().account,j=Object(F.i)().pools,u=c.name,p=c.characterImage,h=c.power,m=c.tokenId,v=Object(D.a)(),g=[E.a.DroidBot,E.a.PandoBox].includes(c.type),k="DroidBot"===c.type,C=Object(a.hc)(Object(f.jsx)(P.a,{nftToBuy:c,history:s,onSuccess:i})),L=Object(I.a)(C,1)[0],_=Object(o.useMemo)((function(){return d&&d.toLowerCase()===(null===c||void 0===c?void 0:c.owner.toLowerCase())}),[c,d]),z=Object(o.useMemo)((function(){return Object.entries(j).map((function(e){var t,n,c,r=Object(I.a)(e,2),i=r[0],o=r[1];return{type:i,totalValue:Number(h)/(Number(o.totalPower)+Number(h))*Number(null===(t=o.dailyRewards)||void 0===t?void 0:t.total),busdValue:Number(h)/(Number(o.totalPower)+Number(h))*Number(null===(n=o.dailyRewards)||void 0===n?void 0:n.busd),psrValue:"premium"===i?Number(h)/(Number(o.totalPower)+Number(h))*Number(null===(c=o.dailyRewards)||void 0===c?void 0:c.psr):null}}))}),[j,h]),U=Object(o.useMemo)((function(){var e;return Object(O.d)(null===(e=c.marketData)||void 0===e?void 0:e.askingToken)}),[c]),W=Object(x.b)(b(null===U||void 0===U?void 0:U.symbol)*Number(c.marketData.askingPrice)),V=Object(x.b)(b(null===U||void 0===U?void 0:U.symbol)*Number(c.marketData.biddingPrice)),H=Object(a.gc)().isMobile,X=Object(o.useMemo)((function(){var e=c.marketData.askingPrice?b(null===U||void 0===U?void 0:U.symbol)*Number(c.marketData.askingPrice):0,t=k?Number(h):M.a[c.level]||M.a[1];return Object.entries(j).map((function(n){var c,r=Object(I.a)(n,2),i=r[0],o=r[1];return{type:i,value:t/(Number(o.totalPower)+t)*Number(null===(c=o.dailyRewards)||void 0===c?void 0:c.total)*365/e*100}}))}),[j,c]);return H?Object(f.jsx)(Q,{isSystemNft:g,nft:c,isOwner:_,isShownOffer:r,isBot:k,bnbBusdPrice:v,askingUsdPrice:W,biddingUsdPrice:V,onPresentBuyModal:l?L:null,aprs:X,dailyEarnings:z}):Object(f.jsxs)(a.v,{p:"0px",children:[Object(f.jsxs)(a.n,{position:"relative",children:[Object(f.jsx)(A.a,{isSystemNft:g,characterImage:k||!g?p:p.replace(".png","-lock.png"),tokenId:m,power:k?h:void 0}),g&&Object(f.jsx)(N.b,{type:c.type,level:c.level,values:X})]}),Object(f.jsxs)(a.T,{p:"10px 16px",flexDirection:"column",children:[Object(f.jsx)(a.T,{alignItems:"center",justifyContent:"space-between",children:Object(f.jsx)(a.T,{children:Object(f.jsx)(a.Qb,{display:"inline",as:"h4",fontWeight:"600",mb:"8px",children:u})})}),Object(f.jsx)(a.n,{borderTop:"1px solid",borderTopColor:"cardBorder",pt:"16px",children:c.marketData.askingPrice&&Object(f.jsxs)(f.Fragment,{children:[k&&Object(f.jsx)(R.b,{power:h}),Object(f.jsxs)(a.T,{justifyContent:"space-between",children:[Object(f.jsxs)(a.T,{flexDirection:"column",children:[Object(f.jsx)(y,{tokenAddress:null===c||void 0===c?void 0:c.marketData.askingToken,cost:Number(c.marketData.askingPrice),bnbBusdPrice:v}),Object(f.jsxs)(a.Qb,{opacity:.4,fontSize:"12px",children:["~ $",W]})]}),Object(f.jsx)(a.o,{width:["100%",null,"max-content"],onClick:function(e){e.preventDefault(),l&&L()},scale:"sm",disabled:_,children:_?"Owned":"Buy"})]})]})}),r&&Object(f.jsxs)(a.n,{borderTop:"1px solid",borderTopColor:"cardBorder",pt:"16px",pb:"16px",children:[Object(f.jsx)(w,{title:H?"Offer":"Your offer price",mb:H?"0px":"8px",children:Object(f.jsx)(y,{tokenAddress:null===c||void 0===c?void 0:c.marketData.askingToken,cost:Number(c.marketData.biddingPrice),bnbBusdPrice:v})}),Object(f.jsx)(w,{title:"",children:Object(f.jsxs)(a.Qb,{opacity:.4,fontSize:"12px",children:["~ $",V]})})]})]})]})},_=function(e){var t=e.nft,n=e.isShownOffer,c=e.isBot,r=e.bnbBusdPrice,i=e.askingUsdPrice,o=e.biddingUsdPrice,s=(Object(j.a)().t,t.name),l=t.characterImage,b=t.power,d=t.tokenId,u=t.marketData;return Object(f.jsxs)(a.v,{p:"0px",children:[Object(f.jsx)(A.a,{characterImage:l,tokenId:d,power:c?b:void 0}),Object(f.jsxs)(a.T,{p:"8px",flexDirection:"column",children:[Object(f.jsx)(a.T,{alignItems:"center",justifyContent:"space-between",children:Object(f.jsx)(a.T,{children:Object(f.jsx)(a.Qb,{display:"inline",fontSize:"14px",as:"h4",fontWeight:"600",mb:"8px",children:s})})}),Object(f.jsx)(a.n,{borderTop:"1px solid",borderTopColor:"cardBorder",pt:"16px",children:t.marketData.askingPrice&&Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(a.T,{justifyContent:"space-between",children:Object(f.jsxs)(a.T,{flexDirection:"column",alignItems:"flex-start",children:[Object(f.jsx)(y,{tokenAddress:null===t||void 0===t?void 0:t.marketData.askingToken,cost:Number(t.marketData.askingPrice),bnbBusdPrice:r}),Object(f.jsxs)(a.Qb,{opacity:.4,fontSize:"12px",children:["~ $",i]})]})})})}),n&&Object(f.jsxs)(a.n,{borderTop:"1px solid",borderTopColor:"cardBorder",pt:"16px",pb:"16px",children:[Object(f.jsx)(w,{title:"Offer",mb:"0px",children:Object(f.jsx)(y,{tokenAddress:u.askingToken,cost:Number(u.biddingPrice),bnbBusdPrice:r})}),Object(f.jsx)(w,{title:"",children:Object(f.jsxs)(a.Qb,{opacity:.4,fontSize:"12px",children:["~ $",o]})})]})]})]})},z=function(e){var t=e.nft,n=e.isShownOffer,c=(e.onBought,Object(j.a)().t),r=Object(S.d)(Object.values(O.m).map((function(e){return e.symbol}))),i=t.name,s=t.characterImage,l=t.power,b=t.tokenId,d=Object(D.a)(),u="DroidBot"===t.type,p=Object(o.useMemo)((function(){var e;return Object(O.d)(null===(e=t.marketData)||void 0===e?void 0:e.askingToken)}),[t]),h=Object(x.b)(r(null===p||void 0===p?void 0:p.symbol)*Number(t.marketData.askingPrice)),m=Object(x.b)(r(null===p||void 0===p?void 0:p.symbol)*Number(t.marketData.biddingPrice)),v=Object(a.gc)().isMobile;return v?Object(f.jsx)(_,{nft:t,isShownOffer:n,isBot:u,bnbBusdPrice:d,askingUsdPrice:h,biddingUsdPrice:m}):Object(f.jsxs)(a.v,{p:"0px",children:[Object(f.jsx)(A.a,{characterImage:s,tokenId:b,power:u?l:void 0}),Object(f.jsxs)(a.T,{p:v?"8px":"16px",flexDirection:"column",children:[Object(f.jsx)(a.T,{alignItems:"center",justifyContent:"space-between",children:Object(f.jsx)(a.T,{children:Object(f.jsx)(a.Qb,{display:"inline",as:"h4",fontWeight:"600",mb:"8px",children:i})})}),Object(f.jsx)(a.n,{borderTop:"1px solid",borderTopColor:"cardBorder",pt:"16px",children:t.marketData.askingPrice&&Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(a.T,{justifyContent:"space-between",children:[Object(f.jsx)(a.Qb,{opacity:.4,fontSize:"12px",children:c("Price")}),Object(f.jsxs)(a.T,{flexDirection:"column",alignItems:"flex-end",children:[Object(f.jsx)(y,{tokenAddress:null===t||void 0===t?void 0:t.marketData.askingToken,cost:Number(t.marketData.askingPrice),bnbBusdPrice:d}),Object(f.jsxs)(a.Qb,{opacity:.4,fontSize:"12px",children:["~ $",h]})]})]})})}),n&&Object(f.jsxs)(a.n,{borderTop:"1px solid",borderTopColor:"cardBorder",pt:"16px",pb:"16px",children:[Object(f.jsx)(w,{title:v?"Offer":"Your offer price",mb:v?"0px":"8px",children:Object(f.jsx)(y,{tokenAddress:null===t||void 0===t?void 0:t.marketData.askingToken,cost:Number(t.marketData.biddingPrice),bnbBusdPrice:d})}),Object(f.jsx)(w,{title:"",children:Object(f.jsxs)(a.Qb,{opacity:.4,fontSize:"12px",children:["~ $",m]})})]})]})]})},U=n(1376),W=["nft","onBought","isMine","isShownOffer","isShownLocation","fetchOffers"],V=function(e){var t,n=e.nft,c=e.onBought,o=e.isMine,b=void 0!==o&&o,d=e.isShownOffer,j=void 0!==d&&d,u=e.isShownLocation,p=void 0!==u&&u,O=e.fetchOffers,x=Object(i.a)(e,W),h=Object(l.c)().account,m=null===n||void 0===n||null===(t=n.offers)||void 0===t?void 0:t.find((function(e){return e.address===h.toLowerCase()}));return Object(f.jsxs)(C,Object(r.a)(Object(r.a)({},x),{},{children:[Object(f.jsx)(s.Link,{to:"/nft?tokenId=".concat(n.tokenId,"&type=").concat(n.type),children:b?Object(f.jsx)(z,{nft:n,onBought:c,isShownOffer:j,isShownLocation:p}):Object(f.jsx)(L,{nft:n,onBought:c,isShownOffer:j,isShownLocation:p})}),b&&(null===m||void 0===m?void 0:m.bidId)&&Object(f.jsx)(a.n,{px:["8px","8px","16px","16px"],pb:["8px","8px","16px","16px"],children:Object(f.jsx)(U.a,{collectionAddress:n.collectionAddress,tokenId:n.tokenId,bidId:null===m||void 0===m?void 0:m.bidId,askId:null===m||void 0===m?void 0:m.askedId,type:n.type,onRefreshData:O})})]}))}},1376:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var c=n(3),r=n.n(c),i=n(10),o=n(7),a=n(4),s=n(166),l=n(167),b=n(74),d=n(210),j=n(2),u=n(92),p=n(82),O=n(258),x=n(532),f=n(273),h=n(0);function m(e){var t=e.collectionAddress,n=e.tokenId,c=e.bidId,m=e.askId,v=e.type,g=e.page,k=void 0===g?1:g,y=e.scale,w=void 0===y?"md":y,C=e.onRefreshData,I=void 0===C?null:C,T=Object(u.a)().t,B=Object(j.useState)(!1),S=Object(o.a)(B,2),D=S[0],P=S[1],N=Object(b.r)(),A=Object(d.a)(),E=A.toastError,F=A.toastSuccess,M=Object(p.b)(),R=function(){var e=Object(i.a)(r.a.mark((function e(){var i,o,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,i=Object(f.a)(),e.next=5,Object(x.a)(N,"cancelBid",[t,n,c.toString()],{gasPrice:i});case 5:return o=e.sent,e.next=8,o.wait();case 8:a=e.sent,F(T("Cancelled!"),Object(h.jsx)(l.b,{txHash:a.transactionHash})),I&&I(),M(Object(O.d)({askId:m,type:v,page:k})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0),E(T("Error"),T("Please try again. Confirm the transaction and make sure you are paying enough gas!"));case 18:return e.prev=18,P(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(a.o,{variant:"secondary",scale:w,width:"100%",onClick:R,disabled:D,children:[T("Cancel Bidding"),D&&Object(h.jsx)(s.a,{})]})}},1394:function(e,t,n){"use strict";var c,r,i=n(3),o=n.n(i),a=n(10),s=n(7),l=n(16),b=n(2),d=n(93),j=n(349),u=n(92),p=n(1068),O=n(119),x=n(35),f=n(23),h=n(100),m=n(74),v=n(61),g=n(345),k=n(1046),y=n(210),w=n(167),C=n(82),I=n(258),T=n(39),B=n(78),S=n(5),D=n(6),P=n(4);n(1124),n(354);!function(e){e[e.BNB=0]="BNB",e[e.WBNB=1]="WBNB"}(c||(c={})),function(e){e[e.REVIEW=0]="REVIEW",e[e.APPROVE_AND_CONFIRM=1]="APPROVE_AND_CONFIRM",e[e.CONFIRM=2]="CONFIRM",e[e.TX_CONFIRMED=3]="TX_CONFIRMED"}(r||(r={}));var N,A,E,F,M=n(0),R=Object(D.e)(P.ib)(N||(N=Object(S.a)(["\n  & > div:last-child {\n    padding: 0;\n  }\n  & h2:first-of-type {\n    ",";\n  }\n  & svg:first-of-type {\n    ",";\n  }\n"])),(function(e){var t=e.stage,n=e.theme;return t===r.APPROVE_AND_CONFIRM||t===r.CONFIRM?"color: ".concat(n.colors.textSubtle):null}),(function(e){var t=e.stage,n=e.theme;return t===r.APPROVE_AND_CONFIRM||t===r.CONFIRM?"fill: ".concat(n.colors.textSubtle):null})),Q=(Object(D.e)(P.V)(A||(A=Object(S.a)(["\n  margin: 16px 0;\n  padding: 16px;\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  grid-template-columns: 1fr 1fr;\n  grid-row-gap: 8px;\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.cardBorder}),(function(e){return e.theme.radii.default})),n(129)),L=n.n(Q),_=n(9),z=n(127),U=n(48),W=n(110),V=n(166),H=n(1059),X=n(1066),Y=function(e){var t,n,c=e.nftToBuy,r=e.walletFetchStatus,i=e.isApproved,o=e.isApproveChecking,a=e.isApproving,l=e.isConfirming,d=e.handleApprove,j=e.handleConfirm,h=e.onNavigate,m=Object(u.a)().t,g=Object(v.c)().account,k=Object(b.useState)(0),y=Object(s.a)(k,2),w=y[0],C=y[1],I=Object(b.useState)(!1),T=Object(s.a)(I,2),B=T[0],S=T[1],D=Object(z.d)(Object.values(f.m).map((function(e){return e.symbol})));Object(b.useEffect)((function(){S(!0),Object(U.b)(c.marketData.askingToken).balanceOf(g).then((function(e){C(Object(x.d)(e).dividedBy(_.p).toNumber()),S(!1)})).catch(console.error)}),[c,g]);var N=Object(b.useMemo)((function(){return w>Number(c.marketData.askingPrice)}),[c,w]),A=Object(b.useMemo)((function(){return Object(f.d)(c.marketData.askingToken)}),[c]),E=D(null===A||void 0===A?void 0:A.symbol),F=Number(c.marketData.askingPrice)*E;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(P.T,{p:["16px",null,"20px"],flexDirection:"column",children:[Object(M.jsxs)(P.T,{justifyContent:"space-between",alignItems:"center",mb:"16px",children:[Object(M.jsx)(P.Qb,{small:!0,color:"textSubtle",children:c.type}),Object(M.jsx)(P.T,{justifyContent:"space-between",alignItems:"center",children:Object(M.jsx)(P.Qb,{ml:"4px",children:c.name})})]}),Object(M.jsxs)(P.T,{justifyContent:"space-between",alignItems:"center",mb:"16px",children:[Object(M.jsx)(P.Qb,{small:!0,color:"textSubtle",children:m("Token Id")}),Object(M.jsx)(P.T,{justifyContent:"space-between",alignItems:"center",children:Object(M.jsxs)(P.Qb,{ml:"4px",children:["#",c.tokenId]})})]}),Object(M.jsxs)(P.T,{justifyContent:"space-between",alignItems:"center",mb:"16px",children:[Object(M.jsx)(P.Qb,{small:!0,color:"textSubtle",children:m("Date")}),Object(M.jsx)(P.T,{justifyContent:"space-between",alignItems:"center",children:Object(M.jsx)(P.Qb,{ml:"4px",children:L.a.unix(Number(c.updatedAt)).format("YYYY-MM-DD, h:mm")})})]}),Object(M.jsxs)(P.T,{justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #4C4F5F",paddingBottom:"32px",children:[Object(M.jsx)(P.Qb,{small:!0,color:"textSubtle",children:m("Available balance")}),Object(M.jsxs)(P.T,{justifyContent:"space-between",alignItems:"center",children:[Object(M.jsx)(P.n,{width:16,height:16,mr:"4px",children:Object(M.jsx)(H.a,{width:16,height:16,token:null===A||void 0===A||null===(t=A.symbol)||void 0===t?void 0:t.toLowerCase()})}),B?Object(M.jsx)(P.Db,{width:"64px",height:"24px"}):Object(M.jsx)(W.a,{value:w,unit:null===A||void 0===A?void 0:A.symbol,decimals:2})]})]}),Object(M.jsxs)(P.T,{justifyContent:"space-between",alignItems:"center",mt:"32px",children:[Object(M.jsx)(P.Qb,{small:!0,color:"textSubtle",children:m("Price")}),Object(M.jsxs)(P.T,{justifyContent:"space-between",alignItems:"center",children:[Object(M.jsx)(P.n,{width:24,height:24,children:Object(M.jsx)(H.a,{width:24,height:24,token:null===A||void 0===A||null===(n=A.symbol)||void 0===n?void 0:n.toLowerCase()})}),Object(M.jsx)(W.a,{ml:"4px",scale:"xl",bold:!0,value:Number(c.marketData.askingPrice),unit:null===A||void 0===A?void 0:A.symbol,decimals:2}),Object(M.jsxs)(P.Qb,{display:"inline",ml:"4px",opacity:.4,children:["~$",Object(O.b)(F,0,2)]})]})]})]}),Object(M.jsx)(X.a,{}),Object(M.jsxs)(P.T,{p:["16px",null,"20px"],flexDirection:"column",children:[N&&Object(M.jsxs)(M.Fragment,{children:[!i&&Object(M.jsx)(P.o,{endIcon:a?Object(M.jsx)(V.a,{}):void 0,variant:"secondary",disabled:o||a,onClick:d,children:a?"".concat(m("Approving")):m("Approve")}),Object(M.jsx)(P.o,{mt:"16px",endIcon:l?Object(M.jsx)(V.a,{}):void 0,disabled:!i||l||!N,onClick:j,children:m(l?"Confirming":"Confirm")})]}),r===p.a.SUCCESS&&!N&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(P.o,{variant:"purple",onClick:function(){var e="?outputCurrency=".concat(A.address);h("/swap".concat(e))},children:[m("Buy")," ",A.symbol]}),Object(M.jsx)(P.Qb,{color:"failure",mt:"8px",children:m("Balance is not enough")})]})]})]})},$=n(1189),G=n(1076),J=n(256),q=n(151),K="droidbots",Z={DroidBot:K,PandoBox:"pandoboxes",Alpaca:"limited-nfts"},ee=Object(D.e)(P.T)(E||(E=Object(S.a)(["\n  position: relative;\n  margin-top: 24px;\n"]))),te=function(e){var t,n=e.nft,c=e.history,r=e.onDismiss,i=Object(u.a)().t,o="PandoBox"===n.type,a=(t={},Object(l.a)(t,q.a.DroidBot,Object(M.jsx)(P.T,{flexDirection:"column",alignItems:"center",justifyContent:"flex-end",position:"relative",top:"-15px",children:Object(M.jsx)(J.a,{style:{width:"65%"},src:"/videos/droidBot/full/Droidboltl".concat(null===n||void 0===n?void 0:n.level,"-1.mp4"),poster:"/images/droidBot/full/droidbotL_".concat(null===n||void 0===n?void 0:n.level,".png")})})),Object(l.a)(t,q.a.PandoBox,Object(M.jsx)(ee,{justifyContent:"center",children:Object(M.jsx)(J.a,{style:{width:"65%"},src:"/videos/pandoBox/lock/Pandoboxl-".concat(n.level,"-Lock.mp4"),poster:"/images/pandoBox/lock/PandoboxL-".concat(n.level,"-Lock.mp4")})})),Object(l.a)(t,q.a.Alpaca,Object(M.jsx)(ee,{justifyContent:"center",children:Object(M.jsx)(J.a,{style:{width:"65%"},src:n.characterImage,poster:n.characterImage})})),t);return Object(M.jsxs)(P.T,{p:"16px",flexDirection:"column",children:[a[n.type],Object(M.jsx)(G.a,{color:"success",mt:"24px",fontSizeLg:24,fontSizeXs:16,bold:!0,textAlign:"center",children:i("Congratulations!")}),Object(M.jsx)(G.a,{fontSizeLg:24,fontSizeXs:18,bold:!0,textAlign:"center",children:"You have received ".concat(n.name)}),o&&Object(M.jsx)(G.a,{fontSizeLg:16,fontSizeXs:14,opacity:.72,textAlign:"center",m:["8px",null,null,null,"16px 50px 24px 50px"],children:"Please go to Inventory to open your ".concat(n.type)}),Object(M.jsxs)(P.V,{mt:"8px",gridTemplateColumns:["1fr",null,"repeat(2, 1fr)"],gridGap:["8px",null,"16px"],children:[Object(M.jsx)(P.o,{width:"100%",variant:"secondary",onClick:function(){c.push("/inventory/".concat(Z[n.type]||K)),r()},children:i("Go To Inventory")}),Object(M.jsx)(P.o,{width:"100%",onClick:function(){r()},children:i("Continue shopping")})]})]})},ne=(F={},Object(l.a)(F,r.REVIEW,"Review"),Object(l.a)(F,r.APPROVE_AND_CONFIRM,"Back"),Object(l.a)(F,r.CONFIRM,"Back"),Object(l.a)(F,r.TX_CONFIRMED,"Transaction Confirmed"),F);t.a=function(e){var t=e.nftToBuy,n=e.onDismiss,i=e.history,l=e.onSuccess,S=Object(b.useState)(r.REVIEW),D=Object(s.a)(S,2),P=D[0],N=D[1],A=Object(b.useState)(c.BNB),E=Object(s.a)(A,2),F=E[0],Q=E[1],L=Object(b.useState)(!1),_=Object(s.a)(L,2),z=_[0],U=_[1],W=Object(b.useState)(0),V=Object(s.a)(W,2),H=V[0],X=V[1],G=Object(j.a)().theme,J=Object(u.a)().t,q=Object(g.a)().callWithGasPrice,K=Object(v.c)().account,Z=Object(m.i)(t.marketData.askingToken),ee=Object(m.r)(),ce=Object(y.a)().toastSuccess,re=Object(C.b)(),ie=Object(b.useMemo)((function(){return Object(h.parseUnits)(t.marketData.askingPrice,"ether")}),[t.marketData.askingPrice]),oe=parseFloat(t.marketData.askingPrice),ae=Object(p.c)(),se=ae.balance,le=ae.fetchStatus,be=parseFloat(Object(h.formatEther)(se)),de=Object(p.b)(f.c.wbnb.address),je=de.balance,ue=de.fetchStatus,pe=Object(O.e)(je),Oe=F===c.BNB?be:pe,xe=F===c.BNB?le:ue,fe=F===c.BNB?se.lt(ie):je.lt(Object(x.d)(ie)),he=Object(b.useMemo)((function(){return{watchedFlag:H,nftPriceWei:ie}}),[H,ie]),me=Object(b.useCallback)(Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.allowance(K,ee.address);case 3:return t=e.sent,e.abrupt("return",t.gte(ie));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[ie,Z,ee,K]);Object(b.useEffect)((function(){se.lt(ie)&&je.gte(Object(x.d)(ie))&&!z&&(Q(c.WBNB),U(!0))}),[se,je,ie,z]);var ve=Object(k.a)({onRequiresApproval:me,onApprove:function(){return q(Z,"approve",[ee.address,d.a.constants.MaxUint256])},onApproveSuccess:function(){var e=Object(a.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.receipt,ce(J("Contract approved - You can now buy NFT!"),Object(M.jsx)(w.b,{txHash:n.transactionHash})),X((function(e){return e+1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onConfirm:function(){return q(ee,"buy",[t.collectionAddress,t.tokenId,ie.toString()])},onSuccess:function(){var e=Object(a.a)(o.a.mark((function e(n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=n.receipt,l&&l(),N(r.TX_CONFIRMED),re(Object(I.c)({tokenId:t.tokenId,type:t.type})),re(Object(T.t)({notificationKey:Object(B.e)(K,t.type),action:"add",data:[t.tokenId]})),re(Object(I.e)({tokenId:t.tokenId,type:t.type,page:1})),re(Object(I.d)({askId:"0",type:t.type,page:1})),ce(J("Your NFT has been sent to your wallet"),Object(M.jsx)(w.b,{txHash:c.transactionHash}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),watched:he}),ge=ve.isApproveChecking,ke=ve.isApproving,ye=ve.isApproved,we=ve.isConfirming,Ce=ve.handleApprove,Ie=ve.handleConfirm;return Object(M.jsxs)(R,{title:J(ne[P]),stage:P,onDismiss:n,onBack:null,headerBackground:G.colors.gradients.cardHeader,backgroundContainer:P===r.TX_CONFIRMED?"#191624":null,children:[P===r.REVIEW&&Object(M.jsx)(Y,{nftToBuy:t,paymentCurrency:F,setPaymentCurrency:Q,nftPrice:oe,walletBalance:Oe,walletFetchStatus:xe,notEnoughBnbForPurchase:fe,handleApprove:Ce,isApproved:ye,isApproveChecking:ge,isApproving:ke,isConfirming:we,handleConfirm:Ie,onNavigate:function(e){i.push(e),n()}}),P===r.CONFIRM&&Object(M.jsx)($.a,{isConfirming:we,handleConfirm:Ie}),P===r.TX_CONFIRMED&&Object(M.jsx)(te,{onDismiss:n,history:i,nft:t})]})}}}]);